(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=r(c);fetch(c.href,u)}})();function Fp(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Ev(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var n=o.default;if(typeof n=="function"){var r=function i(){var c=!1;try{c=this instanceof i}catch{}return c?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(o).forEach(function(i){var c=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(r,i,c.get?c:{enumerable:!0,get:function(){return o[i]}})}),r}var iu={exports:{}},Xn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km;function Cv(){if(Km)return Xn;Km=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,c,u){var f=null;if(u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),"key"in c){u={};for(var p in c)p!=="key"&&(u[p]=c[p])}else u=c;return c=u.ref,{$$typeof:o,type:i,key:f,ref:c!==void 0?c:null,props:u}}return Xn.Fragment=n,Xn.jsx=r,Xn.jsxs=r,Xn}var Im;function $v(){return Im||(Im=1,iu.exports=Cv()),iu.exports}var s=$v(),ou={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm;function kv(){if(Xm)return je;Xm=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=v&&N[v]||N["@@iterator"],typeof N=="function"?N:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,C={};function $(N,q,se){this.props=N,this.context=q,this.refs=C,this.updater=se||S}$.prototype.isReactComponent={},$.prototype.setState=function(N,q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,q,"setState")},$.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function O(){}O.prototype=$.prototype;function D(N,q,se){this.props=N,this.context=q,this.refs=C,this.updater=se||S}var U=D.prototype=new O;U.constructor=D,j(U,$.prototype),U.isPureReactComponent=!0;var A=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function I(N,q,se,le,ne,fe){return se=fe.ref,{$$typeof:o,type:N,key:q,ref:se!==void 0?se:null,props:fe}}function ae(N,q){return I(N.type,q,void 0,void 0,void 0,N.props)}function X(N){return typeof N=="object"&&N!==null&&N.$$typeof===o}function F(N){var q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(se){return q[se]})}var Q=/\/+/g;function Y(N,q){return typeof N=="object"&&N!==null&&N.key!=null?F(""+N.key):q.toString(36)}function oe(){}function ee(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(oe,oe):(N.status="pending",N.then(function(q){N.status==="pending"&&(N.status="fulfilled",N.value=q)},function(q){N.status==="pending"&&(N.status="rejected",N.reason=q)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function K(N,q,se,le,ne){var fe=typeof N;(fe==="undefined"||fe==="boolean")&&(N=null);var ue=!1;if(N===null)ue=!0;else switch(fe){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(N.$$typeof){case o:case n:ue=!0;break;case x:return ue=N._init,K(ue(N._payload),q,se,le,ne)}}if(ue)return ne=ne(N),ue=le===""?"."+Y(N,0):le,A(ne)?(se="",ue!=null&&(se=ue.replace(Q,"$&/")+"/"),K(ne,q,se,"",function(ce){return ce})):ne!=null&&(X(ne)&&(ne=ae(ne,se+(ne.key==null||N&&N.key===ne.key?"":(""+ne.key).replace(Q,"$&/")+"/")+ue)),q.push(ne)),1;ue=0;var Ke=le===""?".":le+":";if(A(N))for(var ke=0;ke<N.length;ke++)le=N[ke],fe=Ke+Y(le,ke),ue+=K(le,q,se,fe,ne);else if(ke=y(N),typeof ke=="function")for(N=ke.call(N),ke=0;!(le=N.next()).done;)le=le.value,fe=Ke+Y(le,ke++),ue+=K(le,q,se,fe,ne);else if(fe==="object"){if(typeof N.then=="function")return K(ee(N),q,se,le,ne);throw q=String(N),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return ue}function E(N,q,se){if(N==null)return N;var le=[],ne=0;return K(N,le,"","",function(fe){return q.call(se,fe,ne++)}),le}function T(N){if(N._status===-1){var q=N._result;q=q(),q.then(function(se){(N._status===0||N._status===-1)&&(N._status=1,N._result=se)},function(se){(N._status===0||N._status===-1)&&(N._status=2,N._result=se)}),N._status===-1&&(N._status=0,N._result=q)}if(N._status===1)return N._result.default;throw N._result}var H=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function re(){}return je.Children={map:E,forEach:function(N,q,se){E(N,function(){q.apply(this,arguments)},se)},count:function(N){var q=0;return E(N,function(){q++}),q},toArray:function(N){return E(N,function(q){return q})||[]},only:function(N){if(!X(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},je.Component=$,je.Fragment=r,je.Profiler=c,je.PureComponent=D,je.StrictMode=i,je.Suspense=g,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,je.__COMPILER_RUNTIME={__proto__:null,c:function(N){return R.H.useMemoCache(N)}},je.cache=function(N){return function(){return N.apply(null,arguments)}},je.cloneElement=function(N,q,se){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var le=j({},N.props),ne=N.key,fe=void 0;if(q!=null)for(ue in q.ref!==void 0&&(fe=void 0),q.key!==void 0&&(ne=""+q.key),q)!P.call(q,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&q.ref===void 0||(le[ue]=q[ue]);var ue=arguments.length-2;if(ue===1)le.children=se;else if(1<ue){for(var Ke=Array(ue),ke=0;ke<ue;ke++)Ke[ke]=arguments[ke+2];le.children=Ke}return I(N.type,ne,void 0,void 0,fe,le)},je.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},je.createElement=function(N,q,se){var le,ne={},fe=null;if(q!=null)for(le in q.key!==void 0&&(fe=""+q.key),q)P.call(q,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ne[le]=q[le]);var ue=arguments.length-2;if(ue===1)ne.children=se;else if(1<ue){for(var Ke=Array(ue),ke=0;ke<ue;ke++)Ke[ke]=arguments[ke+2];ne.children=Ke}if(N&&N.defaultProps)for(le in ue=N.defaultProps,ue)ne[le]===void 0&&(ne[le]=ue[le]);return I(N,fe,void 0,void 0,null,ne)},je.createRef=function(){return{current:null}},je.forwardRef=function(N){return{$$typeof:p,render:N}},je.isValidElement=X,je.lazy=function(N){return{$$typeof:x,_payload:{_status:-1,_result:N},_init:T}},je.memo=function(N,q){return{$$typeof:m,type:N,compare:q===void 0?null:q}},je.startTransition=function(N){var q=R.T,se={};R.T=se;try{var le=N(),ne=R.S;ne!==null&&ne(se,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(re,H)}catch(fe){H(fe)}finally{R.T=q}},je.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},je.use=function(N){return R.H.use(N)},je.useActionState=function(N,q,se){return R.H.useActionState(N,q,se)},je.useCallback=function(N,q){return R.H.useCallback(N,q)},je.useContext=function(N){return R.H.useContext(N)},je.useDebugValue=function(){},je.useDeferredValue=function(N,q){return R.H.useDeferredValue(N,q)},je.useEffect=function(N,q,se){var le=R.H;if(typeof se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(N,q)},je.useId=function(){return R.H.useId()},je.useImperativeHandle=function(N,q,se){return R.H.useImperativeHandle(N,q,se)},je.useInsertionEffect=function(N,q){return R.H.useInsertionEffect(N,q)},je.useLayoutEffect=function(N,q){return R.H.useLayoutEffect(N,q)},je.useMemo=function(N,q){return R.H.useMemo(N,q)},je.useOptimistic=function(N,q){return R.H.useOptimistic(N,q)},je.useReducer=function(N,q,se){return R.H.useReducer(N,q,se)},je.useRef=function(N){return R.H.useRef(N)},je.useState=function(N){return R.H.useState(N)},je.useSyncExternalStore=function(N,q,se){return R.H.useSyncExternalStore(N,q,se)},je.useTransition=function(){return R.H.useTransition()},je.version="19.1.1",je}var Qm;function Bu(){return Qm||(Qm=1,ou.exports=kv()),ou.exports}var _=Bu();const Hr=Fp(_);var cu={exports:{}},Qn={},uu={exports:{}},du={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function Av(){return Zm||(Zm=1,function(o){function n(E,T){var H=E.length;E.push(T);e:for(;0<H;){var re=H-1>>>1,N=E[re];if(0<c(N,T))E[re]=T,E[H]=N,H=re;else break e}}function r(E){return E.length===0?null:E[0]}function i(E){if(E.length===0)return null;var T=E[0],H=E.pop();if(H!==T){E[0]=H;e:for(var re=0,N=E.length,q=N>>>1;re<q;){var se=2*(re+1)-1,le=E[se],ne=se+1,fe=E[ne];if(0>c(le,H))ne<N&&0>c(fe,le)?(E[re]=fe,E[ne]=H,re=ne):(E[re]=le,E[se]=H,re=se);else if(ne<N&&0>c(fe,H))E[re]=fe,E[ne]=H,re=ne;else break e}}return T}function c(E,T){var H=E.sortIndex-T.sortIndex;return H!==0?H:E.id-T.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();o.unstable_now=function(){return f.now()-p}}var g=[],m=[],x=1,v=null,y=3,S=!1,j=!1,C=!1,$=!1,O=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function A(E){for(var T=r(m);T!==null;){if(T.callback===null)i(m);else if(T.startTime<=E)i(m),T.sortIndex=T.expirationTime,n(g,T);else break;T=r(m)}}function R(E){if(C=!1,A(E),!j)if(r(g)!==null)j=!0,P||(P=!0,Y());else{var T=r(m);T!==null&&K(R,T.startTime-E)}}var P=!1,I=-1,ae=5,X=-1;function F(){return $?!0:!(o.unstable_now()-X<ae)}function Q(){if($=!1,P){var E=o.unstable_now();X=E;var T=!0;try{e:{j=!1,C&&(C=!1,D(I),I=-1),S=!0;var H=y;try{t:{for(A(E),v=r(g);v!==null&&!(v.expirationTime>E&&F());){var re=v.callback;if(typeof re=="function"){v.callback=null,y=v.priorityLevel;var N=re(v.expirationTime<=E);if(E=o.unstable_now(),typeof N=="function"){v.callback=N,A(E),T=!0;break t}v===r(g)&&i(g),A(E)}else i(g);v=r(g)}if(v!==null)T=!0;else{var q=r(m);q!==null&&K(R,q.startTime-E),T=!1}}break e}finally{v=null,y=H,S=!1}T=void 0}}finally{T?Y():P=!1}}}var Y;if(typeof U=="function")Y=function(){U(Q)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ee=oe.port2;oe.port1.onmessage=Q,Y=function(){ee.postMessage(null)}}else Y=function(){O(Q,0)};function K(E,T){I=O(function(){E(o.unstable_now())},T)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(E){E.callback=null},o.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<E?Math.floor(1e3/E):5},o.unstable_getCurrentPriorityLevel=function(){return y},o.unstable_next=function(E){switch(y){case 1:case 2:case 3:var T=3;break;default:T=y}var H=y;y=T;try{return E()}finally{y=H}},o.unstable_requestPaint=function(){$=!0},o.unstable_runWithPriority=function(E,T){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var H=y;y=E;try{return T()}finally{y=H}},o.unstable_scheduleCallback=function(E,T,H){var re=o.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?re+H:re):H=re,E){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=H+N,E={id:x++,callback:T,priorityLevel:E,startTime:H,expirationTime:N,sortIndex:-1},H>re?(E.sortIndex=H,n(m,E),r(g)===null&&E===r(m)&&(C?(D(I),I=-1):C=!0,K(R,H-re))):(E.sortIndex=N,n(g,E),j||S||(j=!0,P||(P=!0,Y()))),E},o.unstable_shouldYield=F,o.unstable_wrapCallback=function(E){var T=y;return function(){var H=y;y=T;try{return E.apply(this,arguments)}finally{y=H}}}}(du)),du}var Jm;function Tv(){return Jm||(Jm=1,uu.exports=Av()),uu.exports}var fu={exports:{}},xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function Ov(){if(Wm)return xt;Wm=1;var o=Bu();function n(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(g,m,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:v==null?null:""+v,children:g,containerInfo:m,implementation:x}}var f=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,xt.createPortal=function(g,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return u(g,m,null,x)},xt.flushSync=function(g){var m=f.T,x=i.p;try{if(f.T=null,i.p=2,g)return g()}finally{f.T=m,i.p=x,i.d.f()}},xt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(g,m))},xt.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},xt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var x=m.as,v=p(x,m.crossOrigin),y=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?i.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:S}):x==="script"&&i.d.X(g,{crossOrigin:v,integrity:y,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},xt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=p(m.as,m.crossOrigin);i.d.M(g,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(g)},xt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,v=p(x,m.crossOrigin);i.d.L(g,x,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},xt.preloadModule=function(g,m){if(typeof g=="string")if(m){var x=p(m.as,m.crossOrigin);i.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(g)},xt.requestFormReset=function(g){i.d.r(g)},xt.unstable_batchedUpdates=function(g,m){return g(m)},xt.useFormState=function(g,m,x){return f.H.useFormState(g,m,x)},xt.useFormStatus=function(){return f.H.useHostTransitionStatus()},xt.version="19.1.1",xt}var ep;function Rv(){if(ep)return fu.exports;ep=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),fu.exports=Ov(),fu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function Mv(){if(tp)return Qn;tp=1;var o=Tv(),n=Bu(),r=Rv();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(i(188))}function g(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,l=t;;){var d=a.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===a)return p(d),e;if(h===l)return p(d),t;h=h.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=h;else{for(var b=!1,w=d.child;w;){if(w===a){b=!0,a=d,l=h;break}if(w===l){b=!0,l=d,a=h;break}w=w.sibling}if(!b){for(w=h.child;w;){if(w===a){b=!0,a=h,l=d;break}if(w===l){b=!0,l=h,a=d;break}w=w.sibling}if(!b)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function m(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=m(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),U=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var oe=Symbol.for("react.client.reference");function ee(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===oe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j:return"Fragment";case $:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList";case X:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case U:return(e.displayName||"Context")+".Provider";case D:return(e._context.displayName||"Context")+".Consumer";case A:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return t=e.displayName||null,t!==null?t:ee(e.type)||"Memo";case ae:t=e._payload,e=e._init;try{return ee(e(t))}catch{}}return null}var K=Array.isArray,E=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},re=[],N=-1;function q(e){return{current:e}}function se(e){0>N||(e.current=re[N],re[N]=null,N--)}function le(e,t){N++,re[N]=e.current,e.current=t}var ne=q(null),fe=q(null),ue=q(null),Ke=q(null);function ke(e,t){switch(le(ue,t),le(fe,e),le(ne,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?jm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=jm(t),e=wm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}se(ne),le(ne,e)}function ce(){se(ne),se(fe),se(ue)}function Ye(e){e.memoizedState!==null&&le(Ke,e);var t=ne.current,a=wm(t,e.type);t!==a&&(le(fe,e),le(ne,a))}function at(e){fe.current===e&&(se(ne),se(fe)),Ke.current===e&&(se(Ke),Vn._currentValue=H)}var fa=Object.prototype.hasOwnProperty,za=o.unstable_scheduleCallback,ms=o.unstable_cancelCallback,Le=o.unstable_shouldYield,ve=o.unstable_requestPaint,xe=o.unstable_now,Be=o.unstable_getCurrentPriorityLevel,Pe=o.unstable_ImmediatePriority,td=o.unstable_UserBlockingPriority,pl=o.unstable_NormalPriority,ix=o.unstable_LowPriority,ad=o.unstable_IdlePriority,ox=o.log,cx=o.unstable_setDisableYieldValue,Zr=null,kt=null;function La(e){if(typeof ox=="function"&&cx(e),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(Zr,e)}catch{}}var At=Math.clz32?Math.clz32:fx,ux=Math.log,dx=Math.LN2;function fx(e){return e>>>=0,e===0?32:31-(ux(e)/dx|0)|0}var gl=256,xl=4194304;function ps(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function vl(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var d=0,h=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var w=l&134217727;return w!==0?(l=w&~h,l!==0?d=ps(l):(b&=w,b!==0?d=ps(b):a||(a=w&~e,a!==0&&(d=ps(a))))):(w=l&~h,w!==0?d=ps(w):b!==0?d=ps(b):a||(a=l&~e,a!==0&&(d=ps(a)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,a=t&-t,h>=a||h===32&&(a&4194048)!==0)?t:d}function Jr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function hx(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sd(){var e=gl;return gl<<=1,(gl&4194048)===0&&(gl=256),e}function rd(){var e=xl;return xl<<=1,(xl&62914560)===0&&(xl=4194304),e}function Xi(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Wr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function mx(e,t,a,l,d,h){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var w=e.entanglements,k=e.expirationTimes,B=e.hiddenUpdates;for(a=b&~a;0<a;){var Z=31-At(a),te=1<<Z;w[Z]=0,k[Z]=-1;var G=B[Z];if(G!==null)for(B[Z]=null,Z=0;Z<G.length;Z++){var V=G[Z];V!==null&&(V.lane&=-536870913)}a&=~te}l!==0&&nd(e,l,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(b&~t))}function nd(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-At(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function ld(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-At(a),d=1<<l;d&t|e[l]&t&&(e[l]|=t),a&=~d}}function Qi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Zi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function id(){var e=T.p;return e!==0?e:(e=window.event,e===void 0?32:Hm(e.type))}function px(e,t){var a=T.p;try{return T.p=e,t()}finally{T.p=a}}var Ba=Math.random().toString(36).slice(2),pt="__reactFiber$"+Ba,jt="__reactProps$"+Ba,Gs="__reactContainer$"+Ba,Ji="__reactEvents$"+Ba,gx="__reactListeners$"+Ba,xx="__reactHandles$"+Ba,od="__reactResources$"+Ba,en="__reactMarker$"+Ba;function Wi(e){delete e[pt],delete e[jt],delete e[Ji],delete e[gx],delete e[xx]}function Vs(e){var t=e[pt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Gs]||a[pt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Em(e);e!==null;){if(a=e[pt])return a;e=Em(e)}return t}e=a,a=e.parentNode}return null}function Ys(e){if(e=e[pt]||e[Gs]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function tn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Fs(e){var t=e[od];return t||(t=e[od]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function nt(e){e[en]=!0}var cd=new Set,ud={};function gs(e,t){Ks(e,t),Ks(e+"Capture",t)}function Ks(e,t){for(ud[e]=t,e=0;e<t.length;e++)cd.add(t[e])}var vx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dd={},fd={};function bx(e){return fa.call(fd,e)?!0:fa.call(dd,e)?!1:vx.test(e)?fd[e]=!0:(dd[e]=!0,!1)}function bl(e,t,a){if(bx(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function yl(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ha(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}var eo,hd;function Is(e){if(eo===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);eo=t&&t[1]||"",hd=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+eo+e+hd}var to=!1;function ao(e,t){if(!e||to)return"";to=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(V){var G=V}Reflect.construct(e,[],te)}else{try{te.call()}catch(V){G=V}e.call(te.prototype)}}else{try{throw Error()}catch(V){G=V}(te=e())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(V){if(V&&G&&typeof V.stack=="string")return[V.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),b=h[0],w=h[1];if(b&&w){var k=b.split(`
`),B=w.split(`
`);for(d=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;d<B.length&&!B[d].includes("DetermineComponentFrameRoot");)d++;if(l===k.length||d===B.length)for(l=k.length-1,d=B.length-1;1<=l&&0<=d&&k[l]!==B[d];)d--;for(;1<=l&&0<=d;l--,d--)if(k[l]!==B[d]){if(l!==1||d!==1)do if(l--,d--,0>d||k[l]!==B[d]){var Z=`
`+k[l].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=l&&0<=d);break}}}finally{to=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Is(a):""}function yx(e){switch(e.tag){case 26:case 27:case 5:return Is(e.type);case 16:return Is("Lazy");case 13:return Is("Suspense");case 19:return Is("SuspenseList");case 0:case 15:return ao(e.type,!1);case 11:return ao(e.type.render,!1);case 1:return ao(e.type,!0);case 31:return Is("Activity");default:return""}}function md(e){try{var t="";do t+=yx(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jx(e){var t=pd(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,h=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(b){l=""+b,h.call(this,b)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jl(e){e._valueTracker||(e._valueTracker=jx(e))}function gd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=pd(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function wl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var wx=/[\n"\\]/g;function Ht(e){return e.replace(wx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function so(e,t,a,l,d,h,b,w){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+qt(t)):e.value!==""+qt(t)&&(e.value=""+qt(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?ro(e,b,qt(t)):a!=null?ro(e,b,qt(a)):l!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+qt(w):e.removeAttribute("name")}function xd(e,t,a,l,d,h,b,w){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||t!=null))return;a=a!=null?""+qt(a):"",t=t!=null?""+qt(t):a,w||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=w?e.checked:!!l,e.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b)}function ro(e,t,a){t==="number"&&wl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Xs(e,t,a,l){if(e=e.options,t){t={};for(var d=0;d<a.length;d++)t["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=t.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&l&&(e[a].defaultSelected=!0)}else{for(a=""+qt(a),t=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function vd(e,t,a){if(t!=null&&(t=""+qt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+qt(a):""}function bd(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(i(92));if(K(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=qt(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Qs(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var _x=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yd(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||_x.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function jd(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&a[d]!==l&&yd(e,d,l)}else for(var h in t)t.hasOwnProperty(h)&&yd(e,h,t[h])}function no(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(e){return Sx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var lo=null;function io(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zs=null,Js=null;function wd(e){var t=Ys(e);if(t&&(e=t.stateNode)){var a=e[jt]||null;e:switch(e=t.stateNode,t.type){case"input":if(so(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ht(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var d=l[jt]||null;if(!d)throw Error(i(90));so(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&gd(l)}break e;case"textarea":vd(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Xs(e,!!a.multiple,t,!1)}}}var oo=!1;function _d(e,t,a){if(oo)return e(t,a);oo=!0;try{var l=e(t);return l}finally{if(oo=!1,(Zs!==null||Js!==null)&&(oi(),Zs&&(t=Zs,e=Js,Js=Zs=null,wd(t),e)))for(t=0;t<e.length;t++)wd(e[t])}}function an(e,t){var a=e.stateNode;if(a===null)return null;var l=a[jt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),co=!1;if(ma)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){co=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{co=!1}var qa=null,uo=null,Nl=null;function Nd(){if(Nl)return Nl;var e,t=uo,a=t.length,l,d="value"in qa?qa.value:qa.textContent,h=d.length;for(e=0;e<a&&t[e]===d[e];e++);var b=a-e;for(l=1;l<=b&&t[a-l]===d[h-l];l++);return Nl=d.slice(e,1<l?1-l:void 0)}function Sl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function El(){return!0}function Sd(){return!1}function wt(e){function t(a,l,d,h,b){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=b,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(a=e[w],this[w]=a?a(h):h[w]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?El:Sd,this.isPropagationStopped=Sd,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),t}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cl=wt(xs),rn=x({},xs,{view:0,detail:0}),Ex=wt(rn),fo,ho,nn,$l=x({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:po,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nn&&(nn&&e.type==="mousemove"?(fo=e.screenX-nn.screenX,ho=e.screenY-nn.screenY):ho=fo=0,nn=e),fo)},movementY:function(e){return"movementY"in e?e.movementY:ho}}),Ed=wt($l),Cx=x({},$l,{dataTransfer:0}),$x=wt(Cx),kx=x({},rn,{relatedTarget:0}),mo=wt(kx),Ax=x({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),Tx=wt(Ax),Ox=x({},xs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rx=wt(Ox),Mx=x({},xs,{data:0}),Cd=wt(Mx),Ux={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zx[e])?!!t[e]:!1}function po(){return Lx}var Bx=x({},rn,{key:function(e){if(e.key){var t=Ux[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Sl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Dx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:po,charCode:function(e){return e.type==="keypress"?Sl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qx=wt(Bx),Hx=x({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$d=wt(Hx),Px=x({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:po}),Gx=wt(Px),Vx=x({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yx=wt(Vx),Fx=x({},$l,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kx=wt(Fx),Ix=x({},xs,{newState:0,oldState:0}),Xx=wt(Ix),Qx=[9,13,27,32],go=ma&&"CompositionEvent"in window,ln=null;ma&&"documentMode"in document&&(ln=document.documentMode);var Zx=ma&&"TextEvent"in window&&!ln,kd=ma&&(!go||ln&&8<ln&&11>=ln),Ad=" ",Td=!1;function Od(e,t){switch(e){case"keyup":return Qx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ws=!1;function Jx(e,t){switch(e){case"compositionend":return Rd(t);case"keypress":return t.which!==32?null:(Td=!0,Ad);case"textInput":return e=t.data,e===Ad&&Td?null:e;default:return null}}function Wx(e,t){if(Ws)return e==="compositionend"||!go&&Od(e,t)?(e=Nd(),Nl=uo=qa=null,Ws=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kd&&t.locale!=="ko"?null:t.data;default:return null}}var e0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Md(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!e0[e.type]:t==="textarea"}function Ud(e,t,a,l){Zs?Js?Js.push(l):Js=[l]:Zs=l,t=mi(t,"onChange"),0<t.length&&(a=new Cl("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var on=null,cn=null;function t0(e){gm(e,0)}function kl(e){var t=tn(e);if(gd(t))return e}function Dd(e,t){if(e==="change")return t}var zd=!1;if(ma){var xo;if(ma){var vo="oninput"in document;if(!vo){var Ld=document.createElement("div");Ld.setAttribute("oninput","return;"),vo=typeof Ld.oninput=="function"}xo=vo}else xo=!1;zd=xo&&(!document.documentMode||9<document.documentMode)}function Bd(){on&&(on.detachEvent("onpropertychange",qd),cn=on=null)}function qd(e){if(e.propertyName==="value"&&kl(cn)){var t=[];Ud(t,cn,e,io(e)),_d(t0,t)}}function a0(e,t,a){e==="focusin"?(Bd(),on=t,cn=a,on.attachEvent("onpropertychange",qd)):e==="focusout"&&Bd()}function s0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kl(cn)}function r0(e,t){if(e==="click")return kl(t)}function n0(e,t){if(e==="input"||e==="change")return kl(t)}function l0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:l0;function un(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!fa.call(t,d)||!Tt(e[d],t[d]))return!1}return!0}function Hd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pd(e,t){var a=Hd(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Hd(a)}}function Gd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=wl(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=wl(e.document)}return t}function bo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var i0=ma&&"documentMode"in document&&11>=document.documentMode,er=null,yo=null,dn=null,jo=!1;function Yd(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;jo||er==null||er!==wl(l)||(l=er,"selectionStart"in l&&bo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),dn&&un(dn,l)||(dn=l,l=mi(yo,"onSelect"),0<l.length&&(t=new Cl("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=er)))}function vs(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var tr={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},wo={},Fd={};ma&&(Fd=document.createElement("div").style,"AnimationEvent"in window||(delete tr.animationend.animation,delete tr.animationiteration.animation,delete tr.animationstart.animation),"TransitionEvent"in window||delete tr.transitionend.transition);function bs(e){if(wo[e])return wo[e];if(!tr[e])return e;var t=tr[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Fd)return wo[e]=t[a];return e}var Kd=bs("animationend"),Id=bs("animationiteration"),Xd=bs("animationstart"),o0=bs("transitionrun"),c0=bs("transitionstart"),u0=bs("transitioncancel"),Qd=bs("transitionend"),Zd=new Map,_o="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_o.push("scrollEnd");function Zt(e,t){Zd.set(e,t),gs(t,[e])}var Jd=new WeakMap;function Pt(e,t){if(typeof e=="object"&&e!==null){var a=Jd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:md(t)},Jd.set(e,t),t)}return{value:e,source:t,stack:md(t)}}var Gt=[],ar=0,No=0;function Al(){for(var e=ar,t=No=ar=0;t<e;){var a=Gt[t];Gt[t++]=null;var l=Gt[t];Gt[t++]=null;var d=Gt[t];Gt[t++]=null;var h=Gt[t];if(Gt[t++]=null,l!==null&&d!==null){var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}h!==0&&Wd(a,d,h)}}function Tl(e,t,a,l){Gt[ar++]=e,Gt[ar++]=t,Gt[ar++]=a,Gt[ar++]=l,No|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function So(e,t,a,l){return Tl(e,t,a,l),Ol(e)}function sr(e,t){return Tl(e,null,null,t),Ol(e)}function Wd(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var d=!1,h=e.return;h!==null;)h.childLanes|=a,l=h.alternate,l!==null&&(l.childLanes|=a),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-At(a),e=h.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=a|536870912),h):null}function Ol(e){if(50<Dn)throw Dn=0,Tc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var rr={};function d0(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,a,l){return new d0(e,t,a,l)}function Eo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pa(e,t){var a=e.alternate;return a===null?(a=Ot(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ef(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Rl(e,t,a,l,d,h){var b=0;if(l=e,typeof e=="function")Eo(e)&&(b=1);else if(typeof e=="string")b=hv(e,a,ne.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case X:return e=Ot(31,a,t,d),e.elementType=X,e.lanes=h,e;case j:return ys(a.children,d,h,t);case C:b=8,d|=24;break;case $:return e=Ot(12,a,t,d|2),e.elementType=$,e.lanes=h,e;case R:return e=Ot(13,a,t,d),e.elementType=R,e.lanes=h,e;case P:return e=Ot(19,a,t,d),e.elementType=P,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:case U:b=10;break e;case D:b=9;break e;case A:b=11;break e;case I:b=14;break e;case ae:b=16,l=null;break e}b=29,a=Error(i(130,e===null?"null":typeof e,"")),l=null}return t=Ot(b,a,t,d),t.elementType=e,t.type=l,t.lanes=h,t}function ys(e,t,a,l){return e=Ot(7,e,l,t),e.lanes=a,e}function Co(e,t,a){return e=Ot(6,e,null,t),e.lanes=a,e}function $o(e,t,a){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var nr=[],lr=0,Ml=null,Ul=0,Vt=[],Yt=0,js=null,ga=1,xa="";function ws(e,t){nr[lr++]=Ul,nr[lr++]=Ml,Ml=e,Ul=t}function tf(e,t,a){Vt[Yt++]=ga,Vt[Yt++]=xa,Vt[Yt++]=js,js=e;var l=ga;e=xa;var d=32-At(l)-1;l&=~(1<<d),a+=1;var h=32-At(t)+d;if(30<h){var b=d-d%5;h=(l&(1<<b)-1).toString(32),l>>=b,d-=b,ga=1<<32-At(t)+d|a<<d|l,xa=h+e}else ga=1<<h|a<<d|l,xa=e}function ko(e){e.return!==null&&(ws(e,1),tf(e,1,0))}function Ao(e){for(;e===Ml;)Ml=nr[--lr],nr[lr]=null,Ul=nr[--lr],nr[lr]=null;for(;e===js;)js=Vt[--Yt],Vt[Yt]=null,xa=Vt[--Yt],Vt[Yt]=null,ga=Vt[--Yt],Vt[Yt]=null}var yt=null,Ie=null,Te=!1,_s=null,ra=!1,To=Error(i(519));function Ns(e){var t=Error(i(418,""));throw mn(Pt(t,e)),To}function af(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[pt]=e,t[jt]=l,a){case"dialog":Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":case"embed":Ee("load",t);break;case"video":case"audio":for(a=0;a<Ln.length;a++)Ee(Ln[a],t);break;case"source":Ee("error",t);break;case"img":case"image":case"link":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"input":Ee("invalid",t),xd(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),jl(t);break;case"select":Ee("invalid",t);break;case"textarea":Ee("invalid",t),bd(t,l.value,l.defaultValue,l.children),jl(t)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||ym(t.textContent,a)?(l.popover!=null&&(Ee("beforetoggle",t),Ee("toggle",t)),l.onScroll!=null&&Ee("scroll",t),l.onScrollEnd!=null&&Ee("scrollend",t),l.onClick!=null&&(t.onclick=pi),t=!0):t=!1,t||Ns(e)}function sf(e){for(yt=e.return;yt;)switch(yt.tag){case 5:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:yt=yt.return}}function fn(e){if(e!==yt)return!1;if(!Te)return sf(e),Te=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Kc(e.type,e.memoizedProps)),a=!a),a&&Ie&&Ns(e),sf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Ie=Wt(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Ie=null}}else t===27?(t=Ie,as(e.type)?(e=Zc,Zc=null,Ie=e):Ie=t):Ie=yt?Wt(e.stateNode.nextSibling):null;return!0}function hn(){Ie=yt=null,Te=!1}function rf(){var e=_s;return e!==null&&(St===null?St=e:St.push.apply(St,e),_s=null),e}function mn(e){_s===null?_s=[e]:_s.push(e)}var Oo=q(null),Ss=null,va=null;function Ha(e,t,a){le(Oo,t._currentValue),t._currentValue=a}function ba(e){e._currentValue=Oo.current,se(Oo)}function Ro(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function Mo(e,t,a,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var b=d.child;h=h.firstContext;e:for(;h!==null;){var w=h;h=d;for(var k=0;k<t.length;k++)if(w.context===t[k]){h.lanes|=a,w=h.alternate,w!==null&&(w.lanes|=a),Ro(h.return,a,e),l||(b=null);break e}h=w.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(i(341));b.lanes|=a,h=b.alternate,h!==null&&(h.lanes|=a),Ro(b,a,e),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===e){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function pn(e,t,a,l){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var w=d.type;Tt(d.pendingProps.value,b.value)||(e!==null?e.push(w):e=[w])}}else if(d===Ke.current){if(b=d.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Vn):e=[Vn])}d=d.return}e!==null&&Mo(t,e,a,l),t.flags|=262144}function Dl(e){for(e=e.firstContext;e!==null;){if(!Tt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Es(e){Ss=e,va=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function gt(e){return nf(Ss,e)}function zl(e,t){return Ss===null&&Es(e),nf(e,t)}function nf(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},va===null){if(e===null)throw Error(i(308));va=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else va=va.next=t;return a}var f0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},h0=o.unstable_scheduleCallback,m0=o.unstable_NormalPriority,st={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uo(){return{controller:new f0,data:new Map,refCount:0}}function gn(e){e.refCount--,e.refCount===0&&h0(m0,function(){e.controller.abort()})}var xn=null,Do=0,ir=0,or=null;function p0(e,t){if(xn===null){var a=xn=[];Do=0,ir=Lc(),or={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Do++,t.then(lf,lf),t}function lf(){if(--Do===0&&xn!==null){or!==null&&(or.status="fulfilled");var e=xn;xn=null,ir=0,or=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function g0(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<a.length;d++)(0,a[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var of=E.S;E.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&p0(e,t),of!==null&&of(e,t)};var Cs=q(null);function zo(){var e=Cs.current;return e!==null?e:qe.pooledCache}function Ll(e,t){t===null?le(Cs,Cs.current):le(Cs,t.pool)}function cf(){var e=zo();return e===null?null:{parent:st._currentValue,pool:e}}var vn=Error(i(460)),uf=Error(i(474)),Bl=Error(i(542)),Lo={then:function(){}};function df(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ql(){}function ff(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ql,ql),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mf(e),e;default:if(typeof t.status=="string")t.then(ql,ql);else{if(e=qe,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mf(e),e}throw bn=t,vn}}var bn=null;function hf(){if(bn===null)throw Error(i(459));var e=bn;return bn=null,e}function mf(e){if(e===vn||e===Bl)throw Error(i(483))}var Pa=!1;function Bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ga(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Va(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Oe&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=Ol(e),Wd(e,null,a),t}return Tl(e,l,t,a),Ol(e)}function yn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,ld(e,a)}}function Ho(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?d=h=b:h=h.next=b,a=a.next}while(a!==null);h===null?d=h=t:h=h.next=t}else d=h=t;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Po=!1;function jn(){if(Po){var e=or;if(e!==null)throw e}}function wn(e,t,a,l){Po=!1;var d=e.updateQueue;Pa=!1;var h=d.firstBaseUpdate,b=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var k=w,B=k.next;k.next=null,b===null?h=B:b.next=B,b=k;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==b&&(w===null?Z.firstBaseUpdate=B:w.next=B,Z.lastBaseUpdate=k))}if(h!==null){var te=d.baseState;b=0,Z=B=k=null,w=h;do{var G=w.lane&-536870913,V=G!==w.lane;if(V?($e&G)===G:(l&G)===G){G!==0&&G===ir&&(Po=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ge=e,me=w;G=t;var De=a;switch(me.tag){case 1:if(ge=me.payload,typeof ge=="function"){te=ge.call(De,te,G);break e}te=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=me.payload,G=typeof ge=="function"?ge.call(De,te,G):ge,G==null)break e;te=x({},te,G);break e;case 2:Pa=!0}}G=w.callback,G!==null&&(e.flags|=64,V&&(e.flags|=8192),V=d.callbacks,V===null?d.callbacks=[G]:V.push(G))}else V={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(B=Z=V,k=te):Z=Z.next=V,b|=G;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;V=w,w=V.next,V.next=null,d.lastBaseUpdate=V,d.shared.pending=null}}while(!0);Z===null&&(k=te),d.baseState=k,d.firstBaseUpdate=B,d.lastBaseUpdate=Z,h===null&&(d.shared.lanes=0),Ja|=b,e.lanes=b,e.memoizedState=te}}function pf(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function gf(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)pf(a[e],t)}var cr=q(null),Hl=q(0);function xf(e,t){e=Ea,le(Hl,e),le(cr,t),Ea=e|t.baseLanes}function Go(){le(Hl,Ea),le(cr,cr.current)}function Vo(){Ea=Hl.current,se(cr),se(Hl)}var Ya=0,_e=null,Me=null,We=null,Pl=!1,ur=!1,$s=!1,Gl=0,_n=0,dr=null,x0=0;function Qe(){throw Error(i(321))}function Yo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Tt(e[a],t[a]))return!1;return!0}function Fo(e,t,a,l,d,h){return Ya=h,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?eh:th,$s=!1,h=a(l,d),$s=!1,ur&&(h=bf(t,a,l,d)),vf(e),h}function vf(e){E.H=Xl;var t=Me!==null&&Me.next!==null;if(Ya=0,We=Me=_e=null,Pl=!1,_n=0,dr=null,t)throw Error(i(300));e===null||lt||(e=e.dependencies,e!==null&&Dl(e)&&(lt=!0))}function bf(e,t,a,l){_e=e;var d=0;do{if(ur&&(dr=null),_n=0,ur=!1,25<=d)throw Error(i(301));if(d+=1,We=Me=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}E.H=N0,h=t(a,l)}while(ur);return h}function v0(){var e=E.H,t=e.useState()[0];return t=typeof t.then=="function"?Nn(t):t,e=e.useState()[0],(Me!==null?Me.memoizedState:null)!==e&&(_e.flags|=1024),t}function Ko(){var e=Gl!==0;return Gl=0,e}function Io(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Xo(e){if(Pl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Pl=!1}Ya=0,We=Me=_e=null,ur=!1,_n=Gl=0,dr=null}function _t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?_e.memoizedState=We=e:We=We.next=e,We}function et(){if(Me===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=We===null?_e.memoizedState:We.next;if(t!==null)We=t,Me=e;else{if(e===null)throw _e.alternate===null?Error(i(467)):Error(i(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},We===null?_e.memoizedState=We=e:We=We.next=e}return We}function Qo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nn(e){var t=_n;return _n+=1,dr===null&&(dr=[]),e=ff(dr,e,t),t=_e,(We===null?t.memoizedState:We.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?eh:th),e}function Vl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Nn(e);if(e.$$typeof===U)return gt(e)}throw Error(i(438,String(e)))}function Zo(e){var t=null,a=_e.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=_e.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Qo(),_e.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=F;return t.index++,a}function ya(e,t){return typeof t=="function"?t(e):t}function Yl(e){var t=et();return Jo(t,Me,e)}function Jo(e,t,a){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=e.baseQueue,h=l.pending;if(h!==null){if(d!==null){var b=d.next;d.next=h.next,h.next=b}t.baseQueue=d=h,l.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var w=b=null,k=null,B=t,Z=!1;do{var te=B.lane&-536870913;if(te!==B.lane?($e&te)===te:(Ya&te)===te){var G=B.revertLane;if(G===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),te===ir&&(Z=!0);else if((Ya&G)===G){B=B.next,G===ir&&(Z=!0);continue}else te={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},k===null?(w=k=te,b=h):k=k.next=te,_e.lanes|=G,Ja|=G;te=B.action,$s&&a(h,te),h=B.hasEagerState?B.eagerState:a(h,te)}else G={lane:te,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},k===null?(w=k=G,b=h):k=k.next=G,_e.lanes|=te,Ja|=te;B=B.next}while(B!==null&&B!==t);if(k===null?b=h:k.next=w,!Tt(h,e.memoizedState)&&(lt=!0,Z&&(a=or,a!==null)))throw a;e.memoizedState=h,e.baseState=b,e.baseQueue=k,l.lastRenderedState=h}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Wo(e){var t=et(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var l=a.dispatch,d=a.pending,h=t.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do h=e(h,b.action),b=b.next;while(b!==d);Tt(h,t.memoizedState)||(lt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),a.lastRenderedState=h}return[h,l]}function yf(e,t,a){var l=_e,d=et(),h=Te;if(h){if(a===void 0)throw Error(i(407));a=a()}else a=t();var b=!Tt((Me||d).memoizedState,a);b&&(d.memoizedState=a,lt=!0),d=d.queue;var w=_f.bind(null,l,d,e);if(Sn(2048,8,w,[e]),d.getSnapshot!==t||b||We!==null&&We.memoizedState.tag&1){if(l.flags|=2048,fr(9,Fl(),wf.bind(null,l,d,a,t),null),qe===null)throw Error(i(349));h||(Ya&124)!==0||jf(l,t,a)}return a}function jf(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=_e.updateQueue,t===null?(t=Qo(),_e.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function wf(e,t,a,l){t.value=a,t.getSnapshot=l,Nf(t)&&Sf(e)}function _f(e,t,a){return a(function(){Nf(t)&&Sf(e)})}function Nf(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Tt(e,a)}catch{return!0}}function Sf(e){var t=sr(e,2);t!==null&&zt(t,e,2)}function ec(e){var t=_t();if(typeof e=="function"){var a=e;if(e=a(),$s){La(!0);try{a()}finally{La(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e},t}function Ef(e,t,a,l){return e.baseState=a,Jo(e,Me,typeof l=="function"?l:ya)}function b0(e,t,a,l,d){if(Il(e))throw Error(i(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){h.listeners.push(b)}};E.T!==null?a(!0):h.isTransition=!1,l(h),a=t.pending,a===null?(h.next=t.pending=h,Cf(t,h)):(h.next=a.next,t.pending=a.next=h)}}function Cf(e,t){var a=t.action,l=t.payload,d=e.state;if(t.isTransition){var h=E.T,b={};E.T=b;try{var w=a(d,l),k=E.S;k!==null&&k(b,w),$f(e,t,w)}catch(B){tc(e,t,B)}finally{E.T=h}}else try{h=a(d,l),$f(e,t,h)}catch(B){tc(e,t,B)}}function $f(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){kf(e,t,l)},function(l){return tc(e,t,l)}):kf(e,t,a)}function kf(e,t,a){t.status="fulfilled",t.value=a,Af(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Cf(e,a)))}function tc(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,Af(t),t=t.next;while(t!==l)}e.action=null}function Af(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Tf(e,t){return t}function Of(e,t){if(Te){var a=qe.formState;if(a!==null){e:{var l=_e;if(Te){if(Ie){t:{for(var d=Ie,h=ra;d.nodeType!==8;){if(!h){d=null;break t}if(d=Wt(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){Ie=Wt(d.nextSibling),l=d.data==="F!";break e}}Ns(l)}l=!1}l&&(t=a[0])}}return a=_t(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tf,lastRenderedState:t},a.queue=l,a=Zf.bind(null,_e,l),l.dispatch=a,l=ec(!1),h=lc.bind(null,_e,!1,l.queue),l=_t(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,a=b0.bind(null,_e,d,h,a),d.dispatch=a,l.memoizedState=e,[t,a,!1]}function Rf(e){var t=et();return Mf(t,Me,e)}function Mf(e,t,a){if(t=Jo(e,t,Tf)[0],e=Yl(ya)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Nn(t)}catch(b){throw b===vn?Bl:b}else l=t;t=et();var d=t.queue,h=d.dispatch;return a!==t.memoizedState&&(_e.flags|=2048,fr(9,Fl(),y0.bind(null,d,a),null)),[l,h,e]}function y0(e,t){e.action=t}function Uf(e){var t=et(),a=Me;if(a!==null)return Mf(t,a,e);et(),t=t.memoizedState,a=et();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function fr(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=_e.updateQueue,t===null&&(t=Qo(),_e.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function Fl(){return{destroy:void 0,resource:void 0}}function Df(){return et().memoizedState}function Kl(e,t,a,l){var d=_t();l=l===void 0?null:l,_e.flags|=e,d.memoizedState=fr(1|t,Fl(),a,l)}function Sn(e,t,a,l){var d=et();l=l===void 0?null:l;var h=d.memoizedState.inst;Me!==null&&l!==null&&Yo(l,Me.memoizedState.deps)?d.memoizedState=fr(t,h,a,l):(_e.flags|=e,d.memoizedState=fr(1|t,h,a,l))}function zf(e,t){Kl(8390656,8,e,t)}function Lf(e,t){Sn(2048,8,e,t)}function Bf(e,t){return Sn(4,2,e,t)}function qf(e,t){return Sn(4,4,e,t)}function Hf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pf(e,t,a){a=a!=null?a.concat([e]):null,Sn(4,4,Hf.bind(null,t,e),a)}function ac(){}function Gf(e,t){var a=et();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&Yo(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function Vf(e,t){var a=et();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&Yo(t,l[1]))return l[0];if(l=e(),$s){La(!0);try{e()}finally{La(!1)}}return a.memoizedState=[l,t],l}function sc(e,t,a){return a===void 0||(Ya&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=Kh(),_e.lanes|=e,Ja|=e,a)}function Yf(e,t,a,l){return Tt(a,t)?a:cr.current!==null?(e=sc(e,a,l),Tt(e,t)||(lt=!0),e):(Ya&42)===0?(lt=!0,e.memoizedState=a):(e=Kh(),_e.lanes|=e,Ja|=e,t)}function Ff(e,t,a,l,d){var h=T.p;T.p=h!==0&&8>h?h:8;var b=E.T,w={};E.T=w,lc(e,!1,t,a);try{var k=d(),B=E.S;if(B!==null&&B(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Z=g0(k,l);En(e,t,Z,Dt(e))}else En(e,t,l,Dt(e))}catch(te){En(e,t,{then:function(){},status:"rejected",reason:te},Dt())}finally{T.p=h,E.T=b}}function j0(){}function rc(e,t,a,l){if(e.tag!==5)throw Error(i(476));var d=Kf(e).queue;Ff(e,d,t,H,a===null?j0:function(){return If(e),a(l)})}function Kf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:H},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function If(e){var t=Kf(e).next.queue;En(e,t,{},Dt())}function nc(){return gt(Vn)}function Xf(){return et().memoizedState}function Qf(){return et().memoizedState}function w0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Dt();e=Ga(a);var l=Va(t,e,a);l!==null&&(zt(l,t,a),yn(l,t,a)),t={cache:Uo()},e.payload=t;return}t=t.return}}function _0(e,t,a){var l=Dt();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Il(e)?Jf(t,a):(a=So(e,t,a,l),a!==null&&(zt(a,e,l),Wf(a,t,l)))}function Zf(e,t,a){var l=Dt();En(e,t,a,l)}function En(e,t,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Il(e))Jf(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var b=t.lastRenderedState,w=h(b,a);if(d.hasEagerState=!0,d.eagerState=w,Tt(w,b))return Tl(e,t,d,0),qe===null&&Al(),!1}catch{}finally{}if(a=So(e,t,d,l),a!==null)return zt(a,e,l),Wf(a,t,l),!0}return!1}function lc(e,t,a,l){if(l={lane:2,revertLane:Lc(),action:l,hasEagerState:!1,eagerState:null,next:null},Il(e)){if(t)throw Error(i(479))}else t=So(e,a,l,2),t!==null&&zt(t,e,2)}function Il(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function Jf(e,t){ur=Pl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Wf(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,ld(e,a)}}var Xl={readContext:gt,use:Vl,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe},eh={readContext:gt,use:Vl,useCallback:function(e,t){return _t().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:zf,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Kl(4194308,4,Hf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Kl(4194308,4,e,t)},useInsertionEffect:function(e,t){Kl(4,2,e,t)},useMemo:function(e,t){var a=_t();t=t===void 0?null:t;var l=e();if($s){La(!0);try{e()}finally{La(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=_t();if(a!==void 0){var d=a(t);if($s){La(!0);try{a(t)}finally{La(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=_0.bind(null,_e,e),[l.memoizedState,e]},useRef:function(e){var t=_t();return e={current:e},t.memoizedState=e},useState:function(e){e=ec(e);var t=e.queue,a=Zf.bind(null,_e,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:ac,useDeferredValue:function(e,t){var a=_t();return sc(a,e,t)},useTransition:function(){var e=ec(!1);return e=Ff.bind(null,_e,e.queue,!0,!1),_t().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=_e,d=_t();if(Te){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),qe===null)throw Error(i(349));($e&124)!==0||jf(l,t,a)}d.memoizedState=a;var h={value:a,getSnapshot:t};return d.queue=h,zf(_f.bind(null,l,h,e),[e]),l.flags|=2048,fr(9,Fl(),wf.bind(null,l,h,a,t),null),a},useId:function(){var e=_t(),t=qe.identifierPrefix;if(Te){var a=xa,l=ga;a=(l&~(1<<32-At(l)-1)).toString(32)+a,t="«"+t+"R"+a,a=Gl++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=x0++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:nc,useFormState:Of,useActionState:Of,useOptimistic:function(e){var t=_t();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=lc.bind(null,_e,!0,a),a.dispatch=t,[e,t]},useMemoCache:Zo,useCacheRefresh:function(){return _t().memoizedState=w0.bind(null,_e)}},th={readContext:gt,use:Vl,useCallback:Gf,useContext:gt,useEffect:Lf,useImperativeHandle:Pf,useInsertionEffect:Bf,useLayoutEffect:qf,useMemo:Vf,useReducer:Yl,useRef:Df,useState:function(){return Yl(ya)},useDebugValue:ac,useDeferredValue:function(e,t){var a=et();return Yf(a,Me.memoizedState,e,t)},useTransition:function(){var e=Yl(ya)[0],t=et().memoizedState;return[typeof e=="boolean"?e:Nn(e),t]},useSyncExternalStore:yf,useId:Xf,useHostTransitionStatus:nc,useFormState:Rf,useActionState:Rf,useOptimistic:function(e,t){var a=et();return Ef(a,Me,e,t)},useMemoCache:Zo,useCacheRefresh:Qf},N0={readContext:gt,use:Vl,useCallback:Gf,useContext:gt,useEffect:Lf,useImperativeHandle:Pf,useInsertionEffect:Bf,useLayoutEffect:qf,useMemo:Vf,useReducer:Wo,useRef:Df,useState:function(){return Wo(ya)},useDebugValue:ac,useDeferredValue:function(e,t){var a=et();return Me===null?sc(a,e,t):Yf(a,Me.memoizedState,e,t)},useTransition:function(){var e=Wo(ya)[0],t=et().memoizedState;return[typeof e=="boolean"?e:Nn(e),t]},useSyncExternalStore:yf,useId:Xf,useHostTransitionStatus:nc,useFormState:Uf,useActionState:Uf,useOptimistic:function(e,t){var a=et();return Me!==null?Ef(a,Me,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Zo,useCacheRefresh:Qf},hr=null,Cn=0;function Ql(e){var t=Cn;return Cn+=1,hr===null&&(hr=[]),ff(hr,e,t)}function $n(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Zl(e,t){throw t.$$typeof===v?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ah(e){var t=e._init;return t(e._payload)}function sh(e){function t(z,M){if(e){var L=z.deletions;L===null?(z.deletions=[M],z.flags|=16):L.push(M)}}function a(z,M){if(!e)return null;for(;M!==null;)t(z,M),M=M.sibling;return null}function l(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function d(z,M){return z=pa(z,M),z.index=0,z.sibling=null,z}function h(z,M,L){return z.index=L,e?(L=z.alternate,L!==null?(L=L.index,L<M?(z.flags|=67108866,M):L):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function b(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function w(z,M,L,J){return M===null||M.tag!==6?(M=Co(L,z.mode,J),M.return=z,M):(M=d(M,L),M.return=z,M)}function k(z,M,L,J){var ie=L.type;return ie===j?Z(z,M,L.props.children,J,L.key):M!==null&&(M.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ae&&ah(ie)===M.type)?(M=d(M,L.props),$n(M,L),M.return=z,M):(M=Rl(L.type,L.key,L.props,null,z.mode,J),$n(M,L),M.return=z,M)}function B(z,M,L,J){return M===null||M.tag!==4||M.stateNode.containerInfo!==L.containerInfo||M.stateNode.implementation!==L.implementation?(M=$o(L,z.mode,J),M.return=z,M):(M=d(M,L.children||[]),M.return=z,M)}function Z(z,M,L,J,ie){return M===null||M.tag!==7?(M=ys(L,z.mode,J,ie),M.return=z,M):(M=d(M,L),M.return=z,M)}function te(z,M,L){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Co(""+M,z.mode,L),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case y:return L=Rl(M.type,M.key,M.props,null,z.mode,L),$n(L,M),L.return=z,L;case S:return M=$o(M,z.mode,L),M.return=z,M;case ae:var J=M._init;return M=J(M._payload),te(z,M,L)}if(K(M)||Y(M))return M=ys(M,z.mode,L,null),M.return=z,M;if(typeof M.then=="function")return te(z,Ql(M),L);if(M.$$typeof===U)return te(z,zl(z,M),L);Zl(z,M)}return null}function G(z,M,L,J){var ie=M!==null?M.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return ie!==null?null:w(z,M,""+L,J);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case y:return L.key===ie?k(z,M,L,J):null;case S:return L.key===ie?B(z,M,L,J):null;case ae:return ie=L._init,L=ie(L._payload),G(z,M,L,J)}if(K(L)||Y(L))return ie!==null?null:Z(z,M,L,J,null);if(typeof L.then=="function")return G(z,M,Ql(L),J);if(L.$$typeof===U)return G(z,M,zl(z,L),J);Zl(z,L)}return null}function V(z,M,L,J,ie){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(L)||null,w(M,z,""+J,ie);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case y:return z=z.get(J.key===null?L:J.key)||null,k(M,z,J,ie);case S:return z=z.get(J.key===null?L:J.key)||null,B(M,z,J,ie);case ae:var Ne=J._init;return J=Ne(J._payload),V(z,M,L,J,ie)}if(K(J)||Y(J))return z=z.get(L)||null,Z(M,z,J,ie,null);if(typeof J.then=="function")return V(z,M,L,Ql(J),ie);if(J.$$typeof===U)return V(z,M,L,zl(M,J),ie);Zl(M,J)}return null}function ge(z,M,L,J){for(var ie=null,Ne=null,de=M,pe=M=0,ot=null;de!==null&&pe<L.length;pe++){de.index>pe?(ot=de,de=null):ot=de.sibling;var Ae=G(z,de,L[pe],J);if(Ae===null){de===null&&(de=ot);break}e&&de&&Ae.alternate===null&&t(z,de),M=h(Ae,M,pe),Ne===null?ie=Ae:Ne.sibling=Ae,Ne=Ae,de=ot}if(pe===L.length)return a(z,de),Te&&ws(z,pe),ie;if(de===null){for(;pe<L.length;pe++)de=te(z,L[pe],J),de!==null&&(M=h(de,M,pe),Ne===null?ie=de:Ne.sibling=de,Ne=de);return Te&&ws(z,pe),ie}for(de=l(de);pe<L.length;pe++)ot=V(de,z,pe,L[pe],J),ot!==null&&(e&&ot.alternate!==null&&de.delete(ot.key===null?pe:ot.key),M=h(ot,M,pe),Ne===null?ie=ot:Ne.sibling=ot,Ne=ot);return e&&de.forEach(function(is){return t(z,is)}),Te&&ws(z,pe),ie}function me(z,M,L,J){if(L==null)throw Error(i(151));for(var ie=null,Ne=null,de=M,pe=M=0,ot=null,Ae=L.next();de!==null&&!Ae.done;pe++,Ae=L.next()){de.index>pe?(ot=de,de=null):ot=de.sibling;var is=G(z,de,Ae.value,J);if(is===null){de===null&&(de=ot);break}e&&de&&is.alternate===null&&t(z,de),M=h(is,M,pe),Ne===null?ie=is:Ne.sibling=is,Ne=is,de=ot}if(Ae.done)return a(z,de),Te&&ws(z,pe),ie;if(de===null){for(;!Ae.done;pe++,Ae=L.next())Ae=te(z,Ae.value,J),Ae!==null&&(M=h(Ae,M,pe),Ne===null?ie=Ae:Ne.sibling=Ae,Ne=Ae);return Te&&ws(z,pe),ie}for(de=l(de);!Ae.done;pe++,Ae=L.next())Ae=V(de,z,pe,Ae.value,J),Ae!==null&&(e&&Ae.alternate!==null&&de.delete(Ae.key===null?pe:Ae.key),M=h(Ae,M,pe),Ne===null?ie=Ae:Ne.sibling=Ae,Ne=Ae);return e&&de.forEach(function(Sv){return t(z,Sv)}),Te&&ws(z,pe),ie}function De(z,M,L,J){if(typeof L=="object"&&L!==null&&L.type===j&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case y:e:{for(var ie=L.key;M!==null;){if(M.key===ie){if(ie=L.type,ie===j){if(M.tag===7){a(z,M.sibling),J=d(M,L.props.children),J.return=z,z=J;break e}}else if(M.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ae&&ah(ie)===M.type){a(z,M.sibling),J=d(M,L.props),$n(J,L),J.return=z,z=J;break e}a(z,M);break}else t(z,M);M=M.sibling}L.type===j?(J=ys(L.props.children,z.mode,J,L.key),J.return=z,z=J):(J=Rl(L.type,L.key,L.props,null,z.mode,J),$n(J,L),J.return=z,z=J)}return b(z);case S:e:{for(ie=L.key;M!==null;){if(M.key===ie)if(M.tag===4&&M.stateNode.containerInfo===L.containerInfo&&M.stateNode.implementation===L.implementation){a(z,M.sibling),J=d(M,L.children||[]),J.return=z,z=J;break e}else{a(z,M);break}else t(z,M);M=M.sibling}J=$o(L,z.mode,J),J.return=z,z=J}return b(z);case ae:return ie=L._init,L=ie(L._payload),De(z,M,L,J)}if(K(L))return ge(z,M,L,J);if(Y(L)){if(ie=Y(L),typeof ie!="function")throw Error(i(150));return L=ie.call(L),me(z,M,L,J)}if(typeof L.then=="function")return De(z,M,Ql(L),J);if(L.$$typeof===U)return De(z,M,zl(z,L),J);Zl(z,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,M!==null&&M.tag===6?(a(z,M.sibling),J=d(M,L),J.return=z,z=J):(a(z,M),J=Co(L,z.mode,J),J.return=z,z=J),b(z)):a(z,M)}return function(z,M,L,J){try{Cn=0;var ie=De(z,M,L,J);return hr=null,ie}catch(de){if(de===vn||de===Bl)throw de;var Ne=Ot(29,de,null,z.mode);return Ne.lanes=J,Ne.return=z,Ne}finally{}}}var mr=sh(!0),rh=sh(!1),Ft=q(null),na=null;function Fa(e){var t=e.alternate;le(rt,rt.current&1),le(Ft,e),na===null&&(t===null||cr.current!==null||t.memoizedState!==null)&&(na=e)}function nh(e){if(e.tag===22){if(le(rt,rt.current),le(Ft,e),na===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(na=e)}}else Ka()}function Ka(){le(rt,rt.current),le(Ft,Ft.current)}function ja(e){se(Ft),na===e&&(na=null),se(rt)}var rt=q(0);function Jl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Qc(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ic(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:x({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var oc={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=Dt(),d=Ga(l);d.payload=t,a!=null&&(d.callback=a),t=Va(e,d,l),t!==null&&(zt(t,e,l),yn(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=Dt(),d=Ga(l);d.tag=1,d.payload=t,a!=null&&(d.callback=a),t=Va(e,d,l),t!==null&&(zt(t,e,l),yn(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Dt(),l=Ga(a);l.tag=2,t!=null&&(l.callback=t),t=Va(e,l,a),t!==null&&(zt(t,e,a),yn(t,e,a))}};function lh(e,t,a,l,d,h,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,b):t.prototype&&t.prototype.isPureReactComponent?!un(a,l)||!un(d,h):!0}function ih(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&oc.enqueueReplaceState(t,t.state,null)}function ks(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=x({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}var Wl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function oh(e){Wl(e)}function ch(e){console.error(e)}function uh(e){Wl(e)}function ei(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function dh(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function cc(e,t,a){return a=Ga(a),a.tag=3,a.payload={element:null},a.callback=function(){ei(e,t)},a}function fh(e){return e=Ga(e),e.tag=3,e}function hh(e,t,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;e.payload=function(){return d(h)},e.callback=function(){dh(t,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){dh(t,a,l),typeof d!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function S0(e,t,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&pn(t,a,d,!0),a=Ft.current,a!==null){switch(a.tag){case 13:return na===null?Rc():a.alternate===null&&Xe===0&&(Xe=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Lo?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Uc(e,l,d)),!1;case 22:return a.flags|=65536,l===Lo?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Uc(e,l,d)),!1}throw Error(i(435,a.tag))}return Uc(e,l,d),Rc(),!1}if(Te)return t=Ft.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==To&&(e=Error(i(422),{cause:l}),mn(Pt(e,a)))):(l!==To&&(t=Error(i(423),{cause:l}),mn(Pt(t,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Pt(l,a),d=cc(e.stateNode,l,d),Ho(e,d),Xe!==4&&(Xe=2)),!1;var h=Error(i(520),{cause:l});if(h=Pt(h,a),Un===null?Un=[h]:Un.push(h),Xe!==4&&(Xe=2),t===null)return!0;l=Pt(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=cc(a.stateNode,l,e),Ho(a,e),!1;case 1:if(t=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Wa===null||!Wa.has(h))))return a.flags|=65536,d&=-d,a.lanes|=d,d=fh(d),hh(d,e,a,l),Ho(a,d),!1}a=a.return}while(a!==null);return!1}var mh=Error(i(461)),lt=!1;function dt(e,t,a,l){t.child=e===null?rh(t,null,a,l):mr(t,e.child,a,l)}function ph(e,t,a,l,d){a=a.render;var h=t.ref;if("ref"in l){var b={};for(var w in l)w!=="ref"&&(b[w]=l[w])}else b=l;return Es(t),l=Fo(e,t,a,b,h,d),w=Ko(),e!==null&&!lt?(Io(e,t,d),wa(e,t,d)):(Te&&w&&ko(t),t.flags|=1,dt(e,t,l,d),t.child)}function gh(e,t,a,l,d){if(e===null){var h=a.type;return typeof h=="function"&&!Eo(h)&&h.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=h,xh(e,t,h,l,d)):(e=Rl(a.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!xc(e,d)){var b=h.memoizedProps;if(a=a.compare,a=a!==null?a:un,a(b,l)&&e.ref===t.ref)return wa(e,t,d)}return t.flags|=1,e=pa(h,l),e.ref=t.ref,e.return=t,t.child=e}function xh(e,t,a,l,d){if(e!==null){var h=e.memoizedProps;if(un(h,l)&&e.ref===t.ref)if(lt=!1,t.pendingProps=l=h,xc(e,d))(e.flags&131072)!==0&&(lt=!0);else return t.lanes=e.lanes,wa(e,t,d)}return uc(e,t,a,l,d)}function vh(e,t,a){var l=t.pendingProps,d=l.children,h=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=h!==null?h.baseLanes|a:a,e!==null){for(d=t.child=e.child,h=0;d!==null;)h=h|d.lanes|d.childLanes,d=d.sibling;t.childLanes=h&~l}else t.childLanes=0,t.child=null;return bh(e,t,l,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ll(t,h!==null?h.cachePool:null),h!==null?xf(t,h):Go(),nh(t);else return t.lanes=t.childLanes=536870912,bh(e,t,h!==null?h.baseLanes|a:a,a)}else h!==null?(Ll(t,h.cachePool),xf(t,h),Ka(),t.memoizedState=null):(e!==null&&Ll(t,null),Go(),Ka());return dt(e,t,d,a),t.child}function bh(e,t,a,l){var d=zo();return d=d===null?null:{parent:st._currentValue,pool:d},t.memoizedState={baseLanes:a,cachePool:d},e!==null&&Ll(t,null),Go(),nh(t),e!==null&&pn(e,t,l,!0),null}function ti(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function uc(e,t,a,l,d){return Es(t),a=Fo(e,t,a,l,void 0,d),l=Ko(),e!==null&&!lt?(Io(e,t,d),wa(e,t,d)):(Te&&l&&ko(t),t.flags|=1,dt(e,t,a,d),t.child)}function yh(e,t,a,l,d,h){return Es(t),t.updateQueue=null,a=bf(t,l,a,d),vf(e),l=Ko(),e!==null&&!lt?(Io(e,t,h),wa(e,t,h)):(Te&&l&&ko(t),t.flags|=1,dt(e,t,a,h),t.child)}function jh(e,t,a,l,d){if(Es(t),t.stateNode===null){var h=rr,b=a.contextType;typeof b=="object"&&b!==null&&(h=gt(b)),h=new a(l,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=oc,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=l,h.state=t.memoizedState,h.refs={},Bo(t),b=a.contextType,h.context=typeof b=="object"&&b!==null?gt(b):rr,h.state=t.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(ic(t,a,b,l),h.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(b=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),b!==h.state&&oc.enqueueReplaceState(h,h.state,null),wn(t,l,h,d),jn(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){h=t.stateNode;var w=t.memoizedProps,k=ks(a,w);h.props=k;var B=h.context,Z=a.contextType;b=rr,typeof Z=="object"&&Z!==null&&(b=gt(Z));var te=a.getDerivedStateFromProps;Z=typeof te=="function"||typeof h.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,Z||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(w||B!==b)&&ih(t,h,l,b),Pa=!1;var G=t.memoizedState;h.state=G,wn(t,l,h,d),jn(),B=t.memoizedState,w||G!==B||Pa?(typeof te=="function"&&(ic(t,a,te,l),B=t.memoizedState),(k=Pa||lh(t,a,k,l,G,B,b))?(Z||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=B),h.props=l,h.state=B,h.context=b,l=k):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{h=t.stateNode,qo(e,t),b=t.memoizedProps,Z=ks(a,b),h.props=Z,te=t.pendingProps,G=h.context,B=a.contextType,k=rr,typeof B=="object"&&B!==null&&(k=gt(B)),w=a.getDerivedStateFromProps,(B=typeof w=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(b!==te||G!==k)&&ih(t,h,l,k),Pa=!1,G=t.memoizedState,h.state=G,wn(t,l,h,d),jn();var V=t.memoizedState;b!==te||G!==V||Pa||e!==null&&e.dependencies!==null&&Dl(e.dependencies)?(typeof w=="function"&&(ic(t,a,w,l),V=t.memoizedState),(Z=Pa||lh(t,a,Z,l,G,V,k)||e!==null&&e.dependencies!==null&&Dl(e.dependencies))?(B||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,V,k),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,V,k)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=V),h.props=l,h.state=V,h.context=k,l=Z):(typeof h.componentDidUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),l=!1)}return h=l,ti(e,t),l=(t.flags&128)!==0,h||l?(h=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&l?(t.child=mr(t,e.child,null,d),t.child=mr(t,null,a,d)):dt(e,t,a,d),t.memoizedState=h.state,e=t.child):e=wa(e,t,d),e}function wh(e,t,a,l){return hn(),t.flags|=256,dt(e,t,a,l),t.child}var dc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fc(e){return{baseLanes:e,cachePool:cf()}}function hc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Kt),e}function _h(e,t,a){var l=t.pendingProps,d=!1,h=(t.flags&128)!==0,b;if((b=h)||(b=e!==null&&e.memoizedState===null?!1:(rt.current&2)!==0),b&&(d=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(Te){if(d?Fa(t):Ka(),Te){var w=Ie,k;if(k=w){e:{for(k=w,w=ra;k.nodeType!==8;){if(!w){w=null;break e}if(k=Wt(k.nextSibling),k===null){w=null;break e}}w=k}w!==null?(t.memoizedState={dehydrated:w,treeContext:js!==null?{id:ga,overflow:xa}:null,retryLane:536870912,hydrationErrors:null},k=Ot(18,null,null,0),k.stateNode=w,k.return=t,t.child=k,yt=t,Ie=null,k=!0):k=!1}k||Ns(t)}if(w=t.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Qc(w)?t.lanes=32:t.lanes=536870912,null;ja(t)}return w=l.children,l=l.fallback,d?(Ka(),d=t.mode,w=ai({mode:"hidden",children:w},d),l=ys(l,d,a,null),w.return=t,l.return=t,w.sibling=l,t.child=w,d=t.child,d.memoizedState=fc(a),d.childLanes=hc(e,b,a),t.memoizedState=dc,l):(Fa(t),mc(t,w))}if(k=e.memoizedState,k!==null&&(w=k.dehydrated,w!==null)){if(h)t.flags&256?(Fa(t),t.flags&=-257,t=pc(e,t,a)):t.memoizedState!==null?(Ka(),t.child=e.child,t.flags|=128,t=null):(Ka(),d=l.fallback,w=t.mode,l=ai({mode:"visible",children:l.children},w),d=ys(d,w,a,null),d.flags|=2,l.return=t,d.return=t,l.sibling=d,t.child=l,mr(t,e.child,null,a),l=t.child,l.memoizedState=fc(a),l.childLanes=hc(e,b,a),t.memoizedState=dc,t=d);else if(Fa(t),Qc(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var B=b.dgst;b=B,l=Error(i(419)),l.stack="",l.digest=b,mn({value:l,source:null,stack:null}),t=pc(e,t,a)}else if(lt||pn(e,t,a,!1),b=(a&e.childLanes)!==0,lt||b){if(b=qe,b!==null&&(l=a&-a,l=(l&42)!==0?1:Qi(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==k.retryLane))throw k.retryLane=l,sr(e,l),zt(b,e,l),mh;w.data==="$?"||Rc(),t=pc(e,t,a)}else w.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,Ie=Wt(w.nextSibling),yt=t,Te=!0,_s=null,ra=!1,e!==null&&(Vt[Yt++]=ga,Vt[Yt++]=xa,Vt[Yt++]=js,ga=e.id,xa=e.overflow,js=t),t=mc(t,l.children),t.flags|=4096);return t}return d?(Ka(),d=l.fallback,w=t.mode,k=e.child,B=k.sibling,l=pa(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,B!==null?d=pa(B,d):(d=ys(d,w,a,null),d.flags|=2),d.return=t,l.return=t,l.sibling=d,t.child=l,l=d,d=t.child,w=e.child.memoizedState,w===null?w=fc(a):(k=w.cachePool,k!==null?(B=st._currentValue,k=k.parent!==B?{parent:B,pool:B}:k):k=cf(),w={baseLanes:w.baseLanes|a,cachePool:k}),d.memoizedState=w,d.childLanes=hc(e,b,a),t.memoizedState=dc,l):(Fa(t),a=e.child,e=a.sibling,a=pa(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=a,t.memoizedState=null,a)}function mc(e,t){return t=ai({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ai(e,t){return e=Ot(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function pc(e,t,a){return mr(t,e.child,null,a),e=mc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Nh(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Ro(e.return,t,a)}function gc(e,t,a,l,d){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=a,h.tailMode=d)}function Sh(e,t,a){var l=t.pendingProps,d=l.revealOrder,h=l.tail;if(dt(e,t,l.children,a),l=rt.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nh(e,a,t);else if(e.tag===19)Nh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(le(rt,l),d){case"forwards":for(a=t.child,d=null;a!==null;)e=a.alternate,e!==null&&Jl(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=t.child,t.child=null):(d=a.sibling,a.sibling=null),gc(t,!1,d,a,h);break;case"backwards":for(a=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Jl(e)===null){t.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}gc(t,!0,a,null,h);break;case"together":gc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ja|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(pn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=pa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=pa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function xc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Dl(e)))}function E0(e,t,a){switch(t.tag){case 3:ke(t,t.stateNode.containerInfo),Ha(t,st,e.memoizedState.cache),hn();break;case 27:case 5:Ye(t);break;case 4:ke(t,t.stateNode.containerInfo);break;case 10:Ha(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Fa(t),t.flags|=128,null):(a&t.child.childLanes)!==0?_h(e,t,a):(Fa(t),e=wa(e,t,a),e!==null?e.sibling:null);Fa(t);break;case 19:var d=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(pn(e,t,a,!1),l=(a&t.childLanes)!==0),d){if(l)return Sh(e,t,a);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),le(rt,rt.current),l)break;return null;case 22:case 23:return t.lanes=0,vh(e,t,a);case 24:Ha(t,st,e.memoizedState.cache)}return wa(e,t,a)}function Eh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)lt=!0;else{if(!xc(e,a)&&(t.flags&128)===0)return lt=!1,E0(e,t,a);lt=(e.flags&131072)!==0}else lt=!1,Te&&(t.flags&1048576)!==0&&tf(t,Ul,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,d=l._init;if(l=d(l._payload),t.type=l,typeof l=="function")Eo(l)?(e=ks(l,e),t.tag=1,t=jh(null,t,l,e,a)):(t.tag=0,t=uc(null,t,l,e,a));else{if(l!=null){if(d=l.$$typeof,d===A){t.tag=11,t=ph(null,t,l,e,a);break e}else if(d===I){t.tag=14,t=gh(null,t,l,e,a);break e}}throw t=ee(l)||l,Error(i(306,t,""))}}return t;case 0:return uc(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,d=ks(l,t.pendingProps),jh(e,t,l,d,a);case 3:e:{if(ke(t,t.stateNode.containerInfo),e===null)throw Error(i(387));l=t.pendingProps;var h=t.memoizedState;d=h.element,qo(e,t),wn(t,l,null,a);var b=t.memoizedState;if(l=b.cache,Ha(t,st,l),l!==h.cache&&Mo(t,[st],a,!0),jn(),l=b.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=wh(e,t,l,a);break e}else if(l!==d){d=Pt(Error(i(424)),t),mn(d),t=wh(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ie=Wt(e.firstChild),yt=t,Te=!0,_s=null,ra=!0,a=rh(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(hn(),l===d){t=wa(e,t,a);break e}dt(e,t,l,a)}t=t.child}return t;case 26:return ti(e,t),e===null?(a=Am(t.type,null,t.pendingProps,null))?t.memoizedState=a:Te||(a=t.type,e=t.pendingProps,l=gi(ue.current).createElement(a),l[pt]=t,l[jt]=e,ht(l,a,e),nt(l),t.stateNode=l):t.memoizedState=Am(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ye(t),e===null&&Te&&(l=t.stateNode=Cm(t.type,t.pendingProps,ue.current),yt=t,ra=!0,d=Ie,as(t.type)?(Zc=d,Ie=Wt(l.firstChild)):Ie=d),dt(e,t,t.pendingProps.children,a),ti(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Te&&((d=l=Ie)&&(l=ev(l,t.type,t.pendingProps,ra),l!==null?(t.stateNode=l,yt=t,Ie=Wt(l.firstChild),ra=!1,d=!0):d=!1),d||Ns(t)),Ye(t),d=t.type,h=t.pendingProps,b=e!==null?e.memoizedProps:null,l=h.children,Kc(d,h)?l=null:b!==null&&Kc(d,b)&&(t.flags|=32),t.memoizedState!==null&&(d=Fo(e,t,v0,null,null,a),Vn._currentValue=d),ti(e,t),dt(e,t,l,a),t.child;case 6:return e===null&&Te&&((e=a=Ie)&&(a=tv(a,t.pendingProps,ra),a!==null?(t.stateNode=a,yt=t,Ie=null,e=!0):e=!1),e||Ns(t)),null;case 13:return _h(e,t,a);case 4:return ke(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=mr(t,null,l,a):dt(e,t,l,a),t.child;case 11:return ph(e,t,t.type,t.pendingProps,a);case 7:return dt(e,t,t.pendingProps,a),t.child;case 8:return dt(e,t,t.pendingProps.children,a),t.child;case 12:return dt(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Ha(t,t.type,l.value),dt(e,t,l.children,a),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,Es(t),d=gt(d),l=l(d),t.flags|=1,dt(e,t,l,a),t.child;case 14:return gh(e,t,t.type,t.pendingProps,a);case 15:return xh(e,t,t.type,t.pendingProps,a);case 19:return Sh(e,t,a);case 31:return l=t.pendingProps,a=t.mode,l={mode:l.mode,children:l.children},e===null?(a=ai(l,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=pa(e.child,l),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return vh(e,t,a);case 24:return Es(t),l=gt(st),e===null?(d=zo(),d===null&&(d=qe,h=Uo(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=a),d=h),t.memoizedState={parent:l,cache:d},Bo(t),Ha(t,st,d)):((e.lanes&a)!==0&&(qo(e,t),wn(t,null,null,a),jn()),d=e.memoizedState,h=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Ha(t,st,l)):(l=h.cache,Ha(t,st,l),l!==d.cache&&Mo(t,[st],a,!0))),dt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function _a(e){e.flags|=4}function Ch(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Um(t)){if(t=Ft.current,t!==null&&(($e&4194048)===$e?na!==null:($e&62914560)!==$e&&($e&536870912)===0||t!==na))throw bn=Lo,uf;e.flags|=8192}}function si(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?rd():536870912,e.lanes|=t,vr|=t)}function kn(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Fe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function C0(e,t,a){var l=t.pendingProps;switch(Ao(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return Fe(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ba(st),ce(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(fn(t)?_a(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,rf())),Fe(t),null;case 26:return a=t.memoizedState,e===null?(_a(t),a!==null?(Fe(t),Ch(t,a)):(Fe(t),t.flags&=-16777217)):a?a!==e.memoizedState?(_a(t),Fe(t),Ch(t,a)):(Fe(t),t.flags&=-16777217):(e.memoizedProps!==l&&_a(t),Fe(t),t.flags&=-16777217),null;case 27:at(t),a=ue.current;var d=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&_a(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return Fe(t),null}e=ne.current,fn(t)?af(t):(e=Cm(d,l,a),t.stateNode=e,_a(t))}return Fe(t),null;case 5:if(at(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&_a(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return Fe(t),null}if(e=ne.current,fn(t))af(t);else{switch(d=gi(ue.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}e[pt]=t,e[jt]=l;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=e;e:switch(ht(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&_a(t)}}return Fe(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&_a(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(i(166));if(e=ue.current,fn(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,d=yt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[pt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||ym(e.nodeValue,a)),e||Ns(t)}else e=gi(e).createTextNode(l),e[pt]=t,t.stateNode=e}return Fe(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=fn(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[pt]=t}else hn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Fe(t),d=!1}else d=rf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(ja(t),t):(ja(t),null)}if(ja(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var h=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),si(t,t.updateQueue),Fe(t),null;case 4:return ce(),e===null&&Pc(t.stateNode.containerInfo),Fe(t),null;case 10:return ba(t.type),Fe(t),null;case 19:if(se(rt),d=t.memoizedState,d===null)return Fe(t),null;if(l=(t.flags&128)!==0,h=d.rendering,h===null)if(l)kn(d,!1);else{if(Xe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Jl(e),h!==null){for(t.flags|=128,kn(d,!1),e=h.updateQueue,t.updateQueue=e,si(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)ef(a,e),a=a.sibling;return le(rt,rt.current&1|2),t.child}e=e.sibling}d.tail!==null&&xe()>li&&(t.flags|=128,l=!0,kn(d,!1),t.lanes=4194304)}else{if(!l)if(e=Jl(h),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,si(t,e),kn(d,!0),d.tail===null&&d.tailMode==="hidden"&&!h.alternate&&!Te)return Fe(t),null}else 2*xe()-d.renderingStartTime>li&&a!==536870912&&(t.flags|=128,l=!0,kn(d,!1),t.lanes=4194304);d.isBackwards?(h.sibling=t.child,t.child=h):(e=d.last,e!==null?e.sibling=h:t.child=h,d.last=h)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=xe(),t.sibling=null,e=rt.current,le(rt,l?e&1|2:e&1),t):(Fe(t),null);case 22:case 23:return ja(t),Vo(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),a=t.updateQueue,a!==null&&si(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&se(Cs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ba(st),Fe(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function $0(e,t){switch(Ao(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ba(st),ce(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return at(t),null;case 13:if(ja(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));hn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return se(rt),null;case 4:return ce(),null;case 10:return ba(t.type),null;case 22:case 23:return ja(t),Vo(),e!==null&&se(Cs),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ba(st),null;case 25:return null;default:return null}}function $h(e,t){switch(Ao(t),t.tag){case 3:ba(st),ce();break;case 26:case 27:case 5:at(t);break;case 4:ce();break;case 13:ja(t);break;case 19:se(rt);break;case 10:ba(t.type);break;case 22:case 23:ja(t),Vo(),e!==null&&se(Cs);break;case 24:ba(st)}}function An(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&e)===e){l=void 0;var h=a.create,b=a.inst;l=h(),b.destroy=l}a=a.next}while(a!==d)}}catch(w){ze(t,t.return,w)}}function Ia(e,t,a){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&e)===e){var b=l.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,d=t;var k=a,B=w;try{B()}catch(Z){ze(d,k,Z)}}}l=l.next}while(l!==h)}}catch(Z){ze(t,t.return,Z)}}function kh(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{gf(t,a)}catch(l){ze(e,e.return,l)}}}function Ah(e,t,a){a.props=ks(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ze(e,t,l)}}function Tn(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(d){ze(e,t,d)}}function la(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){ze(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ze(e,t,d)}else a.current=null}function Th(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){ze(e,e.return,d)}}function vc(e,t,a){try{var l=e.stateNode;X0(l,e.type,a,t),l[jt]=t}catch(d){ze(e,e.return,d)}}function Oh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&as(e.type)||e.tag===4}function bc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Oh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&as(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yc(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=pi));else if(l!==4&&(l===27&&as(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(yc(e,t,a),e=e.sibling;e!==null;)yc(e,t,a),e=e.sibling}function ri(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&as(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(ri(e,t,a),e=e.sibling;e!==null;)ri(e,t,a),e=e.sibling}function Rh(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);ht(t,l,a),t[pt]=e,t[jt]=a}catch(h){ze(e,e.return,h)}}var Na=!1,Ze=!1,jc=!1,Mh=typeof WeakSet=="function"?WeakSet:Set,it=null;function k0(e,t){if(e=e.containerInfo,Yc=wi,e=Vd(e),bo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var b=0,w=-1,k=-1,B=0,Z=0,te=e,G=null;t:for(;;){for(var V;te!==a||d!==0&&te.nodeType!==3||(w=b+d),te!==h||l!==0&&te.nodeType!==3||(k=b+l),te.nodeType===3&&(b+=te.nodeValue.length),(V=te.firstChild)!==null;)G=te,te=V;for(;;){if(te===e)break t;if(G===a&&++B===d&&(w=b),G===h&&++Z===l&&(k=b),(V=te.nextSibling)!==null)break;te=G,G=te.parentNode}te=V}a=w===-1||k===-1?null:{start:w,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Fc={focusedElem:e,selectionRange:a},wi=!1,it=t;it!==null;)if(t=it,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,it=e;else for(;it!==null;){switch(t=it,h=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,a=t,d=h.memoizedProps,h=h.memoizedState,l=a.stateNode;try{var ge=ks(a.type,d,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(ge,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(me){ze(a,a.return,me)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Xc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Xc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,it=e;break}it=t.return}}function Uh(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Xa(e,a),l&4&&An(5,a);break;case 1:if(Xa(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(b){ze(a,a.return,b)}else{var d=ks(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){ze(a,a.return,b)}}l&64&&kh(a),l&512&&Tn(a,a.return);break;case 3:if(Xa(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{gf(e,t)}catch(b){ze(a,a.return,b)}}break;case 27:t===null&&l&4&&Rh(a);case 26:case 5:Xa(e,a),t===null&&l&4&&Th(a),l&512&&Tn(a,a.return);break;case 12:Xa(e,a);break;case 13:Xa(e,a),l&4&&Lh(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=L0.bind(null,a),av(e,a))));break;case 22:if(l=a.memoizedState!==null||Na,!l){t=t!==null&&t.memoizedState!==null||Ze,d=Na;var h=Ze;Na=l,(Ze=t)&&!h?Qa(e,a,(a.subtreeFlags&8772)!==0):Xa(e,a),Na=d,Ze=h}break;case 30:break;default:Xa(e,a)}}function Dh(e){var t=e.alternate;t!==null&&(e.alternate=null,Dh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Wi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ge=null,Nt=!1;function Sa(e,t,a){for(a=a.child;a!==null;)zh(e,t,a),a=a.sibling}function zh(e,t,a){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Zr,a)}catch{}switch(a.tag){case 26:Ze||la(a,t),Sa(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ze||la(a,t);var l=Ge,d=Nt;as(a.type)&&(Ge=a.stateNode,Nt=!1),Sa(e,t,a),qn(a.stateNode),Ge=l,Nt=d;break;case 5:Ze||la(a,t);case 6:if(l=Ge,d=Nt,Ge=null,Sa(e,t,a),Ge=l,Nt=d,Ge!==null)if(Nt)try{(Ge.nodeType===9?Ge.body:Ge.nodeName==="HTML"?Ge.ownerDocument.body:Ge).removeChild(a.stateNode)}catch(h){ze(a,t,h)}else try{Ge.removeChild(a.stateNode)}catch(h){ze(a,t,h)}break;case 18:Ge!==null&&(Nt?(e=Ge,Sm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),In(e)):Sm(Ge,a.stateNode));break;case 4:l=Ge,d=Nt,Ge=a.stateNode.containerInfo,Nt=!0,Sa(e,t,a),Ge=l,Nt=d;break;case 0:case 11:case 14:case 15:Ze||Ia(2,a,t),Ze||Ia(4,a,t),Sa(e,t,a);break;case 1:Ze||(la(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ah(a,t,l)),Sa(e,t,a);break;case 21:Sa(e,t,a);break;case 22:Ze=(l=Ze)||a.memoizedState!==null,Sa(e,t,a),Ze=l;break;default:Sa(e,t,a)}}function Lh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{In(e)}catch(a){ze(t,t.return,a)}}function A0(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Mh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Mh),t;default:throw Error(i(435,e.tag))}}function wc(e,t){var a=A0(e);t.forEach(function(l){var d=B0.bind(null,e,l);a.has(l)||(a.add(l),l.then(d,d))})}function Rt(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],h=e,b=t,w=b;e:for(;w!==null;){switch(w.tag){case 27:if(as(w.type)){Ge=w.stateNode,Nt=!1;break e}break;case 5:Ge=w.stateNode,Nt=!1;break e;case 3:case 4:Ge=w.stateNode.containerInfo,Nt=!0;break e}w=w.return}if(Ge===null)throw Error(i(160));zh(h,b,d),Ge=null,Nt=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Bh(t,e),t=t.sibling}var Jt=null;function Bh(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rt(t,e),Mt(e),l&4&&(Ia(3,e,e.return),An(3,e),Ia(5,e,e.return));break;case 1:Rt(t,e),Mt(e),l&512&&(Ze||a===null||la(a,a.return)),l&64&&Na&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=Jt;if(Rt(t,e),Mt(e),l&512&&(Ze||a===null||la(a,a.return)),l&4){var h=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[en]||h[pt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),ht(h,l,a),h[pt]=e,nt(h),l=h;break e;case"link":var b=Rm("link","href",d).get(l+(a.href||""));if(b){for(var w=0;w<b.length;w++)if(h=b[w],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(w,1);break t}}h=d.createElement(l),ht(h,l,a),d.head.appendChild(h);break;case"meta":if(b=Rm("meta","content",d).get(l+(a.content||""))){for(w=0;w<b.length;w++)if(h=b[w],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(w,1);break t}}h=d.createElement(l),ht(h,l,a),d.head.appendChild(h);break;default:throw Error(i(468,l))}h[pt]=e,nt(h),l=h}e.stateNode=l}else Mm(d,e.type,e.stateNode);else e.stateNode=Om(d,l,e.memoizedProps);else h!==l?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,l===null?Mm(d,e.type,e.stateNode):Om(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&vc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Rt(t,e),Mt(e),l&512&&(Ze||a===null||la(a,a.return)),a!==null&&l&4&&vc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Rt(t,e),Mt(e),l&512&&(Ze||a===null||la(a,a.return)),e.flags&32){d=e.stateNode;try{Qs(d,"")}catch(V){ze(e,e.return,V)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,vc(e,d,a!==null?a.memoizedProps:d)),l&1024&&(jc=!0);break;case 6:if(Rt(t,e),Mt(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(V){ze(e,e.return,V)}}break;case 3:if(bi=null,d=Jt,Jt=xi(t.containerInfo),Rt(t,e),Jt=d,Mt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{In(t.containerInfo)}catch(V){ze(e,e.return,V)}jc&&(jc=!1,qh(e));break;case 4:l=Jt,Jt=xi(e.stateNode.containerInfo),Rt(t,e),Mt(e),Jt=l;break;case 12:Rt(t,e),Mt(e);break;case 13:Rt(t,e),Mt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&($c=xe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,wc(e,l)));break;case 22:d=e.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,B=Na,Z=Ze;if(Na=B||d,Ze=Z||k,Rt(t,e),Ze=Z,Na=B,Mt(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(a===null||k||Na||Ze||As(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){k=a=t;try{if(h=k.stateNode,d)b=h.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=k.stateNode;var te=k.memoizedProps.style,G=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(V){ze(k,k.return,V)}}}else if(t.tag===6){if(a===null){k=t;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(V){ze(k,k.return,V)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,wc(e,a))));break;case 19:Rt(t,e),Mt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,wc(e,l)));break;case 30:break;case 21:break;default:Rt(t,e),Mt(e)}}function Mt(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(Oh(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,h=bc(e);ri(e,h,d);break;case 5:var b=a.stateNode;a.flags&32&&(Qs(b,""),a.flags&=-33);var w=bc(e);ri(e,w,b);break;case 3:case 4:var k=a.stateNode.containerInfo,B=bc(e);yc(e,B,k);break;default:throw Error(i(161))}}catch(Z){ze(e,e.return,Z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;qh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Xa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Uh(e,t.alternate,t),t=t.sibling}function As(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ia(4,t,t.return),As(t);break;case 1:la(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Ah(t,t.return,a),As(t);break;case 27:qn(t.stateNode);case 26:case 5:la(t,t.return),As(t);break;case 22:t.memoizedState===null&&As(t);break;case 30:As(t);break;default:As(t)}e=e.sibling}}function Qa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,h=t,b=h.flags;switch(h.tag){case 0:case 11:case 15:Qa(d,h,a),An(4,h);break;case 1:if(Qa(d,h,a),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(B){ze(l,l.return,B)}if(l=h,d=l.updateQueue,d!==null){var w=l.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)pf(k[d],w)}catch(B){ze(l,l.return,B)}}a&&b&64&&kh(h),Tn(h,h.return);break;case 27:Rh(h);case 26:case 5:Qa(d,h,a),a&&l===null&&b&4&&Th(h),Tn(h,h.return);break;case 12:Qa(d,h,a);break;case 13:Qa(d,h,a),a&&b&4&&Lh(d,h);break;case 22:h.memoizedState===null&&Qa(d,h,a),Tn(h,h.return);break;case 30:break;default:Qa(d,h,a)}t=t.sibling}}function _c(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&gn(a))}function Nc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gn(e))}function ia(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hh(e,t,a,l),t=t.sibling}function Hh(e,t,a,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:ia(e,t,a,l),d&2048&&An(9,t);break;case 1:ia(e,t,a,l);break;case 3:ia(e,t,a,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gn(e)));break;case 12:if(d&2048){ia(e,t,a,l),e=t.stateNode;try{var h=t.memoizedProps,b=h.id,w=h.onPostCommit;typeof w=="function"&&w(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){ze(t,t.return,k)}}else ia(e,t,a,l);break;case 13:ia(e,t,a,l);break;case 23:break;case 22:h=t.stateNode,b=t.alternate,t.memoizedState!==null?h._visibility&2?ia(e,t,a,l):On(e,t):h._visibility&2?ia(e,t,a,l):(h._visibility|=2,pr(e,t,a,l,(t.subtreeFlags&10256)!==0)),d&2048&&_c(b,t);break;case 24:ia(e,t,a,l),d&2048&&Nc(t.alternate,t);break;default:ia(e,t,a,l)}}function pr(e,t,a,l,d){for(d=d&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var h=e,b=t,w=a,k=l,B=b.flags;switch(b.tag){case 0:case 11:case 15:pr(h,b,w,k,d),An(8,b);break;case 23:break;case 22:var Z=b.stateNode;b.memoizedState!==null?Z._visibility&2?pr(h,b,w,k,d):On(h,b):(Z._visibility|=2,pr(h,b,w,k,d)),d&&B&2048&&_c(b.alternate,b);break;case 24:pr(h,b,w,k,d),d&&B&2048&&Nc(b.alternate,b);break;default:pr(h,b,w,k,d)}t=t.sibling}}function On(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,d=l.flags;switch(l.tag){case 22:On(a,l),d&2048&&_c(l.alternate,l);break;case 24:On(a,l),d&2048&&Nc(l.alternate,l);break;default:On(a,l)}t=t.sibling}}var Rn=8192;function gr(e){if(e.subtreeFlags&Rn)for(e=e.child;e!==null;)Ph(e),e=e.sibling}function Ph(e){switch(e.tag){case 26:gr(e),e.flags&Rn&&e.memoizedState!==null&&pv(Jt,e.memoizedState,e.memoizedProps);break;case 5:gr(e);break;case 3:case 4:var t=Jt;Jt=xi(e.stateNode.containerInfo),gr(e),Jt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Rn,Rn=16777216,gr(e),Rn=t):gr(e));break;default:gr(e)}}function Gh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Mn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];it=l,Yh(l,e)}Gh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Vh(e),e=e.sibling}function Vh(e){switch(e.tag){case 0:case 11:case 15:Mn(e),e.flags&2048&&Ia(9,e,e.return);break;case 3:Mn(e);break;case 12:Mn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ni(e)):Mn(e);break;default:Mn(e)}}function ni(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];it=l,Yh(l,e)}Gh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ia(8,t,t.return),ni(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,ni(t));break;default:ni(t)}e=e.sibling}}function Yh(e,t){for(;it!==null;){var a=it;switch(a.tag){case 0:case 11:case 15:Ia(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gn(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,it=l;else e:for(a=e;it!==null;){l=it;var d=l.sibling,h=l.return;if(Dh(l),l===a){it=null;break e}if(d!==null){d.return=h,it=d;break e}it=h}}}var T0={getCacheForType:function(e){var t=gt(st),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},O0=typeof WeakMap=="function"?WeakMap:Map,Oe=0,qe=null,Se=null,$e=0,Re=0,Ut=null,Za=!1,xr=!1,Sc=!1,Ea=0,Xe=0,Ja=0,Ts=0,Ec=0,Kt=0,vr=0,Un=null,St=null,Cc=!1,$c=0,li=1/0,ii=null,Wa=null,ft=0,es=null,br=null,yr=0,kc=0,Ac=null,Fh=null,Dn=0,Tc=null;function Dt(){if((Oe&2)!==0&&$e!==0)return $e&-$e;if(E.T!==null){var e=ir;return e!==0?e:Lc()}return id()}function Kh(){Kt===0&&(Kt=($e&536870912)===0||Te?sd():536870912);var e=Ft.current;return e!==null&&(e.flags|=32),Kt}function zt(e,t,a){(e===qe&&(Re===2||Re===9)||e.cancelPendingCommit!==null)&&(jr(e,0),ts(e,$e,Kt,!1)),Wr(e,a),((Oe&2)===0||e!==qe)&&(e===qe&&((Oe&2)===0&&(Ts|=a),Xe===4&&ts(e,$e,Kt,!1)),oa(e))}function Ih(e,t,a){if((Oe&6)!==0)throw Error(i(327));var l=!a&&(t&124)===0&&(t&e.expiredLanes)===0||Jr(e,t),d=l?U0(e,t):Mc(e,t,!0),h=l;do{if(d===0){xr&&!l&&ts(e,t,0,!1);break}else{if(a=e.current.alternate,h&&!R0(a)){d=Mc(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var w=e;d=Un;var k=w.current.memoizedState.isDehydrated;if(k&&(jr(w,b).flags|=256),b=Mc(w,b,!1),b!==2){if(Sc&&!k){w.errorRecoveryDisabledLanes|=h,Ts|=h,d=4;break e}h=St,St=d,h!==null&&(St===null?St=h:St.push.apply(St,h))}d=b}if(h=!1,d!==2)continue}}if(d===1){jr(e,0),ts(e,t,0,!0);break}e:{switch(l=e,h=d,h){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:ts(l,t,Kt,!Za);break e;case 2:St=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(d=$c+300-xe(),10<d)){if(ts(l,t,Kt,!Za),vl(l,0,!0)!==0)break e;l.timeoutHandle=_m(Xh.bind(null,l,a,St,ii,Cc,t,Kt,Ts,vr,Za,h,2,-0,0),d);break e}Xh(l,a,St,ii,Cc,t,Kt,Ts,vr,Za,h,0,-0,0)}}break}while(!0);oa(e)}function Xh(e,t,a,l,d,h,b,w,k,B,Z,te,G,V){if(e.timeoutHandle=-1,te=t.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Gn={stylesheets:null,count:0,unsuspend:mv},Ph(t),te=gv(),te!==null)){e.cancelPendingCommit=te(am.bind(null,e,t,h,a,l,d,b,w,k,Z,1,G,V)),ts(e,h,b,!B);return}am(e,t,h,a,l,d,b,w,k)}function R0(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],h=d.getSnapshot;d=d.value;try{if(!Tt(h(),d))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ts(e,t,a,l){t&=~Ec,t&=~Ts,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var h=31-At(d),b=1<<h;l[h]=-1,d&=~b}a!==0&&nd(e,a,t)}function oi(){return(Oe&6)===0?(zn(0),!1):!0}function Oc(){if(Se!==null){if(Re===0)var e=Se.return;else e=Se,va=Ss=null,Xo(e),hr=null,Cn=0,e=Se;for(;e!==null;)$h(e.alternate,e),e=e.return;Se=null}}function jr(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Z0(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Oc(),qe=e,Se=a=pa(e.current,null),$e=t,Re=0,Ut=null,Za=!1,xr=Jr(e,t),Sc=!1,vr=Kt=Ec=Ts=Ja=Xe=0,St=Un=null,Cc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-At(l),h=1<<d;t|=e[d],l&=~h}return Ea=t,Al(),a}function Qh(e,t){_e=null,E.H=Xl,t===vn||t===Bl?(t=hf(),Re=3):t===uf?(t=hf(),Re=4):Re=t===mh?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ut=t,Se===null&&(Xe=1,ei(e,Pt(t,e.current)))}function Zh(){var e=E.H;return E.H=Xl,e===null?Xl:e}function Jh(){var e=E.A;return E.A=T0,e}function Rc(){Xe=4,Za||($e&4194048)!==$e&&Ft.current!==null||(xr=!0),(Ja&134217727)===0&&(Ts&134217727)===0||qe===null||ts(qe,$e,Kt,!1)}function Mc(e,t,a){var l=Oe;Oe|=2;var d=Zh(),h=Jh();(qe!==e||$e!==t)&&(ii=null,jr(e,t)),t=!1;var b=Xe;e:do try{if(Re!==0&&Se!==null){var w=Se,k=Ut;switch(Re){case 8:Oc(),b=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(t=!0);var B=Re;if(Re=0,Ut=null,wr(e,w,k,B),a&&xr){b=0;break e}break;default:B=Re,Re=0,Ut=null,wr(e,w,k,B)}}M0(),b=Xe;break}catch(Z){Qh(e,Z)}while(!0);return t&&e.shellSuspendCounter++,va=Ss=null,Oe=l,E.H=d,E.A=h,Se===null&&(qe=null,$e=0,Al()),b}function M0(){for(;Se!==null;)Wh(Se)}function U0(e,t){var a=Oe;Oe|=2;var l=Zh(),d=Jh();qe!==e||$e!==t?(ii=null,li=xe()+500,jr(e,t)):xr=Jr(e,t);e:do try{if(Re!==0&&Se!==null){t=Se;var h=Ut;t:switch(Re){case 1:Re=0,Ut=null,wr(e,t,h,1);break;case 2:case 9:if(df(h)){Re=0,Ut=null,em(t);break}t=function(){Re!==2&&Re!==9||qe!==e||(Re=7),oa(e)},h.then(t,t);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:df(h)?(Re=0,Ut=null,em(t)):(Re=0,Ut=null,wr(e,t,h,7));break;case 5:var b=null;switch(Se.tag){case 26:b=Se.memoizedState;case 5:case 27:var w=Se;if(!b||Um(b)){Re=0,Ut=null;var k=w.sibling;if(k!==null)Se=k;else{var B=w.return;B!==null?(Se=B,ci(B)):Se=null}break t}}Re=0,Ut=null,wr(e,t,h,5);break;case 6:Re=0,Ut=null,wr(e,t,h,6);break;case 8:Oc(),Xe=6;break e;default:throw Error(i(462))}}D0();break}catch(Z){Qh(e,Z)}while(!0);return va=Ss=null,E.H=l,E.A=d,Oe=a,Se!==null?0:(qe=null,$e=0,Al(),Xe)}function D0(){for(;Se!==null&&!Le();)Wh(Se)}function Wh(e){var t=Eh(e.alternate,e,Ea);e.memoizedProps=e.pendingProps,t===null?ci(e):Se=t}function em(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=yh(a,t,t.pendingProps,t.type,void 0,$e);break;case 11:t=yh(a,t,t.pendingProps,t.type.render,t.ref,$e);break;case 5:Xo(t);default:$h(a,t),t=Se=ef(t,Ea),t=Eh(a,t,Ea)}e.memoizedProps=e.pendingProps,t===null?ci(e):Se=t}function wr(e,t,a,l){va=Ss=null,Xo(t),hr=null,Cn=0;var d=t.return;try{if(S0(e,d,t,a,$e)){Xe=1,ei(e,Pt(a,e.current)),Se=null;return}}catch(h){if(d!==null)throw Se=d,h;Xe=1,ei(e,Pt(a,e.current)),Se=null;return}t.flags&32768?(Te||l===1?e=!0:xr||($e&536870912)!==0?e=!1:(Za=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ft.current,l!==null&&l.tag===13&&(l.flags|=16384))),tm(t,e)):ci(t)}function ci(e){var t=e;do{if((t.flags&32768)!==0){tm(t,Za);return}e=t.return;var a=C0(t.alternate,t,Ea);if(a!==null){Se=a;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Xe===0&&(Xe=5)}function tm(e,t){do{var a=$0(e.alternate,e);if(a!==null){a.flags&=32767,Se=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=a}while(e!==null);Xe=6,Se=null}function am(e,t,a,l,d,h,b,w,k){e.cancelPendingCommit=null;do ui();while(ft!==0);if((Oe&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(h=t.lanes|t.childLanes,h|=No,mx(e,a,h,b,w,k),e===qe&&(Se=qe=null,$e=0),br=t,es=e,yr=a,kc=h,Ac=d,Fh=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,q0(pl,function(){return im(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=E.T,E.T=null,d=T.p,T.p=2,b=Oe,Oe|=4;try{k0(e,t,a)}finally{Oe=b,T.p=d,E.T=l}}ft=1,sm(),rm(),nm()}}function sm(){if(ft===1){ft=0;var e=es,t=br,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=E.T,E.T=null;var l=T.p;T.p=2;var d=Oe;Oe|=4;try{Bh(t,e);var h=Fc,b=Vd(e.containerInfo),w=h.focusedElem,k=h.selectionRange;if(b!==w&&w&&w.ownerDocument&&Gd(w.ownerDocument.documentElement,w)){if(k!==null&&bo(w)){var B=k.start,Z=k.end;if(Z===void 0&&(Z=B),"selectionStart"in w)w.selectionStart=B,w.selectionEnd=Math.min(Z,w.value.length);else{var te=w.ownerDocument||document,G=te&&te.defaultView||window;if(G.getSelection){var V=G.getSelection(),ge=w.textContent.length,me=Math.min(k.start,ge),De=k.end===void 0?me:Math.min(k.end,ge);!V.extend&&me>De&&(b=De,De=me,me=b);var z=Pd(w,me),M=Pd(w,De);if(z&&M&&(V.rangeCount!==1||V.anchorNode!==z.node||V.anchorOffset!==z.offset||V.focusNode!==M.node||V.focusOffset!==M.offset)){var L=te.createRange();L.setStart(z.node,z.offset),V.removeAllRanges(),me>De?(V.addRange(L),V.extend(M.node,M.offset)):(L.setEnd(M.node,M.offset),V.addRange(L))}}}}for(te=[],V=w;V=V.parentNode;)V.nodeType===1&&te.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var J=te[w];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}wi=!!Yc,Fc=Yc=null}finally{Oe=d,T.p=l,E.T=a}}e.current=t,ft=2}}function rm(){if(ft===2){ft=0;var e=es,t=br,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=E.T,E.T=null;var l=T.p;T.p=2;var d=Oe;Oe|=4;try{Uh(e,t.alternate,t)}finally{Oe=d,T.p=l,E.T=a}}ft=3}}function nm(){if(ft===4||ft===3){ft=0,ve();var e=es,t=br,a=yr,l=Fh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ft=5:(ft=0,br=es=null,lm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Wa=null),Zi(a),t=t.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Zr,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=E.T,d=T.p,T.p=2,E.T=null;try{for(var h=e.onRecoverableError,b=0;b<l.length;b++){var w=l[b];h(w.value,{componentStack:w.stack})}}finally{E.T=t,T.p=d}}(yr&3)!==0&&ui(),oa(e),d=e.pendingLanes,(a&4194090)!==0&&(d&42)!==0?e===Tc?Dn++:(Dn=0,Tc=e):Dn=0,zn(0)}}function lm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gn(t)))}function ui(e){return sm(),rm(),nm(),im()}function im(){if(ft!==5)return!1;var e=es,t=kc;kc=0;var a=Zi(yr),l=E.T,d=T.p;try{T.p=32>a?32:a,E.T=null,a=Ac,Ac=null;var h=es,b=yr;if(ft=0,br=es=null,yr=0,(Oe&6)!==0)throw Error(i(331));var w=Oe;if(Oe|=4,Vh(h.current),Hh(h,h.current,b,a),Oe=w,zn(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Zr,h)}catch{}return!0}finally{T.p=d,E.T=l,lm(e,t)}}function om(e,t,a){t=Pt(a,t),t=cc(e.stateNode,t,2),e=Va(e,t,2),e!==null&&(Wr(e,2),oa(e))}function ze(e,t,a){if(e.tag===3)om(e,e,a);else for(;t!==null;){if(t.tag===3){om(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Wa===null||!Wa.has(l))){e=Pt(a,e),a=fh(2),l=Va(t,a,2),l!==null&&(hh(a,l,t,e),Wr(l,2),oa(l));break}}t=t.return}}function Uc(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new O0;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(a)||(Sc=!0,d.add(a),e=z0.bind(null,e,t,a),t.then(e,e))}function z0(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,qe===e&&($e&a)===a&&(Xe===4||Xe===3&&($e&62914560)===$e&&300>xe()-$c?(Oe&2)===0&&jr(e,0):Ec|=a,vr===$e&&(vr=0)),oa(e)}function cm(e,t){t===0&&(t=rd()),e=sr(e,t),e!==null&&(Wr(e,t),oa(e))}function L0(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),cm(e,a)}function B0(e,t){var a=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(t),cm(e,a)}function q0(e,t){return za(e,t)}var di=null,_r=null,Dc=!1,fi=!1,zc=!1,Os=0;function oa(e){e!==_r&&e.next===null&&(_r===null?di=_r=e:_r=_r.next=e),fi=!0,Dc||(Dc=!0,P0())}function zn(e,t){if(!zc&&fi){zc=!0;do for(var a=!1,l=di;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var b=l.suspendedLanes,w=l.pingedLanes;h=(1<<31-At(42|e)+1)-1,h&=d&~(b&~w),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,hm(l,h))}else h=$e,h=vl(l,l===qe?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||Jr(l,h)||(a=!0,hm(l,h));l=l.next}while(a);zc=!1}}function H0(){um()}function um(){fi=Dc=!1;var e=0;Os!==0&&(Q0()&&(e=Os),Os=0);for(var t=xe(),a=null,l=di;l!==null;){var d=l.next,h=dm(l,t);h===0?(l.next=null,a===null?di=d:a.next=d,d===null&&(_r=a)):(a=l,(e!==0||(h&3)!==0)&&(fi=!0)),l=d}zn(e)}function dm(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var b=31-At(h),w=1<<b,k=d[b];k===-1?((w&a)===0||(w&l)!==0)&&(d[b]=hx(w,t)):k<=t&&(e.expiredLanes|=w),h&=~w}if(t=qe,a=$e,a=vl(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(Re===2||Re===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&ms(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Jr(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&ms(l),Zi(a)){case 2:case 8:a=td;break;case 32:a=pl;break;case 268435456:a=ad;break;default:a=pl}return l=fm.bind(null,e),a=za(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&ms(l),e.callbackPriority=2,e.callbackNode=null,2}function fm(e,t){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ui()&&e.callbackNode!==a)return null;var l=$e;return l=vl(e,e===qe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Ih(e,l,t),dm(e,xe()),e.callbackNode!=null&&e.callbackNode===a?fm.bind(null,e):null)}function hm(e,t){if(ui())return null;Ih(e,t,!0)}function P0(){J0(function(){(Oe&6)!==0?za(Pe,H0):um()})}function Lc(){return Os===0&&(Os=sd()),Os}function mm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:_l(""+e)}function pm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function G0(e,t,a,l,d){if(t==="submit"&&a&&a.stateNode===d){var h=mm((d[jt]||null).action),b=l.submitter;b&&(t=(t=b[jt]||null)?mm(t.formAction):b.getAttribute("formAction"),t!==null&&(h=t,b=null));var w=new Cl("action","action",null,l,d);e.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Os!==0){var k=b?pm(d,b):new FormData(d);rc(a,{pending:!0,data:k,method:d.method,action:h},null,k)}}else typeof h=="function"&&(w.preventDefault(),k=b?pm(d,b):new FormData(d),rc(a,{pending:!0,data:k,method:d.method,action:h},h,k))},currentTarget:d}]})}}for(var Bc=0;Bc<_o.length;Bc++){var qc=_o[Bc],V0=qc.toLowerCase(),Y0=qc[0].toUpperCase()+qc.slice(1);Zt(V0,"on"+Y0)}Zt(Kd,"onAnimationEnd"),Zt(Id,"onAnimationIteration"),Zt(Xd,"onAnimationStart"),Zt("dblclick","onDoubleClick"),Zt("focusin","onFocus"),Zt("focusout","onBlur"),Zt(o0,"onTransitionRun"),Zt(c0,"onTransitionStart"),Zt(u0,"onTransitionCancel"),Zt(Qd,"onTransitionEnd"),Ks("onMouseEnter",["mouseout","mouseover"]),Ks("onMouseLeave",["mouseout","mouseover"]),Ks("onPointerEnter",["pointerout","pointerover"]),Ks("onPointerLeave",["pointerout","pointerover"]),gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ln));function gm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],d=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var b=l.length-1;0<=b;b--){var w=l[b],k=w.instance,B=w.currentTarget;if(w=w.listener,k!==h&&d.isPropagationStopped())break e;h=w,d.currentTarget=B;try{h(d)}catch(Z){Wl(Z)}d.currentTarget=null,h=k}else for(b=0;b<l.length;b++){if(w=l[b],k=w.instance,B=w.currentTarget,w=w.listener,k!==h&&d.isPropagationStopped())break e;h=w,d.currentTarget=B;try{h(d)}catch(Z){Wl(Z)}d.currentTarget=null,h=k}}}}function Ee(e,t){var a=t[Ji];a===void 0&&(a=t[Ji]=new Set);var l=e+"__bubble";a.has(l)||(xm(t,e,2,!1),a.add(l))}function Hc(e,t,a){var l=0;t&&(l|=4),xm(a,e,l,t)}var hi="_reactListening"+Math.random().toString(36).slice(2);function Pc(e){if(!e[hi]){e[hi]=!0,cd.forEach(function(a){a!=="selectionchange"&&(F0.has(a)||Hc(a,!1,e),Hc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hi]||(t[hi]=!0,Hc("selectionchange",!1,t))}}function xm(e,t,a,l){switch(Hm(t)){case 2:var d=bv;break;case 8:d=yv;break;default:d=au}a=d.bind(null,t,a,e),d=void 0,!co||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,a,{capture:!0,passive:d}):e.addEventListener(t,a,!0):d!==void 0?e.addEventListener(t,a,{passive:d}):e.addEventListener(t,a,!1)}function Gc(e,t,a,l,d){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var w=l.stateNode.containerInfo;if(w===d)break;if(b===4)for(b=l.return;b!==null;){var k=b.tag;if((k===3||k===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;w!==null;){if(b=Vs(w),b===null)return;if(k=b.tag,k===5||k===6||k===26||k===27){l=h=b;continue e}w=w.parentNode}}l=l.return}_d(function(){var B=h,Z=io(a),te=[];e:{var G=Zd.get(e);if(G!==void 0){var V=Cl,ge=e;switch(e){case"keypress":if(Sl(a)===0)break e;case"keydown":case"keyup":V=qx;break;case"focusin":ge="focus",V=mo;break;case"focusout":ge="blur",V=mo;break;case"beforeblur":case"afterblur":V=mo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Ed;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=$x;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Gx;break;case Kd:case Id:case Xd:V=Tx;break;case Qd:V=Yx;break;case"scroll":case"scrollend":V=Ex;break;case"wheel":V=Kx;break;case"copy":case"cut":case"paste":V=Rx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=$d;break;case"toggle":case"beforetoggle":V=Xx}var me=(t&4)!==0,De=!me&&(e==="scroll"||e==="scrollend"),z=me?G!==null?G+"Capture":null:G;me=[];for(var M=B,L;M!==null;){var J=M;if(L=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||L===null||z===null||(J=an(M,z),J!=null&&me.push(Bn(M,J,L))),De)break;M=M.return}0<me.length&&(G=new V(G,ge,null,a,Z),te.push({event:G,listeners:me}))}}if((t&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",G&&a!==lo&&(ge=a.relatedTarget||a.fromElement)&&(Vs(ge)||ge[Gs]))break e;if((V||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,V?(ge=a.relatedTarget||a.toElement,V=B,ge=ge?Vs(ge):null,ge!==null&&(De=u(ge),me=ge.tag,ge!==De||me!==5&&me!==27&&me!==6)&&(ge=null)):(V=null,ge=B),V!==ge)){if(me=Ed,J="onMouseLeave",z="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(me=$d,J="onPointerLeave",z="onPointerEnter",M="pointer"),De=V==null?G:tn(V),L=ge==null?G:tn(ge),G=new me(J,M+"leave",V,a,Z),G.target=De,G.relatedTarget=L,J=null,Vs(Z)===B&&(me=new me(z,M+"enter",ge,a,Z),me.target=L,me.relatedTarget=De,J=me),De=J,V&&ge)t:{for(me=V,z=ge,M=0,L=me;L;L=Nr(L))M++;for(L=0,J=z;J;J=Nr(J))L++;for(;0<M-L;)me=Nr(me),M--;for(;0<L-M;)z=Nr(z),L--;for(;M--;){if(me===z||z!==null&&me===z.alternate)break t;me=Nr(me),z=Nr(z)}me=null}else me=null;V!==null&&vm(te,G,V,me,!1),ge!==null&&De!==null&&vm(te,De,ge,me,!0)}}e:{if(G=B?tn(B):window,V=G.nodeName&&G.nodeName.toLowerCase(),V==="select"||V==="input"&&G.type==="file")var ie=Dd;else if(Md(G))if(zd)ie=n0;else{ie=s0;var Ne=a0}else V=G.nodeName,!V||V.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?B&&no(B.elementType)&&(ie=Dd):ie=r0;if(ie&&(ie=ie(e,B))){Ud(te,ie,a,Z);break e}Ne&&Ne(e,G,B),e==="focusout"&&B&&G.type==="number"&&B.memoizedProps.value!=null&&ro(G,"number",G.value)}switch(Ne=B?tn(B):window,e){case"focusin":(Md(Ne)||Ne.contentEditable==="true")&&(er=Ne,yo=B,dn=null);break;case"focusout":dn=yo=er=null;break;case"mousedown":jo=!0;break;case"contextmenu":case"mouseup":case"dragend":jo=!1,Yd(te,a,Z);break;case"selectionchange":if(i0)break;case"keydown":case"keyup":Yd(te,a,Z)}var de;if(go)e:{switch(e){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Ws?Od(e,a)&&(pe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(pe="onCompositionStart");pe&&(kd&&a.locale!=="ko"&&(Ws||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Ws&&(de=Nd()):(qa=Z,uo="value"in qa?qa.value:qa.textContent,Ws=!0)),Ne=mi(B,pe),0<Ne.length&&(pe=new Cd(pe,e,null,a,Z),te.push({event:pe,listeners:Ne}),de?pe.data=de:(de=Rd(a),de!==null&&(pe.data=de)))),(de=Zx?Jx(e,a):Wx(e,a))&&(pe=mi(B,"onBeforeInput"),0<pe.length&&(Ne=new Cd("onBeforeInput","beforeinput",null,a,Z),te.push({event:Ne,listeners:pe}),Ne.data=de)),G0(te,e,B,a,Z)}gm(te,t)})}function Bn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function mi(e,t){for(var a=t+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=an(e,a),d!=null&&l.unshift(Bn(e,d,h)),d=an(e,t),d!=null&&l.push(Bn(e,d,h))),e.tag===3)return l;e=e.return}return[]}function Nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vm(e,t,a,l,d){for(var h=t._reactName,b=[];a!==null&&a!==l;){var w=a,k=w.alternate,B=w.stateNode;if(w=w.tag,k!==null&&k===l)break;w!==5&&w!==26&&w!==27||B===null||(k=B,d?(B=an(a,h),B!=null&&b.unshift(Bn(a,B,k))):d||(B=an(a,h),B!=null&&b.push(Bn(a,B,k)))),a=a.return}b.length!==0&&e.push({event:t,listeners:b})}var K0=/\r\n?/g,I0=/\u0000|\uFFFD/g;function bm(e){return(typeof e=="string"?e:""+e).replace(K0,`
`).replace(I0,"")}function ym(e,t){return t=bm(t),bm(e)===t}function pi(){}function Ue(e,t,a,l,d,h){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Qs(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Qs(e,""+l);break;case"className":yl(e,"class",l);break;case"tabIndex":yl(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":yl(e,a,l);break;case"style":jd(e,l,h);break;case"data":if(t!=="object"){yl(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=_l(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(t!=="input"&&Ue(e,t,"name",d.name,d,null),Ue(e,t,"formEncType",d.formEncType,d,null),Ue(e,t,"formMethod",d.formMethod,d,null),Ue(e,t,"formTarget",d.formTarget,d,null)):(Ue(e,t,"encType",d.encType,d,null),Ue(e,t,"method",d.method,d,null),Ue(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=_l(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=pi);break;case"onScroll":l!=null&&Ee("scroll",e);break;case"onScrollEnd":l!=null&&Ee("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=_l(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Ee("beforetoggle",e),Ee("toggle",e),bl(e,"popover",l);break;case"xlinkActuate":ha(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ha(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ha(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ha(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ha(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ha(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ha(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ha(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ha(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":bl(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Nx.get(a)||a,bl(e,a,l))}}function Vc(e,t,a,l,d,h){switch(a){case"style":jd(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Qs(e,l):(typeof l=="number"||typeof l=="bigint")&&Qs(e,""+l);break;case"onScroll":l!=null&&Ee("scroll",e);break;case"onScrollEnd":l!=null&&Ee("scrollend",e);break;case"onClick":l!=null&&(e.onclick=pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ud.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),t=a.slice(2,d?a.length-7:void 0),h=e[jt]||null,h=h!=null?h[a]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,d);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):bl(e,a,l)}}}function ht(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",e),Ee("load",e);var l=!1,d=!1,h;for(h in a)if(a.hasOwnProperty(h)){var b=a[h];if(b!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ue(e,t,h,b,a,null)}}d&&Ue(e,t,"srcSet",a.srcSet,a,null),l&&Ue(e,t,"src",a.src,a,null);return;case"input":Ee("invalid",e);var w=h=b=d=null,k=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":d=Z;break;case"type":b=Z;break;case"checked":k=Z;break;case"defaultChecked":B=Z;break;case"value":h=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,t));break;default:Ue(e,t,l,Z,a,null)}}xd(e,h,w,k,B,b,d,!1),jl(e);return;case"select":Ee("invalid",e),l=b=h=null;for(d in a)if(a.hasOwnProperty(d)&&(w=a[d],w!=null))switch(d){case"value":h=w;break;case"defaultValue":b=w;break;case"multiple":l=w;default:Ue(e,t,d,w,a,null)}t=h,a=b,e.multiple=!!l,t!=null?Xs(e,!!l,t,!1):a!=null&&Xs(e,!!l,a,!0);return;case"textarea":Ee("invalid",e),h=d=l=null;for(b in a)if(a.hasOwnProperty(b)&&(w=a[b],w!=null))switch(b){case"value":l=w;break;case"defaultValue":d=w;break;case"children":h=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Ue(e,t,b,w,a,null)}bd(e,l,d,h),jl(e);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ue(e,t,k,l,a,null)}return;case"dialog":Ee("beforetoggle",e),Ee("toggle",e),Ee("cancel",e),Ee("close",e);break;case"iframe":case"object":Ee("load",e);break;case"video":case"audio":for(l=0;l<Ln.length;l++)Ee(Ln[l],e);break;case"image":Ee("error",e),Ee("load",e);break;case"details":Ee("toggle",e);break;case"embed":case"source":case"link":Ee("error",e),Ee("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ue(e,t,B,l,a,null)}return;default:if(no(t)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&Vc(e,t,Z,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Ue(e,t,w,l,a,null))}function X0(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,b=null,w=null,k=null,B=null,Z=null;for(V in a){var te=a[V];if(a.hasOwnProperty(V)&&te!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":k=te;default:l.hasOwnProperty(V)||Ue(e,t,V,null,l,te)}}for(var G in l){var V=l[G];if(te=a[G],l.hasOwnProperty(G)&&(V!=null||te!=null))switch(G){case"type":h=V;break;case"name":d=V;break;case"checked":B=V;break;case"defaultChecked":Z=V;break;case"value":b=V;break;case"defaultValue":w=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,t));break;default:V!==te&&Ue(e,t,G,V,l,te)}}so(e,b,w,k,B,Z,h,d);return;case"select":V=b=w=G=null;for(h in a)if(k=a[h],a.hasOwnProperty(h)&&k!=null)switch(h){case"value":break;case"multiple":V=k;default:l.hasOwnProperty(h)||Ue(e,t,h,null,l,k)}for(d in l)if(h=l[d],k=a[d],l.hasOwnProperty(d)&&(h!=null||k!=null))switch(d){case"value":G=h;break;case"defaultValue":w=h;break;case"multiple":b=h;default:h!==k&&Ue(e,t,d,h,l,k)}t=w,a=b,l=V,G!=null?Xs(e,!!a,G,!1):!!l!=!!a&&(t!=null?Xs(e,!!a,t,!0):Xs(e,!!a,a?[]:"",!1));return;case"textarea":V=G=null;for(w in a)if(d=a[w],a.hasOwnProperty(w)&&d!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ue(e,t,w,null,l,d)}for(b in l)if(d=l[b],h=a[b],l.hasOwnProperty(b)&&(d!=null||h!=null))switch(b){case"value":G=d;break;case"defaultValue":V=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==h&&Ue(e,t,b,d,l,h)}vd(e,G,V);return;case"option":for(var ge in a)if(G=a[ge],a.hasOwnProperty(ge)&&G!=null&&!l.hasOwnProperty(ge))switch(ge){case"selected":e.selected=!1;break;default:Ue(e,t,ge,null,l,G)}for(k in l)if(G=l[k],V=a[k],l.hasOwnProperty(k)&&G!==V&&(G!=null||V!=null))switch(k){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Ue(e,t,k,G,l,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in a)G=a[me],a.hasOwnProperty(me)&&G!=null&&!l.hasOwnProperty(me)&&Ue(e,t,me,null,l,G);for(B in l)if(G=l[B],V=a[B],l.hasOwnProperty(B)&&G!==V&&(G!=null||V!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,t));break;default:Ue(e,t,B,G,l,V)}return;default:if(no(t)){for(var De in a)G=a[De],a.hasOwnProperty(De)&&G!==void 0&&!l.hasOwnProperty(De)&&Vc(e,t,De,void 0,l,G);for(Z in l)G=l[Z],V=a[Z],!l.hasOwnProperty(Z)||G===V||G===void 0&&V===void 0||Vc(e,t,Z,G,l,V);return}}for(var z in a)G=a[z],a.hasOwnProperty(z)&&G!=null&&!l.hasOwnProperty(z)&&Ue(e,t,z,null,l,G);for(te in l)G=l[te],V=a[te],!l.hasOwnProperty(te)||G===V||G==null&&V==null||Ue(e,t,te,G,l,V)}var Yc=null,Fc=null;function gi(e){return e.nodeType===9?e:e.ownerDocument}function jm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Kc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ic=null;function Q0(){var e=window.event;return e&&e.type==="popstate"?e===Ic?!1:(Ic=e,!0):(Ic=null,!1)}var _m=typeof setTimeout=="function"?setTimeout:void 0,Z0=typeof clearTimeout=="function"?clearTimeout:void 0,Nm=typeof Promise=="function"?Promise:void 0,J0=typeof queueMicrotask=="function"?queueMicrotask:typeof Nm<"u"?function(e){return Nm.resolve(null).then(e).catch(W0)}:_m;function W0(e){setTimeout(function(){throw e})}function as(e){return e==="head"}function Sm(e,t){var a=t,l=0,d=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(0<l&&8>l){a=l;var b=e.ownerDocument;if(a&1&&qn(b.documentElement),a&2&&qn(b.body),a&4)for(a=b.head,qn(a),b=a.firstChild;b;){var w=b.nextSibling,k=b.nodeName;b[en]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=w}}if(d===0){e.removeChild(h),In(t);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=h}while(a);In(t)}function Xc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Xc(a),Wi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function ev(e,t,a,l){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[en])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Wt(e.nextSibling),e===null)break}return null}function tv(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Wt(e.nextSibling),e===null))return null;return e}function Qc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function av(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Wt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Zc=null;function Em(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function Cm(e,t,a){switch(t=gi(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function qn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Wi(e)}var It=new Map,$m=new Set;function xi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ca=T.d;T.d={f:sv,r:rv,D:nv,C:lv,L:iv,m:ov,X:uv,S:cv,M:dv};function sv(){var e=Ca.f(),t=oi();return e||t}function rv(e){var t=Ys(e);t!==null&&t.tag===5&&t.type==="form"?If(t):Ca.r(e)}var Sr=typeof document>"u"?null:document;function km(e,t,a){var l=Sr;if(l&&typeof t=="string"&&t){var d=Ht(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),$m.has(d)||($m.add(d),e={rel:e,crossOrigin:a,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),ht(t,"link",e),nt(t),l.head.appendChild(t)))}}function nv(e){Ca.D(e),km("dns-prefetch",e,null)}function lv(e,t){Ca.C(e,t),km("preconnect",e,t)}function iv(e,t,a){Ca.L(e,t,a);var l=Sr;if(l&&e&&t){var d='link[rel="preload"][as="'+Ht(t)+'"]';t==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Ht(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Ht(a.imageSizes)+'"]')):d+='[href="'+Ht(e)+'"]';var h=d;switch(t){case"style":h=Er(e);break;case"script":h=Cr(e)}It.has(h)||(e=x({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),It.set(h,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(Hn(h))||t==="script"&&l.querySelector(Pn(h))||(t=l.createElement("link"),ht(t,"link",e),nt(t),l.head.appendChild(t)))}}function ov(e,t){Ca.m(e,t);var a=Sr;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Ht(l)+'"][href="'+Ht(e)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Cr(e)}if(!It.has(h)&&(e=x({rel:"modulepreload",href:e},t),It.set(h,e),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pn(h)))return}l=a.createElement("link"),ht(l,"link",e),nt(l),a.head.appendChild(l)}}}function cv(e,t,a){Ca.S(e,t,a);var l=Sr;if(l&&e){var d=Fs(l).hoistableStyles,h=Er(e);t=t||"default";var b=d.get(h);if(!b){var w={loading:0,preload:null};if(b=l.querySelector(Hn(h)))w.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},a),(a=It.get(h))&&Jc(e,a);var k=b=l.createElement("link");nt(k),ht(k,"link",e),k._p=new Promise(function(B,Z){k.onload=B,k.onerror=Z}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,vi(b,t,l)}b={type:"stylesheet",instance:b,count:1,state:w},d.set(h,b)}}}function uv(e,t){Ca.X(e,t);var a=Sr;if(a&&e){var l=Fs(a).hoistableScripts,d=Cr(e),h=l.get(d);h||(h=a.querySelector(Pn(d)),h||(e=x({src:e,async:!0},t),(t=It.get(d))&&Wc(e,t),h=a.createElement("script"),nt(h),ht(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function dv(e,t){Ca.M(e,t);var a=Sr;if(a&&e){var l=Fs(a).hoistableScripts,d=Cr(e),h=l.get(d);h||(h=a.querySelector(Pn(d)),h||(e=x({src:e,async:!0,type:"module"},t),(t=It.get(d))&&Wc(e,t),h=a.createElement("script"),nt(h),ht(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function Am(e,t,a,l){var d=(d=ue.current)?xi(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Er(a.href),a=Fs(d).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Er(a.href);var h=Fs(d).hoistableStyles,b=h.get(e);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,b),(h=d.querySelector(Hn(e)))&&!h._p&&(b.instance=h,b.state.loading=5),It.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},It.set(e,a),h||fv(d,e,a,b.state))),t&&l===null)throw Error(i(528,""));return b}if(t&&l!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Cr(a),a=Fs(d).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Er(e){return'href="'+Ht(e)+'"'}function Hn(e){return'link[rel="stylesheet"]['+e+"]"}function Tm(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function fv(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ht(t,"link",a),nt(t),e.head.appendChild(t))}function Cr(e){return'[src="'+Ht(e)+'"]'}function Pn(e){return"script[async]"+e}function Om(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Ht(a.href)+'"]');if(l)return t.instance=l,nt(l),l;var d=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),nt(l),ht(l,"style",d),vi(l,a.precedence,e),t.instance=l;case"stylesheet":d=Er(a.href);var h=e.querySelector(Hn(d));if(h)return t.state.loading|=4,t.instance=h,nt(h),h;l=Tm(a),(d=It.get(d))&&Jc(l,d),h=(e.ownerDocument||e).createElement("link"),nt(h);var b=h;return b._p=new Promise(function(w,k){b.onload=w,b.onerror=k}),ht(h,"link",l),t.state.loading|=4,vi(h,a.precedence,e),t.instance=h;case"script":return h=Cr(a.src),(d=e.querySelector(Pn(h)))?(t.instance=d,nt(d),d):(l=a,(d=It.get(h))&&(l=x({},a),Wc(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),nt(d),ht(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,vi(l,a.precedence,e));return t.instance}function vi(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,b=0;b<l.length;b++){var w=l[b];if(w.dataset.precedence===t)h=w;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Jc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Wc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var bi=null;function Rm(e,t,a){if(bi===null){var l=new Map,d=bi=new Map;d.set(a,l)}else d=bi,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var h=a[d];if(!(h[en]||h[pt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var b=h.getAttribute(t)||"";b=e+b;var w=l.get(b);w?w.push(h):l.set(b,[h])}}return l}function Mm(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function hv(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Um(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Gn=null;function mv(){}function pv(e,t,a){if(Gn===null)throw Error(i(475));var l=Gn;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var d=Er(a.href),h=e.querySelector(Hn(d));if(h){e=h._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=yi.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=h,nt(h);return}h=e.ownerDocument||e,a=Tm(a),(d=It.get(d))&&Jc(a,d),h=h.createElement("link"),nt(h);var b=h;b._p=new Promise(function(w,k){b.onload=w,b.onerror=k}),ht(h,"link",a),t.instance=h}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=yi.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function gv(){if(Gn===null)throw Error(i(475));var e=Gn;return e.stylesheets&&e.count===0&&eu(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&eu(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function yi(){if(this.count--,this.count===0){if(this.stylesheets)eu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ji=null;function eu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ji=new Map,t.forEach(xv,e),ji=null,yi.call(e))}function xv(e,t){if(!(t.state.loading&4)){var a=ji.get(e);if(a)var l=a.get(null);else{a=new Map,ji.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var b=d[h];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}d=t.instance,b=d.getAttribute("data-precedence"),h=a.get(b)||l,h===l&&a.set(null,d),a.set(b,d),this.count++,l=yi.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var Vn={$$typeof:U,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function vv(e,t,a,l,d,h,b,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xi(0),this.hiddenUpdates=Xi(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Dm(e,t,a,l,d,h,b,w,k,B,Z,te){return e=new vv(e,t,a,b,w,k,B,te),t=1,h===!0&&(t|=24),h=Ot(3,null,null,t),e.current=h,h.stateNode=e,t=Uo(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:l,isDehydrated:a,cache:t},Bo(h),e}function zm(e){return e?(e=rr,e):rr}function Lm(e,t,a,l,d,h){d=zm(d),l.context===null?l.context=d:l.pendingContext=d,l=Ga(t),l.payload={element:a},h=h===void 0?null:h,h!==null&&(l.callback=h),a=Va(e,l,t),a!==null&&(zt(a,e,t),yn(a,e,t))}function Bm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function tu(e,t){Bm(e,t),(e=e.alternate)&&Bm(e,t)}function qm(e){if(e.tag===13){var t=sr(e,67108864);t!==null&&zt(t,e,67108864),tu(e,67108864)}}var wi=!0;function bv(e,t,a,l){var d=E.T;E.T=null;var h=T.p;try{T.p=2,au(e,t,a,l)}finally{T.p=h,E.T=d}}function yv(e,t,a,l){var d=E.T;E.T=null;var h=T.p;try{T.p=8,au(e,t,a,l)}finally{T.p=h,E.T=d}}function au(e,t,a,l){if(wi){var d=su(l);if(d===null)Gc(e,t,l,_i,a),Pm(e,l);else if(wv(d,e,t,a,l))l.stopPropagation();else if(Pm(e,l),t&4&&-1<jv.indexOf(e)){for(;d!==null;){var h=Ys(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var b=ps(h.pendingLanes);if(b!==0){var w=h;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var k=1<<31-At(b);w.entanglements[1]|=k,b&=~k}oa(h),(Oe&6)===0&&(li=xe()+500,zn(0))}}break;case 13:w=sr(h,2),w!==null&&zt(w,h,2),oi(),tu(h,2)}if(h=su(l),h===null&&Gc(e,t,l,_i,a),h===d)break;d=h}d!==null&&l.stopPropagation()}else Gc(e,t,l,null,a)}}function su(e){return e=io(e),ru(e)}var _i=null;function ru(e){if(_i=null,e=Vs(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return _i=e,null}function Hm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Be()){case Pe:return 2;case td:return 8;case pl:case ix:return 32;case ad:return 268435456;default:return 32}default:return 32}}var nu=!1,ss=null,rs=null,ns=null,Yn=new Map,Fn=new Map,ls=[],jv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pm(e,t){switch(e){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Yn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fn.delete(t.pointerId)}}function Kn(e,t,a,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},t!==null&&(t=Ys(t),t!==null&&qm(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function wv(e,t,a,l,d){switch(t){case"focusin":return ss=Kn(ss,e,t,a,l,d),!0;case"dragenter":return rs=Kn(rs,e,t,a,l,d),!0;case"mouseover":return ns=Kn(ns,e,t,a,l,d),!0;case"pointerover":var h=d.pointerId;return Yn.set(h,Kn(Yn.get(h)||null,e,t,a,l,d)),!0;case"gotpointercapture":return h=d.pointerId,Fn.set(h,Kn(Fn.get(h)||null,e,t,a,l,d)),!0}return!1}function Gm(e){var t=Vs(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,px(e.priority,function(){if(a.tag===13){var l=Dt();l=Qi(l);var d=sr(a,l);d!==null&&zt(d,a,l),tu(a,l)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ni(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=su(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);lo=l,a.target.dispatchEvent(l),lo=null}else return t=Ys(a),t!==null&&qm(t),e.blockedOn=a,!1;t.shift()}return!0}function Vm(e,t,a){Ni(e)&&a.delete(t)}function _v(){nu=!1,ss!==null&&Ni(ss)&&(ss=null),rs!==null&&Ni(rs)&&(rs=null),ns!==null&&Ni(ns)&&(ns=null),Yn.forEach(Vm),Fn.forEach(Vm)}function Si(e,t){e.blockedOn===t&&(e.blockedOn=null,nu||(nu=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,_v)))}var Ei=null;function Ym(e){Ei!==e&&(Ei=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Ei===e&&(Ei=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(ru(l||a)===null)continue;break}var h=Ys(a);h!==null&&(e.splice(t,3),t-=3,rc(h,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function In(e){function t(k){return Si(k,e)}ss!==null&&Si(ss,e),rs!==null&&Si(rs,e),ns!==null&&Si(ns,e),Yn.forEach(t),Fn.forEach(t);for(var a=0;a<ls.length;a++){var l=ls[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ls.length&&(a=ls[0],a.blockedOn===null);)Gm(a),a.blockedOn===null&&ls.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],h=a[l+1],b=d[jt]||null;if(typeof h=="function")b||Ym(a);else if(b){var w=null;if(h&&h.hasAttribute("formAction")){if(d=h,b=h[jt]||null)w=b.formAction;else if(ru(d)!==null)continue}else w=b.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Ym(a)}}}function lu(e){this._internalRoot=e}Ci.prototype.render=lu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,l=Dt();Lm(a,l,e,t,null,null)},Ci.prototype.unmount=lu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Lm(e.current,2,null,e,null,null),oi(),t[Gs]=null}};function Ci(e){this._internalRoot=e}Ci.prototype.unstable_scheduleHydration=function(e){if(e){var t=id();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ls.length&&t!==0&&t<ls[a].priority;a++);ls.splice(a,0,e),a===0&&Gm(e)}};var Fm=n.version;if(Fm!=="19.1.1")throw Error(i(527,Fm,"19.1.1"));T.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=g(t),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var Nv={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$i.isDisabled&&$i.supportsFiber)try{Zr=$i.inject(Nv),kt=$i}catch{}}return Qn.createRoot=function(e,t){if(!c(e))throw Error(i(299));var a=!1,l="",d=oh,h=ch,b=uh,w=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(w=t.unstable_transitionCallbacks)),t=Dm(e,1,!1,null,null,a,l,d,h,b,w,null),e[Gs]=t.current,Pc(e),new lu(t)},Qn.hydrateRoot=function(e,t,a){if(!c(e))throw Error(i(299));var l=!1,d="",h=oh,b=ch,w=uh,k=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(k=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),t=Dm(e,1,!0,t,a??null,l,d,h,b,w,k,B),t.context=zm(null),a=t.current,l=Dt(),l=Qi(l),d=Ga(l),d.callback=null,Va(a,d,l),a=l,t.current.lanes=a,Wr(t,a),oa(t),e[Gs]=t.current,Pc(e),new Ci(t)},Qn.version="19.1.1",Qn}var ap;function Uv(){if(ap)return cu.exports;ap=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),cu.exports=Mv(),cu.exports}var Dv=Uv();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sp="popstate";function zv(o={}){function n(i,c){let{pathname:u,search:f,hash:p}=i.location;return Su("",{pathname:u,search:f,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(i,c){return typeof c=="string"?c:ll(c)}return Bv(n,r,null,o)}function Ve(o,n){if(o===!1||o===null||typeof o>"u")throw new Error(n)}function Xt(o,n){if(!o){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Lv(){return Math.random().toString(36).substring(2,10)}function rp(o,n){return{usr:o.state,key:o.key,idx:n}}function Su(o,n,r=null,i){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof n=="string"?Gr(n):n,state:r,key:n&&n.key||i||Lv()}}function ll({pathname:o="/",search:n="",hash:r=""}){return n&&n!=="?"&&(o+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(o+=r.charAt(0)==="#"?r:"#"+r),o}function Gr(o){let n={};if(o){let r=o.indexOf("#");r>=0&&(n.hash=o.substring(r),o=o.substring(0,r));let i=o.indexOf("?");i>=0&&(n.search=o.substring(i),o=o.substring(0,i)),o&&(n.pathname=o)}return n}function Bv(o,n,r,i={}){let{window:c=document.defaultView,v5Compat:u=!1}=i,f=c.history,p="POP",g=null,m=x();m==null&&(m=0,f.replaceState({...f.state,idx:m},""));function x(){return(f.state||{idx:null}).idx}function v(){p="POP";let $=x(),O=$==null?null:$-m;m=$,g&&g({action:p,location:C.location,delta:O})}function y($,O){p="PUSH";let D=Su(C.location,$,O);m=x()+1;let U=rp(D,m),A=C.createHref(D);try{f.pushState(U,"",A)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;c.location.assign(A)}u&&g&&g({action:p,location:C.location,delta:1})}function S($,O){p="REPLACE";let D=Su(C.location,$,O);m=x();let U=rp(D,m),A=C.createHref(D);f.replaceState(U,"",A),u&&g&&g({action:p,location:C.location,delta:0})}function j($){return qv($)}let C={get action(){return p},get location(){return o(c,f)},listen($){if(g)throw new Error("A history only accepts one active listener");return c.addEventListener(sp,v),g=$,()=>{c.removeEventListener(sp,v),g=null}},createHref($){return n(c,$)},createURL:j,encodeLocation($){let O=j($);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:y,replace:S,go($){return f.go($)}};return C}function qv(o,n=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ve(r,"No window.location.(origin|href) available to create URL");let i=typeof o=="string"?o:ll(o);return i=i.replace(/ $/,"%20"),!n&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function Kp(o,n,r="/"){return Hv(o,n,r,!1)}function Hv(o,n,r,i){let c=typeof n=="string"?Gr(n):n,u=Da(c.pathname||"/",r);if(u==null)return null;let f=Ip(o);Pv(f);let p=null;for(let g=0;p==null&&g<f.length;++g){let m=Wv(u);p=Zv(f[g],m,i)}return p}function Ip(o,n=[],r=[],i=""){let c=(u,f,p)=>{let g={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};g.relativePath.startsWith("/")&&(Ve(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length));let m=Ma([i,g.relativePath]),x=r.concat(g);u.children&&u.children.length>0&&(Ve(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Ip(u.children,n,x,m)),!(u.path==null&&!u.index)&&n.push({path:m,score:Xv(m,u.index),routesMeta:x})};return o.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))c(u,f);else for(let p of Xp(u.path))c(u,f,p)}),n}function Xp(o){let n=o.split("/");if(n.length===0)return[];let[r,...i]=n,c=r.endsWith("?"),u=r.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let f=Xp(i.join("/")),p=[];return p.push(...f.map(g=>g===""?u:[u,g].join("/"))),c&&p.push(...f),p.map(g=>o.startsWith("/")&&g===""?"/":g)}function Pv(o){o.sort((n,r)=>n.score!==r.score?r.score-n.score:Qv(n.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var Gv=/^:[\w-]+$/,Vv=3,Yv=2,Fv=1,Kv=10,Iv=-2,np=o=>o==="*";function Xv(o,n){let r=o.split("/"),i=r.length;return r.some(np)&&(i+=Iv),n&&(i+=Yv),r.filter(c=>!np(c)).reduce((c,u)=>c+(Gv.test(u)?Vv:u===""?Fv:Kv),i)}function Qv(o,n){return o.length===n.length&&o.slice(0,-1).every((i,c)=>i===n[c])?o[o.length-1]-n[n.length-1]:0}function Zv(o,n,r=!1){let{routesMeta:i}=o,c={},u="/",f=[];for(let p=0;p<i.length;++p){let g=i[p],m=p===i.length-1,x=u==="/"?n:n.slice(u.length)||"/",v=qi({path:g.relativePath,caseSensitive:g.caseSensitive,end:m},x),y=g.route;if(!v&&m&&r&&!i[i.length-1].route.index&&(v=qi({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!v)return null;Object.assign(c,v.params),f.push({params:c,pathname:Ma([u,v.pathname]),pathnameBase:sb(Ma([u,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(u=Ma([u,v.pathnameBase]))}return f}function qi(o,n){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[r,i]=Jv(o.path,o.caseSensitive,o.end),c=n.match(r);if(!c)return null;let u=c[0],f=u.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:i.reduce((m,{paramName:x,isOptional:v},y)=>{if(x==="*"){let j=p[y]||"";f=u.slice(0,u.length-j.length).replace(/(.)\/+$/,"$1")}const S=p[y];return v&&!S?m[x]=void 0:m[x]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:u,pathnameBase:f,pattern:o}}function Jv(o,n=!1,r=!0){Xt(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let i=[],c="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(i.push({paramName:"*"}),c+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?c+="\\/*$":o!==""&&o!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,n?void 0:"i"),i]}function Wv(o){try{return o.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Xt(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),o}}function Da(o,n){if(n==="/")return o;if(!o.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,i=o.charAt(r);return i&&i!=="/"?null:o.slice(r)||"/"}function eb(o,n="/"){let{pathname:r,search:i="",hash:c=""}=typeof o=="string"?Gr(o):o;return{pathname:r?r.startsWith("/")?r:tb(r,n):n,search:rb(i),hash:nb(c)}}function tb(o,n){let r=n.replace(/\/+$/,"").split("/");return o.split("/").forEach(c=>{c===".."?r.length>1&&r.pop():c!=="."&&r.push(c)}),r.length>1?r.join("/"):"/"}function hu(o,n,r,i){return`Cannot include a '${o}' character in a manually specified \`to.${n}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ab(o){return o.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function qu(o){let n=ab(o);return n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase)}function Hu(o,n,r,i=!1){let c;typeof o=="string"?c=Gr(o):(c={...o},Ve(!c.pathname||!c.pathname.includes("?"),hu("?","pathname","search",c)),Ve(!c.pathname||!c.pathname.includes("#"),hu("#","pathname","hash",c)),Ve(!c.search||!c.search.includes("#"),hu("#","search","hash",c)));let u=o===""||c.pathname==="",f=u?"/":c.pathname,p;if(f==null)p=r;else{let v=n.length-1;if(!i&&f.startsWith("..")){let y=f.split("/");for(;y[0]==="..";)y.shift(),v-=1;c.pathname=y.join("/")}p=v>=0?n[v]:"/"}let g=eb(c,p),m=f&&f!=="/"&&f.endsWith("/"),x=(u||f===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(m||x)&&(g.pathname+="/"),g}var Ma=o=>o.join("/").replace(/\/\/+/g,"/"),sb=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),rb=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,nb=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function lb(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var Qp=["POST","PUT","PATCH","DELETE"];new Set(Qp);var ib=["GET",...Qp];new Set(ib);var Vr=_.createContext(null);Vr.displayName="DataRouter";var Vi=_.createContext(null);Vi.displayName="DataRouterState";_.createContext(!1);var Zp=_.createContext({isTransitioning:!1});Zp.displayName="ViewTransition";var ob=_.createContext(new Map);ob.displayName="Fetchers";var cb=_.createContext(null);cb.displayName="Await";var sa=_.createContext(null);sa.displayName="Navigation";var dl=_.createContext(null);dl.displayName="Location";var ua=_.createContext({outlet:null,matches:[],isDataRoute:!1});ua.displayName="Route";var Pu=_.createContext(null);Pu.displayName="RouteError";function ub(o,{relative:n}={}){Ve(Yr(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=_.useContext(sa),{hash:c,pathname:u,search:f}=fl(o,{relative:n}),p=u;return r!=="/"&&(p=u==="/"?r:Ma([r,u])),i.createHref({pathname:p,search:f,hash:c})}function Yr(){return _.useContext(dl)!=null}function da(){return Ve(Yr(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(dl).location}var Jp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Wp(o){_.useContext(sa).static||_.useLayoutEffect(o)}function Bt(){let{isDataRoute:o}=_.useContext(ua);return o?_b():db()}function db(){Ve(Yr(),"useNavigate() may be used only in the context of a <Router> component.");let o=_.useContext(Vr),{basename:n,navigator:r}=_.useContext(sa),{matches:i}=_.useContext(ua),{pathname:c}=da(),u=JSON.stringify(qu(i)),f=_.useRef(!1);return Wp(()=>{f.current=!0}),_.useCallback((g,m={})=>{if(Xt(f.current,Jp),!f.current)return;if(typeof g=="number"){r.go(g);return}let x=Hu(g,JSON.parse(u),c,m.relative==="path");o==null&&n!=="/"&&(x.pathname=x.pathname==="/"?n:Ma([n,x.pathname])),(m.replace?r.replace:r.push)(x,m.state,m)},[n,r,u,c,o])}_.createContext(null);function fl(o,{relative:n}={}){let{matches:r}=_.useContext(ua),{pathname:i}=da(),c=JSON.stringify(qu(r));return _.useMemo(()=>Hu(o,JSON.parse(c),i,n==="path"),[o,c,i,n])}function fb(o,n){return eg(o,n)}function eg(o,n,r,i){Ve(Yr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=_.useContext(sa),{matches:u}=_.useContext(ua),f=u[u.length-1],p=f?f.params:{},g=f?f.pathname:"/",m=f?f.pathnameBase:"/",x=f&&f.route;{let O=x&&x.path||"";tg(g,!x||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let v=da(),y;if(n){let O=typeof n=="string"?Gr(n):n;Ve(m==="/"||O.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${O.pathname}" was given in the \`location\` prop.`),y=O}else y=v;let S=y.pathname||"/",j=S;if(m!=="/"){let O=m.replace(/^\//,"").split("/");j="/"+S.replace(/^\//,"").split("/").slice(O.length).join("/")}let C=Kp(o,{pathname:j});Xt(x||C!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Xt(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=xb(C&&C.map(O=>Object.assign({},O,{params:Object.assign({},p,O.params),pathname:Ma([m,c.encodeLocation?c.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?m:Ma([m,c.encodeLocation?c.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),u,r,i);return n&&$?_.createElement(dl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},$):$}function hb(){let o=wb(),n=lb(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),r=o instanceof Error?o.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",o),f=_.createElement(_.Fragment,null,_.createElement("p",null,"💿 Hey developer 👋"),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:u},"ErrorBoundary")," or"," ",_.createElement("code",{style:u},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},n),r?_.createElement("pre",{style:c},r):null,f)}var mb=_.createElement(hb,null),pb=class extends _.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,n){return n.location!==o.location||n.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:n.error,location:n.location,revalidation:o.revalidation||n.revalidation}}componentDidCatch(o,n){console.error("React Router caught the following error during render",o,n)}render(){return this.state.error!==void 0?_.createElement(ua.Provider,{value:this.props.routeContext},_.createElement(Pu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gb({routeContext:o,match:n,children:r}){let i=_.useContext(Vr);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(ua.Provider,{value:o},r)}function xb(o,n=[],r=null,i=null){if(o==null){if(!r)return null;if(r.errors)o=r.matches;else if(n.length===0&&!r.initialized&&r.matches.length>0)o=r.matches;else return null}let c=o,u=r?.errors;if(u!=null){let g=c.findIndex(m=>m.route.id&&u?.[m.route.id]!==void 0);Ve(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,g+1))}let f=!1,p=-1;if(r)for(let g=0;g<c.length;g++){let m=c[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(p=g),m.route.id){let{loaderData:x,errors:v}=r,y=m.route.loader&&!x.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||y){f=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((g,m,x)=>{let v,y=!1,S=null,j=null;r&&(v=u&&m.route.id?u[m.route.id]:void 0,S=m.route.errorElement||mb,f&&(p<0&&x===0?(tg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,j=null):p===x&&(y=!0,j=m.route.hydrateFallbackElement||null)));let C=n.concat(c.slice(0,x+1)),$=()=>{let O;return v?O=S:y?O=j:m.route.Component?O=_.createElement(m.route.Component,null):m.route.element?O=m.route.element:O=g,_.createElement(gb,{match:m,routeContext:{outlet:g,matches:C,isDataRoute:r!=null},children:O})};return r&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?_.createElement(pb,{location:r.location,revalidation:r.revalidation,component:S,error:v,children:$(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):$()},null)}function Gu(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vb(o){let n=_.useContext(Vr);return Ve(n,Gu(o)),n}function bb(o){let n=_.useContext(Vi);return Ve(n,Gu(o)),n}function yb(o){let n=_.useContext(ua);return Ve(n,Gu(o)),n}function Vu(o){let n=yb(o),r=n.matches[n.matches.length-1];return Ve(r.route.id,`${o} can only be used on routes that contain a unique "id"`),r.route.id}function jb(){return Vu("useRouteId")}function wb(){let o=_.useContext(Pu),n=bb("useRouteError"),r=Vu("useRouteError");return o!==void 0?o:n.errors?.[r]}function _b(){let{router:o}=vb("useNavigate"),n=Vu("useNavigate"),r=_.useRef(!1);return Wp(()=>{r.current=!0}),_.useCallback(async(c,u={})=>{Xt(r.current,Jp),r.current&&(typeof c=="number"?o.navigate(c):await o.navigate(c,{fromRouteId:n,...u}))},[o,n])}var lp={};function tg(o,n,r){!n&&!lp[o]&&(lp[o]=!0,Xt(!1,r))}_.memo(Nb);function Nb({routes:o,future:n,state:r}){return eg(o,void 0,r,n)}function Sb({to:o,replace:n,state:r,relative:i}){Ve(Yr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=_.useContext(sa);Xt(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=_.useContext(ua),{pathname:f}=da(),p=Bt(),g=Hu(o,qu(u),f,i==="path"),m=JSON.stringify(g);return _.useEffect(()=>{p(JSON.parse(m),{replace:n,state:r,relative:i})},[p,m,i,n,r]),null}function $a(o){Ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Eb({basename:o="/",children:n=null,location:r,navigationType:i="POP",navigator:c,static:u=!1}){Ve(!Yr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=o.replace(/^\/*/,"/"),p=_.useMemo(()=>({basename:f,navigator:c,static:u,future:{}}),[f,c,u]);typeof r=="string"&&(r=Gr(r));let{pathname:g="/",search:m="",hash:x="",state:v=null,key:y="default"}=r,S=_.useMemo(()=>{let j=Da(g,f);return j==null?null:{location:{pathname:j,search:m,hash:x,state:v,key:y},navigationType:i}},[f,g,m,x,v,y,i]);return Xt(S!=null,`<Router basename="${f}"> is not able to match the URL "${g}${m}${x}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:_.createElement(sa.Provider,{value:p},_.createElement(dl.Provider,{children:n,value:S}))}function Cb({children:o,location:n}){return fb(Eu(o),n)}function Eu(o,n=[]){let r=[];return _.Children.forEach(o,(i,c)=>{if(!_.isValidElement(i))return;let u=[...n,c];if(i.type===_.Fragment){r.push.apply(r,Eu(i.props.children,u));return}Ve(i.type===$a,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ve(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=Eu(i.props.children,u)),r.push(f)}),r}var zi="get",Li="application/x-www-form-urlencoded";function Yi(o){return o!=null&&typeof o.tagName=="string"}function $b(o){return Yi(o)&&o.tagName.toLowerCase()==="button"}function kb(o){return Yi(o)&&o.tagName.toLowerCase()==="form"}function Ab(o){return Yi(o)&&o.tagName.toLowerCase()==="input"}function Tb(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function Ob(o,n){return o.button===0&&(!n||n==="_self")&&!Tb(o)}function Cu(o=""){return new URLSearchParams(typeof o=="string"||Array.isArray(o)||o instanceof URLSearchParams?o:Object.keys(o).reduce((n,r)=>{let i=o[r];return n.concat(Array.isArray(i)?i.map(c=>[r,c]):[[r,i]])},[]))}function Rb(o,n){let r=Cu(o);return n&&n.forEach((i,c)=>{r.has(c)||n.getAll(c).forEach(u=>{r.append(c,u)})}),r}var ki=null;function Mb(){if(ki===null)try{new FormData(document.createElement("form"),0),ki=!1}catch{ki=!0}return ki}var Ub=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mu(o){return o!=null&&!Ub.has(o)?(Xt(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Li}"`),null):o}function Db(o,n){let r,i,c,u,f;if(kb(o)){let p=o.getAttribute("action");i=p?Da(p,n):null,r=o.getAttribute("method")||zi,c=mu(o.getAttribute("enctype"))||Li,u=new FormData(o)}else if($b(o)||Ab(o)&&(o.type==="submit"||o.type==="image")){let p=o.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=o.getAttribute("formaction")||p.getAttribute("action");if(i=g?Da(g,n):null,r=o.getAttribute("formmethod")||p.getAttribute("method")||zi,c=mu(o.getAttribute("formenctype"))||mu(p.getAttribute("enctype"))||Li,u=new FormData(p,o),!Mb()){let{name:m,type:x,value:v}=o;if(x==="image"){let y=m?`${m}.`:"";u.append(`${y}x`,"0"),u.append(`${y}y`,"0")}else m&&u.append(m,v)}}else{if(Yi(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=zi,i=null,c=Li,f=o}return u&&c==="text/plain"&&(f=u,u=void 0),{action:i,method:r.toLowerCase(),encType:c,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Yu(o,n){if(o===!1||o===null||typeof o>"u")throw new Error(n)}function zb(o,n,r){let i=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return i.pathname==="/"?i.pathname=`_root.${r}`:n&&Da(i.pathname,n)==="/"?i.pathname=`${n.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function Lb(o,n){if(o.id in n)return n[o.id];try{let r=await import(o.module);return n[o.id]=r,r}catch(r){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Bb(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function qb(o,n,r){let i=await Promise.all(o.map(async c=>{let u=n.routes[c.route.id];if(u){let f=await Lb(u,r);return f.links?f.links():[]}return[]}));return Vb(i.flat(1).filter(Bb).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function ip(o,n,r,i,c,u){let f=(g,m)=>r[m]?g.route.id!==r[m].route.id:!0,p=(g,m)=>r[m].pathname!==g.pathname||r[m].route.path?.endsWith("*")&&r[m].params["*"]!==g.params["*"];return u==="assets"?n.filter((g,m)=>f(g,m)||p(g,m)):u==="data"?n.filter((g,m)=>{let x=i.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(f(g,m)||p(g,m))return!0;if(g.route.shouldRevalidate){let v=g.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(o,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Hb(o,n,{includeHydrateFallback:r}={}){return Pb(o.map(i=>{let c=n.routes[i.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),r&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function Pb(o){return[...new Set(o)]}function Gb(o){let n={},r=Object.keys(o).sort();for(let i of r)n[i]=o[i];return n}function Vb(o,n){let r=new Set;return new Set(n),o.reduce((i,c)=>{let u=JSON.stringify(Gb(c));return r.has(u)||(r.add(u),i.push({key:u,link:c})),i},[])}function ag(){let o=_.useContext(Vr);return Yu(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function Yb(){let o=_.useContext(Vi);return Yu(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var Fu=_.createContext(void 0);Fu.displayName="FrameworkContext";function sg(){let o=_.useContext(Fu);return Yu(o,"You must render this element inside a <HydratedRouter> element"),o}function Fb(o,n){let r=_.useContext(Fu),[i,c]=_.useState(!1),[u,f]=_.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:m,onMouseLeave:x,onTouchStart:v}=n,y=_.useRef(null);_.useEffect(()=>{if(o==="render"&&f(!0),o==="viewport"){let C=O=>{O.forEach(D=>{f(D.isIntersecting)})},$=new IntersectionObserver(C,{threshold:.5});return y.current&&$.observe(y.current),()=>{$.disconnect()}}},[o]),_.useEffect(()=>{if(i){let C=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(C)}}},[i]);let S=()=>{c(!0)},j=()=>{c(!1),f(!1)};return r?o!=="intent"?[u,y,{}]:[u,y,{onFocus:Zn(p,S),onBlur:Zn(g,j),onMouseEnter:Zn(m,S),onMouseLeave:Zn(x,j),onTouchStart:Zn(v,S)}]:[!1,y,{}]}function Zn(o,n){return r=>{o&&o(r),r.defaultPrevented||n(r)}}function Kb({page:o,...n}){let{router:r}=ag(),i=_.useMemo(()=>Kp(r.routes,o,r.basename),[r.routes,o,r.basename]);return i?_.createElement(Xb,{page:o,matches:i,...n}):null}function Ib(o){let{manifest:n,routeModules:r}=sg(),[i,c]=_.useState([]);return _.useEffect(()=>{let u=!1;return qb(o,n,r).then(f=>{u||c(f)}),()=>{u=!0}},[o,n,r]),i}function Xb({page:o,matches:n,...r}){let i=da(),{manifest:c,routeModules:u}=sg(),{basename:f}=ag(),{loaderData:p,matches:g}=Yb(),m=_.useMemo(()=>ip(o,n,g,c,i,"data"),[o,n,g,c,i]),x=_.useMemo(()=>ip(o,n,g,c,i,"assets"),[o,n,g,c,i]),v=_.useMemo(()=>{if(o===i.pathname+i.search+i.hash)return[];let j=new Set,C=!1;if(n.forEach(O=>{let D=c.routes[O.route.id];!D||!D.hasLoader||(!m.some(U=>U.route.id===O.route.id)&&O.route.id in p&&u[O.route.id]?.shouldRevalidate||D.hasClientLoader?C=!0:j.add(O.route.id))}),j.size===0)return[];let $=zb(o,f,"data");return C&&j.size>0&&$.searchParams.set("_routes",n.filter(O=>j.has(O.route.id)).map(O=>O.route.id).join(",")),[$.pathname+$.search]},[f,p,i,c,m,n,o,u]),y=_.useMemo(()=>Hb(x,c),[x,c]),S=Ib(x);return _.createElement(_.Fragment,null,v.map(j=>_.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),y.map(j=>_.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),S.map(({key:j,link:C})=>_.createElement("link",{key:j,...C})))}function Qb(...o){return n=>{o.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})}}var rg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rg&&(window.__reactRouterVersion="7.7.1")}catch{}function Zb({basename:o,children:n,window:r}){let i=_.useRef();i.current==null&&(i.current=zv({window:r,v5Compat:!0}));let c=i.current,[u,f]=_.useState({action:c.action,location:c.location}),p=_.useCallback(g=>{_.startTransition(()=>f(g))},[f]);return _.useLayoutEffect(()=>c.listen(p),[c,p]),_.createElement(Eb,{basename:o,children:n,location:u.location,navigationType:u.action,navigator:c})}var ng=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lg=_.forwardRef(function({onClick:n,discover:r="render",prefetch:i="none",relative:c,reloadDocument:u,replace:f,state:p,target:g,to:m,preventScrollReset:x,viewTransition:v,...y},S){let{basename:j}=_.useContext(sa),C=typeof m=="string"&&ng.test(m),$,O=!1;if(typeof m=="string"&&C&&($=m,rg))try{let X=new URL(window.location.href),F=m.startsWith("//")?new URL(X.protocol+m):new URL(m),Q=Da(F.pathname,j);F.origin===X.origin&&Q!=null?m=Q+F.search+F.hash:O=!0}catch{Xt(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=ub(m,{relative:c}),[U,A,R]=Fb(i,y),P=ty(m,{replace:f,state:p,target:g,preventScrollReset:x,relative:c,viewTransition:v});function I(X){n&&n(X),X.defaultPrevented||P(X)}let ae=_.createElement("a",{...y,...R,href:$||D,onClick:O||u?n:I,ref:Qb(S,A),target:g,"data-discover":!C&&r==="render"?"true":void 0});return U&&!C?_.createElement(_.Fragment,null,ae,_.createElement(Kb,{page:D})):ae});lg.displayName="Link";var Jb=_.forwardRef(function({"aria-current":n="page",caseSensitive:r=!1,className:i="",end:c=!1,style:u,to:f,viewTransition:p,children:g,...m},x){let v=fl(f,{relative:m.relative}),y=da(),S=_.useContext(Vi),{navigator:j,basename:C}=_.useContext(sa),$=S!=null&&iy(v)&&p===!0,O=j.encodeLocation?j.encodeLocation(v).pathname:v.pathname,D=y.pathname,U=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(D=D.toLowerCase(),U=U?U.toLowerCase():null,O=O.toLowerCase()),U&&C&&(U=Da(U,C)||U);const A=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let R=D===O||!c&&D.startsWith(O)&&D.charAt(A)==="/",P=U!=null&&(U===O||!c&&U.startsWith(O)&&U.charAt(O.length)==="/"),I={isActive:R,isPending:P,isTransitioning:$},ae=R?n:void 0,X;typeof i=="function"?X=i(I):X=[i,R?"active":null,P?"pending":null,$?"transitioning":null].filter(Boolean).join(" ");let F=typeof u=="function"?u(I):u;return _.createElement(lg,{...m,"aria-current":ae,className:X,ref:x,style:F,to:f,viewTransition:p},typeof g=="function"?g(I):g)});Jb.displayName="NavLink";var Wb=_.forwardRef(({discover:o="render",fetcherKey:n,navigate:r,reloadDocument:i,replace:c,state:u,method:f=zi,action:p,onSubmit:g,relative:m,preventScrollReset:x,viewTransition:v,...y},S)=>{let j=ny(),C=ly(p,{relative:m}),$=f.toLowerCase()==="get"?"get":"post",O=typeof p=="string"&&ng.test(p),D=U=>{if(g&&g(U),U.defaultPrevented)return;U.preventDefault();let A=U.nativeEvent.submitter,R=A?.getAttribute("formmethod")||f;j(A||U.currentTarget,{fetcherKey:n,method:R,navigate:r,replace:c,state:u,relative:m,preventScrollReset:x,viewTransition:v})};return _.createElement("form",{ref:S,method:$,action:C,onSubmit:i?g:D,...y,"data-discover":!O&&o==="render"?"true":void 0})});Wb.displayName="Form";function ey(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ig(o){let n=_.useContext(Vr);return Ve(n,ey(o)),n}function ty(o,{target:n,replace:r,state:i,preventScrollReset:c,relative:u,viewTransition:f}={}){let p=Bt(),g=da(),m=fl(o,{relative:u});return _.useCallback(x=>{if(Ob(x,n)){x.preventDefault();let v=r!==void 0?r:ll(g)===ll(m);p(o,{replace:v,state:i,preventScrollReset:c,relative:u,viewTransition:f})}},[g,p,m,r,i,n,o,c,u,f])}function ay(o){Xt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=_.useRef(Cu(o)),r=_.useRef(!1),i=da(),c=_.useMemo(()=>Rb(i.search,r.current?null:n.current),[i.search]),u=Bt(),f=_.useCallback((p,g)=>{const m=Cu(typeof p=="function"?p(new URLSearchParams(c)):p);r.current=!0,u("?"+m,g)},[u,c]);return[c,f]}var sy=0,ry=()=>`__${String(++sy)}__`;function ny(){let{router:o}=ig("useSubmit"),{basename:n}=_.useContext(sa),r=jb();return _.useCallback(async(i,c={})=>{let{action:u,method:f,encType:p,formData:g,body:m}=Db(i,n);if(c.navigate===!1){let x=c.fetcherKey||ry();await o.fetch(x,r,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:m,formMethod:c.method||f,formEncType:c.encType||p,flushSync:c.flushSync})}else await o.navigate(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:m,formMethod:c.method||f,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[o,n,r])}function ly(o,{relative:n}={}){let{basename:r}=_.useContext(sa),i=_.useContext(ua);Ve(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),u={...fl(o||".",{relative:n})},f=da();if(o==null){u.search=f.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(x=>x==="")){p.delete("index"),g.filter(v=>v).forEach(v=>p.append("index",v));let x=p.toString();u.search=x?`?${x}`:""}}return(!o||o===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:Ma([r,u.pathname])),ll(u)}function iy(o,{relative:n}={}){let r=_.useContext(Zp);Ve(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=ig("useViewTransitionState"),c=fl(o,{relative:n});if(!r.isTransitioning)return!1;let u=Da(r.currentLocation.pathname,i)||r.currentLocation.pathname,f=Da(r.nextLocation.pathname,i)||r.nextLocation.pathname;return qi(c.pathname,f)!=null||qi(c.pathname,u)!=null}const oy="modulepreload",cy=function(o){return"/"+o},op={},qs=function(n,r,i){let c=Promise.resolve();if(r&&r.length>0){let g=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");c=g(r.map(m=>{if(m=cy(m),m in op)return;op[m]=!0;const x=m.endsWith(".css"),v=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const y=document.createElement("link");if(y.rel=x?"stylesheet":oy,x||(y.as="script"),y.crossOrigin="",y.href=m,p&&y.setAttribute("nonce",p),document.head.appendChild(y),x)return new Promise((S,j)=>{y.addEventListener("load",S),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return c.then(f=>{for(const p of f||[])p.status==="rejected"&&u(p.reason);return n().catch(u)})},uy=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>qs(async()=>{const{default:i}=await Promise.resolve().then(()=>Fr);return{default:i}},[]).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)};class Ku extends Error{constructor(n,r="FunctionsError",i){super(n),this.name=r,this.context=i}}class dy extends Ku{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class cp extends Ku{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class up extends Ku{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var $u;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})($u||($u={}));var fy=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function p(x){try{m(i.next(x))}catch(v){f(v)}}function g(x){try{m(i.throw(x))}catch(v){f(v)}}function m(x){x.done?u(x.value):c(x.value).then(p,g)}m((i=i.apply(o,n||[])).next())})};class hy{constructor(n,{headers:r={},customFetch:i,region:c=$u.Any}={}){this.url=n,this.headers=r,this.region=c,this.fetch=uy(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,r={}){var i;return fy(this,void 0,void 0,function*(){try{const{headers:c,method:u,body:f}=r;let p={},{region:g}=r;g||(g=this.region);const m=new URL(`${this.url}/${n}`);g&&g!=="any"&&(p["x-region"]=g,m.searchParams.set("forceFunctionRegion",g));let x;f&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",x=f):typeof f=="string"?(p["Content-Type"]="text/plain",x=f):typeof FormData<"u"&&f instanceof FormData?x=f:(p["Content-Type"]="application/json",x=JSON.stringify(f)));const v=yield this.fetch(m.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),c),body:x}).catch(C=>{throw new dy(C)}),y=v.headers.get("x-relay-error");if(y&&y==="true")throw new cp(v);if(!v.ok)throw new up(v);let S=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),j;return S==="application/json"?j=yield v.json():S==="application/octet-stream"?j=yield v.blob():S==="text/event-stream"?j=v:S==="multipart/form-data"?j=yield v.formData():j=yield v.text(),{data:j,error:null,response:v}}catch(c){return{data:null,error:c,response:c instanceof up||c instanceof cp?c.context:void 0}}})}}var ct={},$r={},kr={},Ar={},Tr={},Or={},my=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pr=my();const py=Pr.fetch,og=Pr.fetch.bind(Pr),cg=Pr.Headers,gy=Pr.Request,xy=Pr.Response,Fr=Object.freeze(Object.defineProperty({__proto__:null,Headers:cg,Request:gy,Response:xy,default:og,fetch:py},Symbol.toStringTag,{value:"Module"})),vy=Ev(Fr);var Ai={},dp;function ug(){if(dp)return Ai;dp=1,Object.defineProperty(Ai,"__esModule",{value:!0});class o extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ai.default=o,Ai}var fp;function dg(){if(fp)return Or;fp=1;var o=Or&&Or.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Or,"__esModule",{value:!0});const n=o(vy),r=o(ug());class i{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,f){return this.headers=Object.assign({},this.headers),this.headers[u]=f,this}then(u,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const p=this.fetch;let g=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var x,v,y;let S=null,j=null,C=null,$=m.status,O=m.statusText;if(m.ok){if(this.method!=="HEAD"){const R=await m.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?j=R:j=JSON.parse(R))}const U=(x=this.headers.Prefer)===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),A=(v=m.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");U&&A&&A.length>1&&(C=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(S={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,C=null,$=406,O="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const U=await m.text();try{S=JSON.parse(U),Array.isArray(S)&&m.status===404&&(j=[],S=null,$=200,O="OK")}catch{m.status===404&&U===""?($=204,O="No Content"):S={message:U}}if(S&&this.isMaybeSingle&&(!((y=S?.details)===null||y===void 0)&&y.includes("0 rows"))&&(S=null,$=200,O="OK"),S&&this.shouldThrowOnError)throw new r.default(S)}return{error:S,data:j,count:C,status:$,statusText:O}});return this.shouldThrowOnError||(g=g.catch(m=>{var x,v,y;return{error:{message:`${(x=m?.name)!==null&&x!==void 0?x:"FetchError"}: ${m?.message}`,details:`${(v=m?.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(y=m?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),g.then(u,f)}returns(){return this}overrideTypes(){return this}}return Or.default=i,Or}var hp;function fg(){if(hp)return Tr;hp=1;var o=Tr&&Tr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Tr,"__esModule",{value:!0});const n=o(dg());class r extends n.default{select(c){let u=!1;const f=(c??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",f),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(c,{ascending:u=!0,nullsFirst:f,foreignTable:p,referencedTable:g=p}={}){const m=g?`${g}.order`:"order",x=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${x?`${x},`:""}${c}.${u?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:f=u}={}){const p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${c}`),this}range(c,u,{foreignTable:f,referencedTable:p=f}={}){const g=typeof p>"u"?"offset":`${p}.offset`,m=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${c}`),this.url.searchParams.set(m,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:c=!1,verbose:u=!1,settings:f=!1,buffers:p=!1,wal:g=!1,format:m="text"}={}){var x;const v=[c?"analyze":null,u?"verbose":null,f?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),y=(x=this.headers.Accept)!==null&&x!==void 0?x:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${m}; for="${y}"; options=${v};`,m==="json"?this:this}rollback(){var c;return((c=this.headers.Prefer)!==null&&c!==void 0?c:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Tr.default=r,Tr}var mp;function Iu(){if(mp)return Ar;mp=1;var o=Ar&&Ar.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ar,"__esModule",{value:!0});const n=o(fg());class r extends n.default{eq(c,u){return this.url.searchParams.append(c,`eq.${u}`),this}neq(c,u){return this.url.searchParams.append(c,`neq.${u}`),this}gt(c,u){return this.url.searchParams.append(c,`gt.${u}`),this}gte(c,u){return this.url.searchParams.append(c,`gte.${u}`),this}lt(c,u){return this.url.searchParams.append(c,`lt.${u}`),this}lte(c,u){return this.url.searchParams.append(c,`lte.${u}`),this}like(c,u){return this.url.searchParams.append(c,`like.${u}`),this}likeAllOf(c,u){return this.url.searchParams.append(c,`like(all).{${u.join(",")}}`),this}likeAnyOf(c,u){return this.url.searchParams.append(c,`like(any).{${u.join(",")}}`),this}ilike(c,u){return this.url.searchParams.append(c,`ilike.${u}`),this}ilikeAllOf(c,u){return this.url.searchParams.append(c,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(c,u){return this.url.searchParams.append(c,`ilike(any).{${u.join(",")}}`),this}is(c,u){return this.url.searchParams.append(c,`is.${u}`),this}in(c,u){const f=Array.from(new Set(u)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(c,`in.(${f})`),this}contains(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cs.{${u.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(u)}`),this}containedBy(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cd.{${u.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(u)}`),this}rangeGt(c,u){return this.url.searchParams.append(c,`sr.${u}`),this}rangeGte(c,u){return this.url.searchParams.append(c,`nxl.${u}`),this}rangeLt(c,u){return this.url.searchParams.append(c,`sl.${u}`),this}rangeLte(c,u){return this.url.searchParams.append(c,`nxr.${u}`),this}rangeAdjacent(c,u){return this.url.searchParams.append(c,`adj.${u}`),this}overlaps(c,u){return typeof u=="string"?this.url.searchParams.append(c,`ov.${u}`):this.url.searchParams.append(c,`ov.{${u.join(",")}}`),this}textSearch(c,u,{config:f,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const m=f===void 0?"":`(${f})`;return this.url.searchParams.append(c,`${g}fts${m}.${u}`),this}match(c){return Object.entries(c).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(c,u,f){return this.url.searchParams.append(c,`not.${u}.${f}`),this}or(c,{foreignTable:u,referencedTable:f=u}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${c})`),this}filter(c,u,f){return this.url.searchParams.append(c,`${u}.${f}`),this}}return Ar.default=r,Ar}var pp;function hg(){if(pp)return kr;pp=1;var o=kr&&kr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(kr,"__esModule",{value:!0});const n=o(Iu());class r{constructor(c,{headers:u={},schema:f,fetch:p}){this.url=c,this.headers=u,this.schema=f,this.fetch=p}select(c,{head:u=!1,count:f}={}){const p=u?"HEAD":"GET";let g=!1;const m=(c??"*").split("").map(x=>/\s/.test(x)&&!g?"":(x==='"'&&(g=!g),x)).join("");return this.url.searchParams.set("select",m),f&&(this.headers.Prefer=`count=${f}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(c,{count:u,defaultToNull:f=!0}={}){const p="POST",g=[];if(this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),f||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(c)){const m=c.reduce((x,v)=>x.concat(Object.keys(v)),[]);if(m.length>0){const x=[...new Set(m)].map(v=>`"${v}"`);this.url.searchParams.set("columns",x.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}upsert(c,{onConflict:u,ignoreDuplicates:f=!1,count:p,defaultToNull:g=!0}={}){const m="POST",x=[`resolution=${f?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&x.push(this.headers.Prefer),p&&x.push(`count=${p}`),g||x.push("missing=default"),this.headers.Prefer=x.join(","),Array.isArray(c)){const v=c.reduce((y,S)=>y.concat(Object.keys(S)),[]);if(v.length>0){const y=[...new Set(v)].map(S=>`"${S}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}update(c,{count:u}={}){const f="PATCH",p=[];return this.headers.Prefer&&p.push(this.headers.Prefer),u&&p.push(`count=${u}`),this.headers.Prefer=p.join(","),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}delete({count:c}={}){const u="DELETE",f=[];return c&&f.push(`count=${c}`),this.headers.Prefer&&f.unshift(this.headers.Prefer),this.headers.Prefer=f.join(","),new n.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return kr.default=r,kr}var Jn={},Wn={},gp;function by(){return gp||(gp=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.version=void 0,Wn.version="0.0.0-automated"),Wn}var xp;function yy(){if(xp)return Jn;xp=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.DEFAULT_HEADERS=void 0;const o=by();return Jn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${o.version}`},Jn}var vp;function jy(){if(vp)return $r;vp=1;var o=$r&&$r.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty($r,"__esModule",{value:!0});const n=o(hg()),r=o(Iu()),i=yy();class c{constructor(f,{headers:p={},schema:g,fetch:m}={}){this.url=f,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),p),this.schemaName=g,this.fetch=m}from(f){const p=new URL(`${this.url}/${f}`);return new n.default(p,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(f){return new c(this.url,{headers:this.headers,schema:f,fetch:this.fetch})}rpc(f,p={},{head:g=!1,get:m=!1,count:x}={}){let v;const y=new URL(`${this.url}/rpc/${f}`);let S;g||m?(v=g?"HEAD":"GET",Object.entries(p).filter(([C,$])=>$!==void 0).map(([C,$])=>[C,Array.isArray($)?`{${$.join(",")}}`:`${$}`]).forEach(([C,$])=>{y.searchParams.append(C,$)})):(v="POST",S=p);const j=Object.assign({},this.headers);return x&&(j.Prefer=`count=${x}`),new r.default({method:v,url:y,headers:j,schema:this.schemaName,body:S,fetch:this.fetch,allowEmpty:!1})}}return $r.default=c,$r}var bp;function wy(){if(bp)return ct;bp=1;var o=ct&&ct.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(ct,"__esModule",{value:!0}),ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const n=o(jy());ct.PostgrestClient=n.default;const r=o(hg());ct.PostgrestQueryBuilder=r.default;const i=o(Iu());ct.PostgrestFilterBuilder=i.default;const c=o(fg());ct.PostgrestTransformBuilder=c.default;const u=o(dg());ct.PostgrestBuilder=u.default;const f=o(ug());return ct.PostgrestError=f.default,ct.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:f.default},ct}var _y=wy();const Ny=Fp(_y),{PostgrestClient:Sy,PostgrestQueryBuilder:E2,PostgrestFilterBuilder:C2,PostgrestTransformBuilder:$2,PostgrestBuilder:k2,PostgrestError:A2}=Ny;function Ey(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Cy=Ey(),$y="2.11.15",ky=`realtime-js/${$y}`,Ay="1.0.0",mg=1e4,Ty=1e3;var sl;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(sl||(sl={}));var vt;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(vt||(vt={}));var aa;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(aa||(aa={}));var ku;(function(o){o.websocket="websocket"})(ku||(ku={}));var zs;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(zs||(zs={}));class Oy{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),i=new TextDecoder;return this._decodeBroadcast(n,r,i)}_decodeBroadcast(n,r,i){const c=r.getUint8(1),u=r.getUint8(2);let f=this.HEADER_LENGTH+2;const p=i.decode(n.slice(f,f+c));f=f+c;const g=i.decode(n.slice(f,f+u));f=f+u;const m=JSON.parse(i.decode(n.slice(f,n.byteLength)));return{ref:null,topic:p,event:g,payload:m}}}class pg{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(He||(He={}));const yp=(o,n,r={})=>{var i;const c=(i=r.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(n).reduce((u,f)=>(u[f]=Ry(f,o,n,c),u),{})},Ry=(o,n,r,i)=>{const c=n.find(p=>p.name===o),u=c?.type,f=r[o];return u&&!i.includes(u)?gg(u,f):Au(f)},gg=(o,n)=>{if(o.charAt(0)==="_"){const r=o.slice(1,o.length);return zy(n,r)}switch(o){case He.bool:return My(n);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return Uy(n);case He.json:case He.jsonb:return Dy(n);case He.timestamp:return Ly(n);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return Au(n);default:return Au(n)}},Au=o=>o,My=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Uy=o=>{if(typeof o=="string"){const n=parseFloat(o);if(!Number.isNaN(n))return n}return o},Dy=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(n){return console.log(`JSON parse error: ${n}`),o}return o},zy=(o,n)=>{if(typeof o!="string")return o;const r=o.length-1,i=o[r];if(o[0]==="{"&&i==="}"){let u;const f=o.slice(1,r);try{u=JSON.parse("["+f+"]")}catch{u=f?f.split(","):[]}return u.map(p=>gg(n,p))}return o},Ly=o=>typeof o=="string"?o.replace(" ","T"):o,xg=o=>{let n=o;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")};class pu{constructor(n,r,i={},c=mg){this.channel=n,this.event=r,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var i;return this._hasReceived(n)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var jp;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(jp||(jp={}));class rl{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:u,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rl.syncState(this.state,c,u,f),this.pendingDiffs.forEach(g=>{this.state=rl.syncDiff(this.state,g,u,f)}),this.pendingDiffs=[],p()}),this.channel._on(i.diff,{},c=>{const{onJoin:u,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=rl.syncDiff(this.state,c,u,f),p())}),this.onJoin((c,u,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:f})}),this.onLeave((c,u,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,i,c){const u=this.cloneDeep(n),f=this.transformState(r),p={},g={};return this.map(u,(m,x)=>{f[m]||(g[m]=x)}),this.map(f,(m,x)=>{const v=u[m];if(v){const y=x.map($=>$.presence_ref),S=v.map($=>$.presence_ref),j=x.filter($=>S.indexOf($.presence_ref)<0),C=v.filter($=>y.indexOf($.presence_ref)<0);j.length>0&&(p[m]=j),C.length>0&&(g[m]=C)}else p[m]=x}),this.syncDiff(u,{joins:p,leaves:g},i,c)}static syncDiff(n,r,i,c){const{joins:u,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(u,(p,g)=>{var m;const x=(m=n[p])!==null&&m!==void 0?m:[];if(n[p]=this.cloneDeep(g),x.length>0){const v=n[p].map(S=>S.presence_ref),y=x.filter(S=>v.indexOf(S.presence_ref)<0);n[p].unshift(...y)}i(p,x,g)}),this.map(f,(p,g)=>{let m=n[p];if(!m)return;const x=g.map(v=>v.presence_ref);m=m.filter(v=>x.indexOf(v.presence_ref)<0),n[p]=m,c(p,m,g),m.length===0&&delete n[p]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(i=>r(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,i)=>{const c=n[i];return"metas"in c?r[i]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):r[i]=c,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wp;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(wp||(wp={}));var _p;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(_p||(_p={}));var Ta;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(Ta||(Ta={}));class Xu{constructor(n,r={config:{}},i){this.topic=n,this.params=r,this.socket=i,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new pu(this,aa.join,this.params,this.timeout),this.rejoinTimer=new pg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(aa.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new rl(this),this.broadcastEndpointURL=xg(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(n,r=this.timeout){var i,c;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:u,presence:f,private:p}}=this.params;this._onError(x=>n?.(Ta.CHANNEL_ERROR,x)),this._onClose(()=>n?.(Ta.CLOSED));const g={},m={broadcast:u,presence:f,postgres_changes:(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(x=>x.filter))!==null&&c!==void 0?c:[],private:p};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:m},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var v;if(this.socket.setAuth(),x===void 0){n?.(Ta.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,S=(v=y?.length)!==null&&v!==void 0?v:0,j=[];for(let C=0;C<S;C++){const $=y[C],{filter:{event:O,schema:D,table:U,filter:A}}=$,R=x&&x[C];if(R&&R.event===O&&R.schema===D&&R.table===U&&R.filter===A)j.push(Object.assign(Object.assign({},$),{id:R.id}));else{this.unsubscribe(),this.state=vt.errored,n?.(Ta.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,n&&n(Ta.SUBSCRIBED);return}}).receive("error",x=>{this.state=vt.errored,n?.(Ta.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{n?.(Ta.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,i){return this._on(n,r,i)}async send(n,r={}){var i,c;if(!this._canPush()&&n.type==="broadcast"){const{event:u,payload:f}=n,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:f,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=m.body)===null||c===void 0?void 0:c.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var f,p,g;const m=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&u("ok"),m.receive("ok",()=>u("ok")),m.receive("error",()=>u("error")),m.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=vt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(aa.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new pu(this,aa.leave,{},n),i.receive("ok",()=>{r(),c("ok")}).receive("timeout",()=>{r(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(n,r,i){const c=new AbortController,u=setTimeout(()=>c.abort(),i),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(u),f}_push(n,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new pu(this,n,r,i);return this._canPush()?c.send():(c.startTimeout(),this.pushBuffer.push(c)),c}_onMessage(n,r,i){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,i){var c,u;const f=n.toLocaleLowerCase(),{close:p,error:g,leave:m,join:x}=aa;if(i&&[p,g,m,x].indexOf(f)>=0&&i!==this._joinRef())return;let y=this._onMessage(f,r,i);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(S=>{var j,C,$;return((j=S.filter)===null||j===void 0?void 0:j.event)==="*"||(($=(C=S.filter)===null||C===void 0?void 0:C.event)===null||$===void 0?void 0:$.toLocaleLowerCase())===f}).map(S=>S.callback(y,i)):(u=this.bindings[f])===null||u===void 0||u.filter(S=>{var j,C,$,O,D,U;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in S){const A=S.id,R=(j=S.filter)===null||j===void 0?void 0:j.event;return A&&((C=r.ids)===null||C===void 0?void 0:C.includes(A))&&(R==="*"||R?.toLocaleLowerCase()===(($=r.data)===null||$===void 0?void 0:$.type.toLocaleLowerCase()))}else{const A=(D=(O=S?.filter)===null||O===void 0?void 0:O.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return A==="*"||A===((U=r?.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===f}).map(S=>{if(typeof y=="object"&&"ids"in y){const j=y.data,{schema:C,table:$,commit_timestamp:O,type:D,errors:U}=j;y=Object.assign(Object.assign({},{schema:C,table:$,commit_timestamp:O,eventType:D,new:{},old:{},errors:U}),this._getPayloadRecords(j))}S.callback(y,i)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,i){const c=n.toLocaleLowerCase(),u={type:c,filter:r,callback:i};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(n,r){const i=n.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&Xu.isEqual(c.filter,r))}),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const i in n)if(n[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(aa.close,{},n)}_onError(n){this._on(aa.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=yp(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=yp(n.columns,n.old_record)),r}}const Np=()=>{},By=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qy{constructor(n,r){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mg,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Np,this.ref=0,this.logger=Np,this.conn=null,this.sendBuffer=[],this.serializer=new Oy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=u=>{let f;return u?f=u:typeof fetch>"u"?f=(...p)=>qs(async()=>{const{default:g}=await Promise.resolve().then(()=>Fr);return{default:g}},void 0).then(({default:g})=>g(...p)):f=fetch,(...p)=>f(...p)},this.endPoint=`${n}/${ku.websocket}`,this.httpEndpoint=xg(n),r?.transport?this.transport=r.transport:this.transport=null,r?.params&&(this.params=r.params),r?.timeout&&(this.timeout=r.timeout),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const c=(i=r?.params)===null||i===void 0?void 0:i.apikey;if(c&&(this.accessTokenValue=c,this.apiKey=c),this.reconnectAfterMs=r?.reconnectAfterMs?r.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=r?.encode?r.encode:(u,f)=>f(JSON.stringify(u)),this.decode=r?.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new pg(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r?.fetch),r?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=r?.worker||!1,this.workerUrl=r?.workerUrl}this.accessToken=r?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Cy),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ay}))}disconnect(n,r){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,i){this.logger(n,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case sl.connecting:return zs.Connecting;case sl.open:return zs.Open;case sl.closing:return zs.Closing;default:return zs.Closed}}isConnected(){return this.connectionState()===zs.Open}channel(n,r={config:{}}){const i=`realtime:${n}`,c=this.getChannels().find(u=>u.topic===i);if(c)return c;{const u=new Xu(`realtime:${n}`,r,this);return this.channels.push(u),u}}push(n){const{topic:r,event:i,payload:c,ref:u}=n,f=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${r} ${i} (${u})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){let r=n||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const c={access_token:r,version:ky};r&&i.updateJoinPayload(c),i.joinedOnce&&i._isJoined()&&i._push(aa.access_token,{access_token:r})}))}async sendHeartbeat(){var n;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(n=this.conn)===null||n===void 0||n.close(Ty,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_onConnMessage(n){this.decode(n.data,r=>{let{topic:i,event:c,payload:u,ref:f}=r;i==="phoenix"&&c==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),f&&f===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${u.status||""} ${i} ${c} ${f&&"("+f+")"||""}`,u),Array.from(this.channels).filter(p=>p._isMember(i)).forEach(p=>p._trigger(c,u,f)),this.stateChangeCallbacks.message.forEach(p=>p(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(n=>n())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){this.log("transport","close",n),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(n))}_onConnError(n){this.log("transport",`${n}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(n))}_triggerChanError(){this.channels.forEach(n=>n._trigger(aa.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const i=n.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${n}${i}${c}`}_workerObjectUrl(n){let r;if(n)r=n;else{const i=new Blob([By],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}}class Qu extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function ut(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class Hy extends Qu{constructor(n,r,i){super(n),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tu extends Qu{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var Py=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function p(x){try{m(i.next(x))}catch(v){f(v)}}function g(x){try{m(i.throw(x))}catch(v){f(v)}}function m(x){x.done?u(x.value):c(x.value).then(p,g)}m((i=i.apply(o,n||[])).next())})};const vg=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>qs(async()=>{const{default:i}=await Promise.resolve().then(()=>Fr);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},Gy=()=>Py(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qs(()=>Promise.resolve().then(()=>Fr),void 0)).Response:Response}),Ou=o=>{if(Array.isArray(o))return o.map(r=>Ou(r));if(typeof o=="function"||o!==Object(o))return o;const n={};return Object.entries(o).forEach(([r,i])=>{const c=r.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[c]=Ou(i)}),n},Vy=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var Hs=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function p(x){try{m(i.next(x))}catch(v){f(v)}}function g(x){try{m(i.throw(x))}catch(v){f(v)}}function m(x){x.done?u(x.value):c(x.value).then(p,g)}m((i=i.apply(o,n||[])).next())})};const gu=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Yy=(o,n,r)=>Hs(void 0,void 0,void 0,function*(){const i=yield Gy();o instanceof i&&!r?.noResolveJson?o.json().then(c=>{const u=o.status||500,f=c?.statusCode||u+"";n(new Hy(gu(c),u,f))}).catch(c=>{n(new Tu(gu(c),c))}):n(new Tu(gu(o),o))}),Fy=(o,n,r,i)=>{const c={method:o,headers:n?.headers||{}};return o==="GET"||!i?c:(Vy(i)?(c.headers=Object.assign({"Content-Type":"application/json"},n?.headers),c.body=JSON.stringify(i)):c.body=i,Object.assign(Object.assign({},c),r))};function hl(o,n,r,i,c,u){return Hs(this,void 0,void 0,function*(){return new Promise((f,p)=>{o(r,Fy(n,i,c,u)).then(g=>{if(!g.ok)throw g;return i?.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>Yy(g,p,i))})})}function Hi(o,n,r,i){return Hs(this,void 0,void 0,function*(){return hl(o,"GET",n,r,i)})}function Oa(o,n,r,i,c){return Hs(this,void 0,void 0,function*(){return hl(o,"POST",n,i,c,r)})}function Ru(o,n,r,i,c){return Hs(this,void 0,void 0,function*(){return hl(o,"PUT",n,i,c,r)})}function Ky(o,n,r,i){return Hs(this,void 0,void 0,function*(){return hl(o,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function bg(o,n,r,i,c){return Hs(this,void 0,void 0,function*(){return hl(o,"DELETE",n,i,c,r)})}var Et=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function p(x){try{m(i.next(x))}catch(v){f(v)}}function g(x){try{m(i.throw(x))}catch(v){f(v)}}function m(x){x.done?u(x.value):c(x.value).then(p,g)}m((i=i.apply(o,n||[])).next())})};const Iy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Xy{constructor(n,r={},i,c){this.url=n,this.headers=r,this.bucketId=i,this.fetch=vg(c)}uploadOrUpdate(n,r,i,c){return Et(this,void 0,void 0,function*(){try{let u;const f=Object.assign(Object.assign({},Sp),c);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),g&&u.append("metadata",this.encodeMetadata(g)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",f.cacheControl),g&&u.append("metadata",this.encodeMetadata(g))):(u=i,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),c?.headers&&(p=Object.assign(Object.assign({},p),c.headers));const m=this._removeEmptyFolders(r),x=this._getFinalPath(m),v=yield(n=="PUT"?Ru:Oa)(this.fetch,`${this.url}/object/${x}`,u,Object.assign({headers:p},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:m,id:v.Id,fullPath:v.Key},error:null}}catch(u){if(ut(u))return{data:null,error:u};throw u}})}upload(n,r,i){return Et(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,i)})}uploadToSignedUrl(n,r,i,c){return Et(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${f}`);p.searchParams.set("token",r);try{let g;const m=Object.assign({upsert:Sp.upsert},c),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",m.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",m.cacheControl)):(g=i,x["cache-control"]=`max-age=${m.cacheControl}`,x["content-type"]=m.contentType);const v=yield Ru(this.fetch,p.toString(),g,{headers:x});return{data:{path:u,fullPath:v.Key},error:null}}catch(g){if(ut(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(n,r){return Et(this,void 0,void 0,function*(){try{let i=this._getFinalPath(n);const c=Object.assign({},this.headers);r?.upsert&&(c["x-upsert"]="true");const u=yield Oa(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:c}),f=new URL(this.url+u.url),p=f.searchParams.get("token");if(!p)throw new Qu("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:p},error:null}}catch(i){if(ut(i))return{data:null,error:i};throw i}})}update(n,r,i){return Et(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,i)})}move(n,r,i){return Et(this,void 0,void 0,function*(){try{return{data:yield Oa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(ut(c))return{data:null,error:c};throw c}})}copy(n,r,i){return Et(this,void 0,void 0,function*(){try{return{data:{path:(yield Oa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(ut(c))return{data:null,error:c};throw c}})}createSignedUrl(n,r,i){return Et(this,void 0,void 0,function*(){try{let c=this._getFinalPath(n),u=yield Oa(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:r},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const f=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${f}`)},{data:u,error:null}}catch(c){if(ut(c))return{data:null,error:c};throw c}})}createSignedUrls(n,r,i){return Et(this,void 0,void 0,function*(){try{const c=yield Oa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${u}`):null})),error:null}}catch(c){if(ut(c))return{data:null,error:c};throw c}})}download(n,r){return Et(this,void 0,void 0,function*(){const c=typeof r?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(r?.transform||{}),f=u?`?${u}`:"";try{const p=this._getFinalPath(n);return{data:yield(yield Hi(this.fetch,`${this.url}/${c}/${p}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(ut(p))return{data:null,error:p};throw p}})}info(n){return Et(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const i=yield Hi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ou(i),error:null}}catch(i){if(ut(i))return{data:null,error:i};throw i}})}exists(n){return Et(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield Ky(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(ut(i)&&i instanceof Tu){const c=i.originalError;if([400,404].includes(c?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(n,r){const i=this._getFinalPath(n),c=[],u=r?.download?`download=${r.download===!0?"":r.download}`:"";u!==""&&c.push(u);const p=typeof r?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(r?.transform||{});g!==""&&c.push(g);let m=c.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${i}${m}`)}}}remove(n){return Et(this,void 0,void 0,function*(){try{return{data:yield bg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}})}list(n,r,i){return Et(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Iy),r),{prefix:n||""});return{data:yield Oa(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},i),error:null}}catch(c){if(ut(c))return{data:null,error:c};throw c}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const Qy="2.10.4",Zy={"X-Client-Info":`storage-js/${Qy}`};var Rr=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function p(x){try{m(i.next(x))}catch(v){f(v)}}function g(x){try{m(i.throw(x))}catch(v){f(v)}}function m(x){x.done?u(x.value):c(x.value).then(p,g)}m((i=i.apply(o,n||[])).next())})};class Jy{constructor(n,r={},i,c){const u=new URL(n);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},Zy),r),this.fetch=vg(i)}listBuckets(){return Rr(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}})}getBucket(n){return Rr(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}})}createBucket(n,r={public:!1}){return Rr(this,void 0,void 0,function*(){try{return{data:yield Oa(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(ut(i))return{data:null,error:i};throw i}})}updateBucket(n,r){return Rr(this,void 0,void 0,function*(){try{return{data:yield Ru(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(ut(i))return{data:null,error:i};throw i}})}emptyBucket(n){return Rr(this,void 0,void 0,function*(){try{return{data:yield Oa(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}})}deleteBucket(n){return Rr(this,void 0,void 0,function*(){try{return{data:yield bg(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}})}}class Wy extends Jy{constructor(n,r={},i,c){super(n,r,i,c)}from(n){return new Xy(this.url,this.headers,n,this.fetch)}}const ej="2.53.0";let al="";typeof Deno<"u"?al="deno":typeof document<"u"?al="web":typeof navigator<"u"&&navigator.product==="ReactNative"?al="react-native":al="node";const tj={"X-Client-Info":`supabase-js-${al}/${ej}`},aj={headers:tj},sj={schema:"public"},rj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nj={};var lj=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function p(x){try{m(i.next(x))}catch(v){f(v)}}function g(x){try{m(i.throw(x))}catch(v){f(v)}}function m(x){x.done?u(x.value):c(x.value).then(p,g)}m((i=i.apply(o,n||[])).next())})};const ij=o=>{let n;return o?n=o:typeof fetch>"u"?n=og:n=fetch,(...r)=>n(...r)},oj=()=>typeof Headers>"u"?cg:Headers,cj=(o,n,r)=>{const i=ij(r),c=oj();return(u,f)=>lj(void 0,void 0,void 0,function*(){var p;const g=(p=yield n())!==null&&p!==void 0?p:o;let m=new c(f?.headers);return m.has("apikey")||m.set("apikey",o),m.has("Authorization")||m.set("Authorization",`Bearer ${g}`),i(u,Object.assign(Object.assign({},f),{headers:m}))})};var uj=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function p(x){try{m(i.next(x))}catch(v){f(v)}}function g(x){try{m(i.throw(x))}catch(v){f(v)}}function m(x){x.done?u(x.value):c(x.value).then(p,g)}m((i=i.apply(o,n||[])).next())})};function dj(o){return o.endsWith("/")?o:o+"/"}function fj(o,n){var r,i;const{db:c,auth:u,realtime:f,global:p}=o,{db:g,auth:m,realtime:x,global:v}=n,y={db:Object.assign(Object.assign({},g),c),auth:Object.assign(Object.assign({},m),u),realtime:Object.assign(Object.assign({},x),f),storage:{},global:Object.assign(Object.assign(Object.assign({},v),p),{headers:Object.assign(Object.assign({},(r=v?.headers)!==null&&r!==void 0?r:{}),(i=p?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>uj(this,void 0,void 0,function*(){return""})};return o.accessToken?y.accessToken=o.accessToken:delete y.accessToken,y}const yg="2.71.1",Lr=30*1e3,Mu=3,xu=Mu*Lr,hj="http://localhost:9999",mj="supabase.auth.token",pj={"X-Client-Info":`gotrue-js/${yg}`},Uu="X-Supabase-Api-Version",jg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xj=600*1e3;class Zu extends Error{constructor(n,r,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function ye(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class vj extends Zu{constructor(n,r,i){super(n,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function bj(o){return ye(o)&&o.name==="AuthApiError"}class wg extends Zu{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class hs extends Zu{constructor(n,r,i,c){super(n,i,c),this.name=r,this.status=i}}class cs extends hs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yj(o){return ye(o)&&o.name==="AuthSessionMissingError"}class Ti extends hs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Oi extends hs{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Ri extends hs{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jj(o){return ye(o)&&o.name==="AuthImplicitGrantRedirectError"}class Ep extends hs{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Du extends hs{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function vu(o){return ye(o)&&o.name==="AuthRetryableFetchError"}class Cp extends hs{constructor(n,r,i){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class zu extends hs{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$p=` 	
\r=`.split(""),wj=(()=>{const o=new Array(128);for(let n=0;n<o.length;n+=1)o[n]=-1;for(let n=0;n<$p.length;n+=1)o[$p[n].charCodeAt(0)]=-2;for(let n=0;n<Pi.length;n+=1)o[Pi[n].charCodeAt(0)]=n;return o})();function kp(o,n,r){if(o!==null)for(n.queue=n.queue<<8|o,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(Pi[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(Pi[i]),n.queuedBits-=6}}function _g(o,n,r){const i=wj[o];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Ap(o){const n=[],r=f=>{n.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=f=>{Sj(f,i,r)};for(let f=0;f<o.length;f+=1)_g(o.charCodeAt(f),c,u);return n.join("")}function _j(o,n){if(o<=127){n(o);return}else if(o<=2047){n(192|o>>6),n(128|o&63);return}else if(o<=65535){n(224|o>>12),n(128|o>>6&63),n(128|o&63);return}else if(o<=1114111){n(240|o>>18),n(128|o>>12&63),n(128|o>>6&63),n(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function Nj(o,n){for(let r=0;r<o.length;r+=1){let i=o.charCodeAt(r);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(o.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}_j(i,n)}}function Sj(o,n,r){if(n.utf8seq===0){if(o<=127){r(o);return}for(let i=1;i<6;i+=1)if((o>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=o&31;else if(n.utf8seq===3)n.codepoint=o&15;else if(n.utf8seq===4)n.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|o&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Ej(o){const n=[],r={queue:0,queuedBits:0},i=c=>{n.push(c)};for(let c=0;c<o.length;c+=1)_g(o.charCodeAt(c),r,i);return new Uint8Array(n)}function Cj(o){const n=[];return Nj(o,r=>n.push(r)),new Uint8Array(n)}function $j(o){const n=[],r={queue:0,queuedBits:0},i=c=>{n.push(c)};return o.forEach(c=>kp(c,r,i)),kp(null,r,i),n.join("")}function kj(o){return Math.round(Date.now()/1e3)+o}function Aj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const n=Math.random()*16|0;return(o=="x"?n:n&3|8).toString(16)})}const ea=()=>typeof window<"u"&&typeof document<"u",Rs={tested:!1,writable:!1},Ng=()=>{if(!ea())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rs.tested)return Rs.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Rs.tested=!0,Rs.writable=!0}catch{Rs.tested=!0,Rs.writable=!1}return Rs.writable};function Tj(o){const n={},r=new URL(o);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,u)=>{n[u]=c})}catch{}return r.searchParams.forEach((i,c)=>{n[c]=i}),n}const Sg=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...r)=>qs(async()=>{const{default:i}=await Promise.resolve().then(()=>Fr);return{default:i}},void 0).then(({default:i})=>i(...r)):n=fetch,(...r)=>n(...r)},Oj=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",Br=async(o,n,r)=>{await o.setItem(n,JSON.stringify(r))},Ms=async(o,n)=>{const r=await o.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},os=async(o,n)=>{await o.removeItem(n)};class Fi{constructor(){this.promise=new Fi.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}Fi.promiseConstructor=Promise;function bu(o){const n=o.split(".");if(n.length!==3)throw new zu("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!gj.test(n[i]))throw new zu("JWT not in base64url format");return{header:JSON.parse(Ap(n[0])),payload:JSON.parse(Ap(n[1])),signature:Ej(n[2]),raw:{header:n[0],payload:n[1]}}}async function Rj(o){return await new Promise(n=>{setTimeout(()=>n(null),o)})}function Mj(o,n){return new Promise((i,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const f=await o(u);if(!n(u,null,f)){i(f);return}}catch(f){if(!n(u,f)){c(f);return}}})()})}function Uj(o){return("0"+o.toString(16)).substr(-2)}function Dj(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let c="";for(let u=0;u<56;u++)c+=r.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(n),Array.from(n,Uj).join("")}async function zj(o){const r=new TextEncoder().encode(o),i=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(i);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function Lj(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const r=await zj(o);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mr(o,n,r=!1){const i=Dj();let c=i;r&&(c+="/PASSWORD_RECOVERY"),await Br(o,`${n}-code-verifier`,c);const u=await Lj(i);return[u,i===u?"plain":"s256"]}const Bj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qj(o){const n=o.headers.get(Uu);if(!n||!n.match(Bj))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Hj(o){if(!o)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(o<=n)throw new Error("JWT has expired")}function Pj(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Gj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ur(o){if(!Gj.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yu(){const o={};return new Proxy(o,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Tp(o){return JSON.parse(JSON.stringify(o))}var Vj=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(o);c<i.length;c++)n.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(o,i[c])&&(r[i[c]]=o[i[c]]);return r};const Ds=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Yj=[502,503,504];async function Op(o){var n;if(!Oj(o))throw new Du(Ds(o),0);if(Yj.includes(o.status))throw new Du(Ds(o),o.status);let r;try{r=await o.json()}catch(u){throw new wg(Ds(u),u)}let i;const c=qj(o);if(c&&c.getTime()>=jg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Cp(Ds(r),o.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new cs}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((u,f)=>u&&typeof f=="string",!0))throw new Cp(Ds(r),o.status,r.weak_password.reasons);throw new vj(Ds(r),o.status||500,i)}const Fj=(o,n,r,i)=>{const c={method:o,headers:n?.headers||{}};return o==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),r))};async function Ce(o,n,r,i){var c;const u=Object.assign({},i?.headers);u[Uu]||(u[Uu]=jg["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const f=(c=i?.query)!==null&&c!==void 0?c:{};i?.redirectTo&&(f.redirect_to=i.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await Kj(o,n,r+p,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(g):{data:Object.assign({},g),error:null}}async function Kj(o,n,r,i,c,u){const f=Fj(n,i,c,u);let p;try{p=await o(r,Object.assign({},f))}catch(g){throw console.error(g),new Du(Ds(g),0)}if(p.ok||await Op(p),i?.noResolveJson)return p;try{return await p.json()}catch(g){await Op(g)}}function ka(o){var n;let r=null;Zj(o)&&(r=Object.assign({},o),o.expires_at||(r.expires_at=kj(o.expires_in)));const i=(n=o.user)!==null&&n!==void 0?n:o;return{data:{session:r,user:i},error:null}}function Rp(o){const n=ka(o);return!n.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(n.data.weak_password=o.weak_password),n}function us(o){var n;return{data:{user:(n=o.user)!==null&&n!==void 0?n:o},error:null}}function Ij(o){return{data:o,error:null}}function Xj(o){const{action_link:n,email_otp:r,hashed_token:i,redirect_to:c,verification_type:u}=o,f=Vj(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:r,hashed_token:i,redirect_to:c,verification_type:u},g=Object.assign({},f);return{data:{properties:p,user:g},error:null}}function Qj(o){return o}function Zj(o){return o.access_token&&o.refresh_token&&o.expires_in}const ju=["global","local","others"];var Jj=function(o,n){var r={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&n.indexOf(i)<0&&(r[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(o);c<i.length;c++)n.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(o,i[c])&&(r[i[c]]=o[i[c]]);return r};class Wj{constructor({url:n="",headers:r={},fetch:i}){this.url=n,this.headers=r,this.fetch=Sg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,r=ju[0]){if(ju.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ju.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ye(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,r={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:us})}catch(i){if(ye(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:r}=n,i=Jj(n,["options"]),c=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(c.new_email=i?.newEmail,delete c.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Xj,redirectTo:r?.redirectTo})}catch(r){if(ye(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:us})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,i,c,u,f,p,g;try{const m={nextPage:null,lastPage:0,total:0},x=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(u=(c=n?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:Qj});if(x.error)throw x.error;const v=await x.json(),y=(f=x.headers.get("x-total-count"))!==null&&f!==void 0?f:0,S=(g=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return S.length>0&&(S.forEach(j=>{const C=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),$=JSON.parse(j.split(";")[1].split("=")[1]);m[`${$}Page`]=C}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(ye(m))return{data:{users:[]},error:m};throw m}}async getUserById(n){Ur(n);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:us})}catch(r){if(ye(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Ur(n);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:us})}catch(i){if(ye(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,r=!1){Ur(n);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:us})}catch(i){if(ye(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){Ur(n.userId);try{const{data:r,error:i}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:i}}catch(r){if(ye(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Ur(n.userId),Ur(n.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(ye(r))return{data:null,error:r};throw r}}}function Mp(o={}){return{getItem:n=>o[n]||null,setItem:(n,r)=>{o[n]=r},removeItem:n=>{delete o[n]}}}function e1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Dr={debug:!!(globalThis&&Ng()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Eg extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class t1 extends Eg{}async function a1(o,n,r){Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,c.name);try{return await r()}finally{Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,c.name)}}else{if(n===0)throw Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new t1(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(Dr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}e1();const s1={url:hj,storageKey:mj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Up(o,n,r){return await r()}const zr={};class il{constructor(n){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=il.nextInstanceID,il.nextInstanceID+=1,this.instanceID>0&&ea()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},s1),n);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Wj({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Sg(c.fetch),this.lock=c.lock||Up,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:ea()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=a1:this.lock=Up,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Ng()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mp(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Mp(this.memoryStorage)),ea()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var n,r;return(r=(n=zr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=zr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yg}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=Tj(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),ea()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:u}=await this._getSessionFromURL(r,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),jj(u)){const g=(n=u.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:f,redirectType:p}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ye(r)?{error:r}:{error:new wg("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,c;try{const u=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=n?.options)===null||c===void 0?void 0:c.captchaToken}},xform:ka}),{data:f,error:p}=u;if(p||!f)return{data:{user:null,session:null},error:p};const g=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(u){if(ye(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var r,i,c;try{let u;if("email"in n){const{email:x,password:v,options:y}=n;let S=null,j=null;this.flowType==="pkce"&&([S,j]=await Mr(this.storage,this.storageKey)),u=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:x,password:v,data:(r=y?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:S,code_challenge_method:j},xform:ka})}else if("phone"in n){const{phone:x,password:v,options:y}=n;u=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:v,data:(i=y?.data)!==null&&i!==void 0?i:{},channel:(c=y?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:ka})}else throw new Oi("You must provide either an email or phone number and a password");const{data:f,error:p}=u;if(p||!f)return{data:{user:null,session:null},error:p};const g=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(u){if(ye(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let r;if("email"in n){const{email:u,password:f,options:p}=n;r=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Rp})}else if("phone"in n){const{phone:u,password:f,options:p}=n;r=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Rp})}else throw new Oi("You must provide either an email or phone number and a password");const{data:i,error:c}=r;return c?{data:{user:null,session:null},error:c}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ti}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(r){if(ye(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,i,c,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;if(r==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(n){var r,i,c,u,f,p,g,m,x,v,y,S;let j,C;if("message"in n)j=n.message,C=n.signature;else{const{chain:$,wallet:O,statement:D,options:U}=n;let A;if(ea())if(typeof O=="object")A=O;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))A=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=O}const R=new URL((r=U?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const P=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U?.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),D?{statement:D}:null));let I;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")I=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)I=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)j=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),C=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${R.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(c=(i=U?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=U?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((f=U?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((p=U?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((g=U?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((m=U?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((v=(x=U?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||v===void 0)&&v.length?["Resources",...U.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const P=await A.signMessage(new TextEncoder().encode(j),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=P}}try{const{data:$,error:O}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:$j(C)},!((y=n.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(S=n.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:ka});if(O)throw O;return!$||!$.session||!$.user?{data:{user:null,session:null},error:new Ti}:($.session&&(await this._saveSession($.session),await this._notifyAllSubscribers("SIGNED_IN",$.session)),{data:Object.assign({},$),error:O})}catch($){if(ye($))return{data:{user:null,session:null},error:$};throw $}}async _exchangeCodeForSession(n){const r=await Ms(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(r??"").split("/");try{const{data:u,error:f}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:ka});if(await os(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Ti}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:f})}catch(u){if(ye(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:r,provider:i,token:c,access_token:u,nonce:f}=n,p=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:u,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ka}),{data:g,error:m}=p;return m?{data:{user:null,session:null},error:m}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Ti}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:m})}catch(r){if(ye(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,i,c,u,f;try{if("email"in n){const{email:p,options:g}=n;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await Mr(this.storage,this.storageKey));const{error:v}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(i=g?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:m,code_challenge_method:x},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in n){const{phone:p,options:g}=n,{data:m,error:x}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(c=g?.data)!==null&&c!==void 0?c:{},create_user:(u=g?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(f=g?.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:x}}throw new Oi("You must provide either an email or phone number.")}catch(p){if(ye(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var r,i;try{let c,u;"options"in n&&(c=(r=n.options)===null||r===void 0?void 0:r.redirectTo,u=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:p}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:ka});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,m=f.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(c){if(ye(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(n){var r,i,c;try{let u=null,f=null;return this.flowType==="pkce"&&([u,f]=await Mr(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=n?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:Ij})}catch(u){if(ye(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new cs;const{error:c}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:c}})}catch(n){if(ye(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:i,type:c,options:u}=n,{error:f}=await Ce(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:i,type:c,options:u}=n,{data:f,error:p}=await Ce(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:f?.message_id},error:p}}throw new Oi("You must provide either an email or phone number and a type")}catch(r){if(ye(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<xu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const f=await Ms(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=yu()}if(this.storage.isServer&&n.user){let f=this.suppressGetSessionWarning;n=new Proxy(n,{get:(g,m,x)=>(!f&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,m,x))})}return{data:{session:n},error:null}}const{session:c,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:us}):await this._useSession(async r=>{var i,c,u;const{data:f,error:p}=r;if(p)throw p;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new cs}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:us})})}catch(r){if(ye(r))return yj(r)&&(await this._removeSession(),await os(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{const{data:c,error:u}=i;if(u)throw u;if(!c.session)throw new cs;const f=c.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await Mr(this.storage,this.storageKey));const{data:m,error:x}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:f.access_token,xform:us});if(x)throw x;return f.user=m.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(i){if(ye(i))return{data:{user:null},error:i};throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new cs;const r=Date.now()/1e3;let i=r,c=!0,u=null;const{payload:f}=bu(n.access_token);if(f.exp&&(i=f.exp,c=i<=r),c){const{session:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;u={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(r){if(ye(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){const{data:f,error:p}=r;if(p)throw p;n=(i=f.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new cs;const{session:c,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ye(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!ea())throw new Ri("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Ri(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ep("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ri("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Ep("No code detected.");const{data:D,error:U}=await this._exchangeCodeForSession(n.code);if(U)throw U;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:u,refresh_token:f,expires_in:p,expires_at:g,token_type:m}=n;if(!u||!p||!f||!m)throw new Ri("No session defined in URL");const x=Math.round(Date.now()/1e3),v=parseInt(p);let y=x+v;g&&(y=parseInt(g));const S=y-x;S*1e3<=Lr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${v}s`);const j=y-v;x-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,y,x):x-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,y,x);const{data:C,error:$}=await this._getUser(u);if($)throw $;const O={provider_token:i,provider_refresh_token:c,access_token:u,expires_in:v,expires_at:y,refresh_token:f,token_type:m,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:O,redirectType:n.type},error:null}}catch(i){if(ye(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Ms(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:c,error:u}=r;if(u)return{error:u};const f=(i=c.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:p}=await this.admin.signOut(f,n);if(p&&!(bj(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await os(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=Aj(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,c;try{const{data:{session:u},error:f}=r;if(f)throw f;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,r={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await Mr(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(u){if(ye(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(ye(r))return{data:null,error:r};throw r}}async linkIdentity(n){var r;try{const{data:i,error:c}=await this._useSession(async u=>{var f,p,g,m,x;const{data:v,error:y}=u;if(y)throw y;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",S,{headers:this.headers,jwt:(x=(m=v.session)===null||m===void 0?void 0:m.access_token)!==null&&x!==void 0?x:void 0})});if(c)throw c;return ea()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:n.provider,url:i?.url},error:null}}catch(i){if(ye(i))return{data:{provider:n.provider,url:null},error:i};throw i}}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,c;const{data:u,error:f}=r;if(f)throw f;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(c=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(ye(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await Mj(async c=>(c>0&&await Rj(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:ka})),(c,u)=>{const f=200*Math.pow(2,c);return u&&vu(u)&&Date.now()+f-i<Lr})}catch(i){if(this._debug(r,"error",i),ye(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),ea()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await Ms(this.storage,this.storageKey);if(c&&this.userStorage){let f=await Ms(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await Br(this.userStorage,this.storageKey+"-user",f)),c.user=(n=f?.user)!==null&&n!==void 0?n:yu()}else if(c&&!c.user&&!c.user){const f=await Ms(this.storage,this.storageKey+"-user");f&&f?.user?(c.user=f.user,await os(this.storage,this.storageKey+"-user"),await Br(this.storage,this.storageKey,c)):c.user=yu()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const u=((r=c.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xu;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${xu}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),vu(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(c.access_token);!p&&f?.user?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new cs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Fi;const{data:u,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!u.session)throw new cs;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={session:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(c,"error",u),ye(u)){const f={session:null,error:u};return vu(u)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(n,r,i=!0){const c=`#_notifyAllSubscribers(${n})`;this._debug(c,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});const u=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,r)}catch(g){u.push(g)}});if(await Promise.all(f),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Br(this.userStorage,this.storageKey+"-user",{user:r.user});const c=Object.assign({},r);delete c.user;const u=Tp(c);await Br(this.storage,this.storageKey,u)}else{const c=Tp(r);await Br(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await os(this.storage,this.storageKey),await os(this.storage,this.storageKey+"-code-verifier"),await os(this.storage,this.storageKey+"-user"),this.userStorage&&await os(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&ea()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Lr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-n)/Lr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Lr}ms, refresh threshold is ${Mu} ticks`),c<=Mu&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Eg)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ea()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){const c=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,f]=await Mr(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(p.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);c.push(u.toString())}return i?.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${c.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;return u?{data:null,error:u}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(ye(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,c;const{data:u,error:f}=r;if(f)return{data:null,error:f};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:g,error:m}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(n.factorType==="totp"&&(!((c=g?.totp)===null||c===void 0)&&c.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(r){if(ye(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;if(u)return{data:null,error:u};const{data:f,error:p}=await Ce(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:p})})}catch(r){if(ye(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;return u?{data:null,error:u}:await Ce(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(ye(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?{data:null,error:i}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i=n?.factors||[],c=i.filter(f=>f.factor_type==="totp"&&f.status==="verified"),u=i.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:i,totp:c,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,i;const{data:{session:c},error:u}=n;if(u)return{data:null,error:u};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=bu(c.access_token);let p=null;f.aal&&(p=f.aal);let g=p;((i=(r=c.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(g="aal2");const x=f.amr||[];return{data:{currentLevel:p,nextLevel:g,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(p=>p.kid===n);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(p=>p.kid===n),i&&this.jwks_cached_at+xj>c)return i;const{data:u,error:f}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,i=u.keys.find(p=>p.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){const{data:S,error:j}=await this.getSession();if(j||!S.session)return{data:null,error:j};i=S.session.access_token}const{header:c,payload:u,signature:f,raw:{header:p,payload:g}}=bu(i);r?.allowExpired||Hj(u.exp);const m=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!m){const{error:S}=await this.getUser(i);if(S)throw S;return{data:{claims:u,header:c,signature:f},error:null}}const x=Pj(c.alg),v=await crypto.subtle.importKey("jwk",m,x,!0,["verify"]);if(!await crypto.subtle.verify(x,v,f,Cj(`${p}.${g}`)))throw new zu("Invalid JWT signature");return{data:{claims:u,header:c,signature:f},error:null}}catch(i){if(ye(i))return{data:null,error:i};throw i}}}il.nextInstanceID=0;const r1=il;class n1 extends r1{constructor(n){super(n)}}var l1=function(o,n,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function p(x){try{m(i.next(x))}catch(v){f(v)}}function g(x){try{m(i.throw(x))}catch(v){f(v)}}function m(x){x.done?u(x.value):c(x.value).then(p,g)}m((i=i.apply(o,n||[])).next())})};class i1{constructor(n,r,i){var c,u,f;if(this.supabaseUrl=n,this.supabaseKey=r,!n)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const p=dj(n),g=new URL(p);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const m=`sb-${g.hostname.split(".")[0]}-auth-token`,x={db:sj,realtime:nj,auth:Object.assign(Object.assign({},rj),{storageKey:m}),global:aj},v=fj(i??{},x);this.storageKey=(c=v.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=v.global.headers)!==null&&u!==void 0?u:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(y,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=v.auth)!==null&&f!==void 0?f:{},this.headers,v.global.fetch),this.fetch=cj(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new Sy(new URL("rest/v1",g).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new Wy(this.storageUrl.href,this.headers,this.fetch,i?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new hy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},i={}){return this.rest.rpc(n,r,i)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,r;return l1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:c,storageKey:u,flowType:f,lock:p,debug:g},m,x){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new n1({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),m),storageKey:u,autoRefreshToken:n,persistSession:r,detectSessionInUrl:i,storage:c,flowType:f,lock:p,debug:g,fetch:x,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new qy(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i?.access_token)})}_handleTokenChanged(n,r,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Cg=(o,n,r)=>new i1(o,n,r);function o1(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const o=process.version.match(/^v(\d+)\./);return o?parseInt(o[1],10)<=18:!1}o1()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $g="https://pqadmfwulrtzzsudqtnv.supabase.co",c1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBxYWRtZnd1bHJ0enpzdWRxdG52Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI4NTE3MjYsImV4cCI6MjA2ODQyNzcyNn0.pBmOGdXjPV6INcQgII1bhWhAXScPDJkHMDt1Qi4MGj4",u1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBxYWRtZnd1bHJ0enpzdWRxdG52Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1Mjg1MTcyNiwiZXhwIjoyMDY4NDI3NzI2fQ.cj4rNgWU0Rh5gNaFacSfo9O9aLR5sk_YGqUM4r-PdQ4",W=Cg($g,c1,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),Us=Cg($g,u1,{auth:{autoRefreshToken:!1,persistSession:!1}});class Aa{static async login(n,r){try{const{data:i,error:c}=await W.auth.signInWithPassword({email:n.toLowerCase().trim(),password:r});if(c||!i.user)return{user:null,error:"Credenciales inválidas"};const u=await this.getUserProfile(i.user.email||"");return u?{user:u,error:null}:(await W.auth.signOut(),{user:null,error:"Usuario no encontrado en el sistema"})}catch{return{user:null,error:"Error de conexión. Intenta nuevamente."}}}static async getUserProfile(n){try{const{data:r,error:i}=await W.from("profiles").select("*").eq("email",n.toLowerCase().trim()).single();return i||!r||r.is_active===!1?null:{id:r.id,email:r.email,nombres:r.nombres,apellido_paterno:r.apellido_paterno,apellido_materno:r.apellido_materno,username:r.username||"admin",rol:r.rol,uf_vendida:Number(r.uf_vendida)||0,fecha_registro:r.created_at||new Date().toISOString(),jefe_comercial_id:r.jefe_comercial_id,is_active:r.is_active??!0}}catch{return null}}static async logout(){try{await W.auth.signOut()}catch{}localStorage.removeItem("unidad_user"),localStorage.removeItem("unidad_session")}static getStoredUser(){try{const n=localStorage.getItem("unidad_user"),r=localStorage.getItem("unidad_session");if(!n||!r)return null;const i=1440*60*1e3,c=new Date(r);return new Date().getTime()-c.getTime()>i?(this.logout(),null):JSON.parse(n)}catch{return this.logout(),null}}static storeUser(n){localStorage.setItem("unidad_user",JSON.stringify(n)),localStorage.setItem("unidad_session",new Date().toISOString())}static async changePassword(n,r){try{const{data:{user:i},error:c}=await W.auth.getUser();if(c||!i)return{success:!1,error:"No se pudo obtener la información del usuario actual"};const{error:u}=await W.auth.signInWithPassword({email:i.email||"",password:n});if(u)return{success:!1,error:"La contraseña actual es incorrecta"};const{error:f}=await W.auth.updateUser({password:r});return f?{success:!1,error:f.message||"Error al cambiar la contraseña"}:{success:!0,error:null}}catch(i){return{success:!1,error:i.message||"Error de conexión al cambiar contraseña"}}}}const kg=_.createContext(void 0),d1=({children:o})=>{const[n,r]=_.useState(null),[i,c]=_.useState(!1),[u,f]=_.useState(!0),[p,g]=_.useState(null);_.useEffect(()=>{(()=>{try{const C=Aa.getStoredUser();C&&(r(C),c(!0))}catch{Aa.logout()}finally{f(!1)}})()},[]);const m=async(j,C)=>{f(!0),g(null);try{const{user:$,error:O}=await Aa.login(j,C);if($&&!O)return r($),c(!0),Aa.storeUser($),{success:!0};{const D=O||"Error desconocido";return g(D),{success:!1,error:D}}}catch{const O="Error de conexión. Intenta nuevamente.";return g(O),{success:!1,error:O}}finally{f(!1)}},x=async()=>{r(null),c(!1),g(null),await Aa.logout()},S={user:n,isAuthenticated:i,isLoading:u,error:p,login:m,logout:x,updateUser:j=>{if(n){const C={...n,...j};r(C),Aa.storeUser(C)}},verifyUserInDB:async()=>{if(!n)return!1;try{const j=await Aa.getUserProfile(n.email);return j?(r(j),Aa.storeUser(j),!0):(await x(),!1)}catch(j){return console.warn("Error verificando usuario en BD:",j),!0}}};return s.jsx(kg.Provider,{value:S,children:o})},Ps=()=>{const o=_.useContext(kg);if(o===void 0)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return o},Ag=_.createContext(void 0),Dp={colors:{primary:"#fd8412",secondary:"#1D1F3C",background:"#ffffff",surface:"#ffffff",surfaceVariant:"#f5f5f5",text:"#1f2937",textSecondary:"#6b7280",error:"#dc2626",success:"#059669",warning:"#d97706",border:"#e5e7eb",shadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"}},zp={colors:{primary:"#fd8412",secondary:"#1D1F3C",background:"#111827",surface:"#1f2937",surfaceVariant:"#374151",text:"#f9fafb",textSecondary:"#d1d5db",error:"#ef4444",success:"#10b981",warning:"#f59e0b",border:"#4b5563",shadow:"0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.2)"}},f1=({children:o})=>{const[n,r]=_.useState(!1);_.useEffect(()=>{const f=localStorage.getItem("theme");if(f)r(f==="dark");else{const p=window.matchMedia("(prefers-color-scheme: dark)").matches;r(p)}},[]),_.useEffect(()=>{const f=document.documentElement;Object.entries((n?zp:Dp).colors).forEach(([g,m])=>{f.style.setProperty(`--color-${g}`,m)}),n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.body.className=n?"dark":"light"},[n]);const u={isDarkMode:n,toggleTheme:()=>{const f=!n;r(f),localStorage.setItem("theme",f?"dark":"light")},theme:n?zp:Dp};return s.jsx(Ag.Provider,{value:u,children:o})},Tg=()=>{const o=_.useContext(Ag);if(o===void 0)throw new Error("useTheme debe ser usado dentro de un ThemeProvider");return o},Og=_.createContext(void 0),h1=({children:o})=>{const[n,r]=_.useState(!1),u={isChangePasswordModalOpen:n,openChangePasswordModal:()=>{r(!0)},closeChangePasswordModal:()=>{r(!1)}};return s.jsx(Og.Provider,{value:u,children:o})},Rg=()=>{const o=_.useContext(Og);if(o===void 0)throw new Error("useChangePasswordModal debe ser usado dentro de un ChangePasswordModalProvider");return o},Mg=_.createContext(void 0);function m1({children:o}){const[n,r]=_.useState(0),{isAuthenticated:i,user:c}=Ps(),u=async()=>{if(!i||!c){r(0);return}try{const{data:f,error:p}=await W.rpc("get_unread_announcements_count",{user_uuid:c.id});p||r(f||0)}catch(f){console.warn("Error refreshing badge:",f)}};return _.useEffect(()=>{i?u():r(0)},[i]),_.useEffect(()=>{if(!i)return;const f=W.channel("announcement_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"announcements"},()=>{u()}).subscribe();return()=>{W.removeChannel(f)}},[i]),s.jsx(Mg.Provider,{value:{unreadCount:n,refreshBadge:u},children:o})}function Ju(){const o=_.useContext(Mg);if(o===void 0)throw new Error("useNotificationContext must be used within a NotificationProvider");return o}/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g1=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,i)=>i?i.toUpperCase():r.toLowerCase()),Lp=o=>{const n=g1(o);return n.charAt(0).toUpperCase()+n.slice(1)},Ug=(...o)=>o.filter((n,r,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===r).join(" ").trim(),x1=o=>{for(const n in o)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=_.forwardRef(({color:o="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:f,...p},g)=>_.createElement("svg",{ref:g,...v1,width:n,height:n,stroke:o,strokeWidth:i?Number(r)*24/Number(n):r,className:Ug("lucide",c),...!u&&!x1(p)&&{"aria-hidden":"true"},...p},[...f.map(([m,x])=>_.createElement(m,x)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(o,n)=>{const r=_.forwardRef(({className:i,...c},u)=>_.createElement(b1,{ref:u,iconNode:n,className:Ug(`lucide-${p1(Lp(o))}`,`lucide-${o}`,i),...c}));return r.displayName=Lp(o),r};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Dg=be("archive",y1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Bp=be("calendar",j1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],el=be("check",w1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],N1=be("chevron-right",_1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ra=be("circle-alert",S1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zg=be("circle-check-big",E1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Lt=be("copy",C1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ki=be("credit-card",$1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Lg=be("dollar-sign",k1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ol=be("download",A1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Bg=be("ellipsis-vertical",T1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ls=be("external-link",O1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],wu=be("eye-off",R1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ca=be("eye",M1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],qg=be("file-spreadsheet",U1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ua=be("file-text",D1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Bi=be("file",z1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Wu=be("folder-open",L1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Hg=be("folder-plus",B1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],H1=be("folder",q1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Pg=be("funnel",P1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],V1=be("globe",G1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],F1=be("grid-3x3",Y1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Gg=be("house",K1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Vg=be("image",I1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Q1=be("list",X1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Yg=be("loader",Z1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qp=be("mail",J1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Fg=be("megaphone",W1);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tw=be("pen-line",ew);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ta=be("phone",aw);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$t=be("plus",sw);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],nw=be("save",rw);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Kg=be("search",lw);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Gi=be("shield",iw);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],cl=be("square-pen",ow);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tt=be("trash-2",cw);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fs=be("triangle-alert",uw);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ul=be("upload",dw);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],hw=be("user-plus",fw);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Hp=be("user",mw);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ii=be("users",pw);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Je=be("x",gw),xw=()=>{const[o,n]=_.useState(!1),[r,i]=_.useState(null),[c,u]=_.useState(!1),[f,p]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[g,m]=_.useState({});_.useEffect(()=>{const C={};f.currentPassword.length>0&&f.currentPassword.length<6&&(C.currentPassword="La contraseña actual debe tener al menos 6 caracteres"),f.newPassword.length>0&&(f.newPassword.length<8?C.newPassword="La nueva contraseña debe tener al menos 8 caracteres":/(?=.*[a-z])/.test(f.newPassword)?/(?=.*[A-Z])/.test(f.newPassword)?/(?=.*\d)/.test(f.newPassword)?/(?=.*[@$!%*?&])/.test(f.newPassword)||(C.newPassword="La contraseña debe contener al menos un carácter especial (@$!%*?&)"):C.newPassword="La contraseña debe contener al menos un número":C.newPassword="La contraseña debe contener al menos una letra mayúscula":C.newPassword="La contraseña debe contener al menos una letra minúscula"),f.confirmPassword.length>0&&f.newPassword!==f.confirmPassword&&(C.confirmPassword="Las contraseñas no coinciden"),m(C)},[f]);const x=(C,$)=>{p(O=>({...O,[C]:$})),g[C]&&m(O=>({...O,[C]:void 0}))},v=()=>f.currentPassword.trim()!==""&&f.newPassword.trim()!==""&&f.confirmPassword.trim()!==""&&Object.keys(g).length===0;return{formData:f,errors:g,isLoading:o,error:r,success:c,updateField:x,changePassword:async()=>{if(!v())return i("Por favor completa todos los campos correctamente"),!1;n(!0),i(null),u(!1);try{const C=await Aa.changePassword(f.currentPassword,f.newPassword);return C.success?(u(!0),setTimeout(()=>{p({currentPassword:"",newPassword:"",confirmPassword:""}),m({})},1e3),!0):(i(C.error||"Error al cambiar la contraseña"),!1)}catch(C){return i(C.message||"Error de conexión"),!1}finally{n(!1)}},clearError:()=>{i(null)},resetForm:()=>{p({currentPassword:"",newPassword:"",confirmPassword:""}),m({}),i(null),u(!1)},isFormValid:v()}},he=({children:o,variant:n="contained",color:r="primary",size:i="md",disabled:c=!1,loading:u=!1,onClick:f,type:p="button",className:g="",fullWidth:m=!1})=>{const x=()=>({primary:{contained:"bg-[#fd8412] text-white hover:bg-[#e6760f] focus:ring-[#fd8412]",outlined:"border-[#fd8412] text-[#fd8412] hover:bg-[#fd8412] hover:text-white focus:ring-[#fd8412]",text:"text-[#fd8412] hover:bg-[#fd8412] hover:bg-opacity-10 focus:ring-[#fd8412]"},secondary:{contained:"bg-[#1D1F3C] text-white hover:bg-opacity-90 focus:ring-[#1D1F3C]",outlined:"border-[#1D1F3C] text-[#1D1F3C] hover:bg-[#1D1F3C] hover:text-white focus:ring-[#1D1F3C]",text:"text-[#1D1F3C] hover:bg-[#1D1F3C] hover:bg-opacity-10 focus:ring-[#1D1F3C]"},error:{contained:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outlined:"border-red-600 text-red-600 hover:bg-red-600 hover:text-white focus:ring-red-500",text:"text-red-600 hover:bg-red-600 hover:bg-opacity-10 focus:ring-red-500"},success:{contained:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",outlined:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white focus:ring-green-500",text:"text-green-600 hover:bg-green-600 hover:bg-opacity-10 focus:ring-green-500"}})[r][n],v=()=>({sm:"px-3 py-2 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"})[i],y=`
    inline-flex items-center justify-center font-medium rounded-lg
    transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    ${n==="outlined"?"border-2":""}
    ${m?"w-full":""}
  `,S=x(),j=v();return s.jsxs("button",{type:p,onClick:f,disabled:c||u,className:`${y} ${S} ${j} ${g}`,children:[u&&s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),o]})},we=()=>{try{const{isDarkMode:o}=Tg();return{bg:o?"bg-gray-900":"bg-gray-50",bgCard:o?"bg-gray-800":"bg-white",bgSurface:o?"bg-gray-700":"bg-gray-100",bgTopNav:o?"bg-gray-800":"bg-[#1D1F3C]",bgSidebar:o?"bg-gray-800":"bg-white",text:o?"text-gray-100":"text-gray-900",textSecondary:o?"text-gray-400":"text-gray-600",textMuted:"text-gray-500",border:o?"border-gray-700":"border-gray-200",borderLight:o?"border-gray-600":"border-gray-300",shadow:o?"shadow-lg shadow-black/20":"shadow-sm",shadowCard:o?"shadow-xl shadow-black/30":"shadow-md",hoverBg:o?"hover:bg-gray-700":"hover:bg-gray-100",hoverText:o?"hover:text-gray-200":"hover:text-gray-800",activeBg:o?"bg-gray-700":"bg-orange-50",activeText:o?"text-orange-400":"text-[#fd8412]",activeBorder:o?"border-orange-400":"border-[#fd8412]",inputBg:o?"bg-gray-700":"bg-white",inputBorder:o?"border-gray-600":"border-gray-300",inputText:o?"text-gray-100":"text-gray-900",inputPlaceholder:o?"placeholder-gray-400":"placeholder-gray-500",modalBg:o?"bg-gray-800":"bg-white",overlayBg:o?"bg-black/60":"bg-black/50",skeletonBg:o?"bg-gray-700":"bg-gray-200"}}catch(o){return console.warn("Error al obtener tema, usando tema claro por defecto:",o),{bg:"bg-gray-50",bgCard:"bg-white",bgSurface:"bg-gray-100",bgTopNav:"bg-[#1D1F3C]",bgSidebar:"bg-white",text:"text-gray-900",textSecondary:"text-gray-600",textMuted:"text-gray-500",border:"border-gray-200",borderLight:"border-gray-300",shadow:"shadow-sm",shadowCard:"shadow-md",hoverBg:"hover:bg-gray-100",hoverText:"hover:text-gray-800",activeBg:"bg-orange-50",activeText:"text-[#fd8412]",activeBorder:"border-[#fd8412]",inputBg:"bg-white",inputBorder:"border-gray-300",inputText:"text-gray-900",inputPlaceholder:"placeholder-gray-500",modalBg:"bg-white",overlayBg:"bg-black/50",skeletonBg:"bg-gray-200"}}},vw=({isOpen:o,onClose:n})=>{const{formData:r,errors:i,isLoading:c,error:u,success:f,updateField:p,changePassword:g,resetForm:m,isFormValid:x}=xw(),{modalBg:v,text:y,textSecondary:S,border:j,inputBg:C,inputBorder:$,inputText:O,inputPlaceholder:D,bgSurface:U}=we(),[A,R]=_.useState(!1),[P,I]=_.useState(!1),[ae,X]=_.useState(!1);_.useEffect(()=>{const ee=K=>{K.key==="Escape"&&F()};return o&&(document.addEventListener("keydown",ee),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",ee),document.body.style.overflow="unset"}},[o]);const F=()=>{m(),n()},Q=async ee=>{ee.preventDefault(),await g()&&setTimeout(()=>{F()},2e3)},Y=()=>{c||(r.currentPassword||r.newPassword||r.confirmPassword?window.confirm("¿Estás seguro de que quieres cancelar? Los cambios no se guardarán.")&&F():F())},oe=()=>{const ee=r.newPassword;return[{text:"Al menos 8 caracteres",valid:ee.length>=8,icon:ee.length>=8?s.jsx(el,{className:"w-4 h-4"}):s.jsx(Ra,{className:"w-4 h-4"})},{text:"Al menos una letra minúscula",valid:/(?=.*[a-z])/.test(ee),icon:/(?=.*[a-z])/.test(ee)?s.jsx(el,{className:"w-4 h-4"}):s.jsx(Ra,{className:"w-4 h-4"})},{text:"Al menos una letra mayúscula",valid:/(?=.*[A-Z])/.test(ee),icon:/(?=.*[A-Z])/.test(ee)?s.jsx(el,{className:"w-4 h-4"}):s.jsx(Ra,{className:"w-4 h-4"})},{text:"Al menos un número",valid:/(?=.*\d)/.test(ee),icon:/(?=.*\d)/.test(ee)?s.jsx(el,{className:"w-4 h-4"}):s.jsx(Ra,{className:"w-4 h-4"})},{text:"Al menos un carácter especial (@$!%*?&)",valid:/(?=.*[@$!%*?&])/.test(ee),icon:/(?=.*[@$!%*?&])/.test(ee)?s.jsx(el,{className:"w-4 h-4"}):s.jsx(Ra,{className:"w-4 h-4"})}]};return o?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:F}),s.jsxs("div",{className:`relative ${v} rounded-2xl shadow-2xl w-full max-w-md mx-4 max-h-[calc(100vh-2rem)] overflow-hidden modal-content`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${j}`,children:[s.jsx("h2",{className:`text-xl font-semibold ${y}`,children:"Cambiar Contraseña"}),s.jsx("button",{onClick:F,className:`p-2 ${S} hover:${y} rounded-lg hover:${U} transition-colors`,disabled:c,children:s.jsx(Je,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:Q,className:"p-6 space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${S} mb-2`,children:"Contraseña Actual *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:A?"text":"password",value:r.currentPassword,onChange:ee=>p("currentPassword",ee.target.value),disabled:c,className:`w-full px-4 py-3 pr-12 ${C} ${O} ${D} border rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed ${i.currentPassword?"border-red-300":$}`,placeholder:"Ingresa tu contraseña actual"}),s.jsx("button",{type:"button",onClick:()=>R(!A),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${S} hover:${y}`,disabled:c,children:A?s.jsx(wu,{className:"w-5 h-5"}):s.jsx(ca,{className:"w-5 h-5"})})]}),i.currentPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.currentPassword})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${S} mb-2`,children:"Nueva Contraseña *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:P?"text":"password",value:r.newPassword,onChange:ee=>p("newPassword",ee.target.value),disabled:c,className:`w-full px-4 py-3 pr-12 ${C} ${O} ${D} border rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed ${i.newPassword?"border-red-300":$}`,placeholder:"Ingresa la nueva contraseña"}),s.jsx("button",{type:"button",onClick:()=>I(!P),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${S} hover:${y}`,disabled:c,children:P?s.jsx(wu,{className:"w-5 h-5"}):s.jsx(ca,{className:"w-5 h-5"})})]}),i.newPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.newPassword})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${S} mb-2`,children:"Confirmar Nueva Contraseña *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:ae?"text":"password",value:r.confirmPassword,onChange:ee=>p("confirmPassword",ee.target.value),disabled:c,className:`w-full px-4 py-3 pr-12 ${C} ${O} ${D} border rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed ${i.confirmPassword?"border-red-300":$}`,placeholder:"Confirma la nueva contraseña"}),s.jsx("button",{type:"button",onClick:()=>X(!ae),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${S} hover:${y}`,disabled:c,children:ae?s.jsx(wu,{className:"w-5 h-5"}):s.jsx(ca,{className:"w-5 h-5"})})]}),i.confirmPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.confirmPassword})]}),r.newPassword&&s.jsxs("div",{className:`p-4 ${U} rounded-xl`,children:[s.jsx("h4",{className:`text-sm font-medium ${S} mb-3`,children:"La nueva contraseña debe cumplir:"}),s.jsx("div",{className:"space-y-2",children:oe().map((ee,K)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`${ee.valid?"text-green-600":S}`,children:ee.icon}),s.jsx("span",{className:`text-xs ${ee.valid?"text-green-600":S}`,children:ee.text})]},K))})]}),u&&s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600 text-sm",children:u})}),f&&s.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsx("p",{className:"text-green-600 text-sm",children:"¡Contraseña cambiada exitosamente!"})}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx(he,{type:"submit",variant:"contained",color:"primary",disabled:c||!x,className:"flex-1 flex items-center justify-center",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Yg,{className:"w-4 h-4 animate-spin mr-2"}),"Cambiando..."]}):"Cambiar Contraseña"}),s.jsx(he,{type:"button",variant:"outlined",color:"primary",onClick:Y,disabled:c,className:"flex-1",children:"Cancelar"})]})]})]})]}):null},bw=()=>{const{isChangePasswordModalOpen:o,closeChangePasswordModal:n}=Rg();return s.jsx(s.Fragment,{children:s.jsx(vw,{isOpen:o,onClose:n})})},Lu="/assets/LogoUnidad-ZTUUO6kI.png",Pp=()=>{const[o,n]=_.useState(""),[r,i]=_.useState(""),[c,u]=_.useState(!1),[f,p]=_.useState(null),g=Bt(),{login:m,isLoading:x}=Ps(),{bg:v,bgCard:y,text:S,textSecondary:j,textMuted:C,inputBg:$,inputText:O,inputPlaceholder:D,inputBorder:U}=we(),A=async P=>{if(P.preventDefault(),p(null),!o.trim()){p("Por favor ingresa tu correo electrónico");return}if(!r.trim()){p("Por favor ingresa tu contraseña");return}try{const I=await m(o.trim(),r.trim());I.success?g("/dashboard"):p(I.error||"Error de autenticación")}catch{p("Error de conexión. Intenta nuevamente.")}},R=()=>{alert("Por favor contacta al administrador para recuperar tu contraseña.")};return s.jsx("div",{className:`min-h-screen w-full ${v} flex items-center justify-center`,children:s.jsx("div",{className:"w-full max-w-md px-4",children:s.jsxs("div",{className:`${y} rounded-2xl shadow-lg p-8 md:p-10`,children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-full h-24 mb-6 flex items-center justify-center",children:s.jsx("img",{src:Lu,alt:"Logo Unidad Seguros",className:"h-full w-auto object-contain"})}),s.jsx("h1",{className:`text-2xl font-semibold ${S} mb-2`,children:"Iniciar Sesión"})]}),f&&s.jsx("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-800 rounded-lg",children:s.jsx("p",{className:"text-red-400 text-sm",children:f})}),s.jsxs("form",{onSubmit:A,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${j} mb-2 text-left`,children:"Correo Electrónico"}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"email",id:"email",value:o,onChange:P=>n(P.target.value),className:`w-full px-4 py-3 ${$} ${O} ${D} border ${U} rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] hover:border-gray-400`,placeholder:"tu@email.com",autoCapitalize:"none",autoCorrect:"off"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:`block text-sm font-medium ${j} mb-2 text-left`,children:"Contraseña"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:c?"text":"password",id:"password",value:r,onChange:P=>i(P.target.value),className:`w-full px-4 py-3 pr-12 ${$} ${O} ${D} border ${U} rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] hover:border-gray-400`,placeholder:"••••••••"}),s.jsx("button",{type:"button",onClick:()=>u(!c),className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${C} hover:text-[#fd8412] transition-colors duration-200 p-1 rounded`,children:c?s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):s.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),s.jsx("button",{type:"submit",disabled:x,className:"w-full bg-[#fd8412] text-white py-3 px-4 rounded-xl font-medium hover:bg-[#e6760f] focus:ring-2 focus:ring-[#fd8412] focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98]",children:x?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Iniciando Sesión..."]}):"Iniciar Sesión"}),s.jsx("div",{className:"text-center pt-2",children:s.jsx("button",{type:"button",onClick:R,disabled:x,className:"text-[#fd8412] hover:text-[#e6760f] text-sm font-medium transition-colors duration-200 disabled:opacity-50 hover:underline",children:"¿Olvidaste tu contraseña?"})})]})]})})})},Kr=({onLogout:o,showLogout:n=!1,onMenuToggle:r,showMenuButton:i=!1,showUserIcon:c=!0,onUserIconClick:u,isSidebarOpen:f=!1})=>{const p=Bt(),{bgTopNav:g,shadow:m,border:x}=we(),v=()=>{o?o():p("/login")},y=()=>{u?u():p("/profile")};return s.jsx(s.Fragment,{children:s.jsx("header",{className:`${g} ${m} border-b ${x} fixed top-0 left-0 right-0 z-50`,children:s.jsxs("div",{className:"w-full px-6",children:[s.jsxs("div",{className:"grid grid-cols-3 items-center py-4 lg:hidden",children:[s.jsx("div",{className:"flex justify-start",children:i&&s.jsx("button",{onClick:r,className:"p-2 text-white hover:bg-white hover:bg-opacity-10 rounded-lg transition-colors",children:f?s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"h-20 w-auto",children:s.jsx("img",{src:Lu,alt:"Logo Unidad Seguros",className:"h-full w-auto object-contain"})})}),s.jsxs("div",{className:"flex justify-end",children:[c&&s.jsx("button",{onClick:y,className:"p-2 text-white rounded-lg transition-all duration-200 ease-in-out",style:{backgroundColor:"transparent"},onMouseEnter:S=>{S.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onMouseLeave:S=>{S.currentTarget.style.backgroundColor="transparent"},title:"Perfil de usuario",children:s.jsx(Hp,{className:"w-6 h-6"})}),n&&s.jsx("button",{onClick:v,className:"ml-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Cerrar sesión"})]})]}),s.jsxs("div",{className:"hidden lg:flex justify-between items-center py-4",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("div",{className:"h-20 w-auto",children:s.jsx("img",{src:Lu,alt:"Logo Unidad Seguros",className:"h-full w-auto object-contain"})})}),s.jsxs("div",{className:"flex items-center",children:[c&&s.jsx("button",{onClick:y,className:"p-2 text-white rounded-lg transition-all duration-200 ease-in-out",style:{backgroundColor:"transparent"},onMouseEnter:S=>{S.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onMouseLeave:S=>{S.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},title:"Perfil de usuario",children:s.jsx(Hp,{className:"w-6 h-6"})}),n&&s.jsx("button",{onClick:v,className:"ml-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Cerrar sesión"})]})]})]})})})},Ig={admin:{dashboard:{view:!0,create:!0,edit:!0,delete:!0,upload:!0,download:!0},usuarios:{view:!0,create:!0,edit:!0,delete:!0,upload:!1,download:!1},archivos:{view:!0,create:!0,edit:!0,delete:!0,upload:!0,download:!0},anuncios:{view:!0,create:!0,edit:!0,delete:!0,upload:!0,download:!0},asistencias_siniestros:{view:!0,create:!0,edit:!0,delete:!0,upload:!1,download:!1},metodos_pago:{view:!0,create:!0,edit:!0,delete:!0,upload:!1,download:!1}},admin_comercial:{dashboard:{view:!0,create:!0,edit:!0,delete:!0,upload:!0,download:!0},usuarios:{view:!0,create:!0,edit:!0,delete:!1,upload:!1,download:!1},archivos:{view:!0,create:!0,edit:!0,delete:!0,upload:!0,download:!0},anuncios:{view:!0,create:!0,edit:!0,delete:!0,upload:!0,download:!0},asistencias_siniestros:{view:!0,create:!0,edit:!0,delete:!0,upload:!1,download:!1},metodos_pago:{view:!0,create:!0,edit:!0,delete:!0,upload:!1,download:!1}},admin_operaciones:{dashboard:{view:!0,create:!0,edit:!0,delete:!0,upload:!0,download:!0},usuarios:{view:!0,create:!0,edit:!0,delete:!0,upload:!1,download:!1},archivos:{view:!0,create:!0,edit:!0,delete:!0,upload:!0,download:!0},anuncios:{view:!0,create:!0,edit:!0,delete:!0,upload:!0,download:!0},asistencias_siniestros:{view:!0,create:!0,edit:!0,delete:!0,upload:!1,download:!1},metodos_pago:{view:!0,create:!0,edit:!0,delete:!0,upload:!1,download:!1}},broker:{dashboard:{view:!0,create:!1,edit:!1,delete:!1,upload:!1,download:!0},usuarios:{view:!1,create:!1,edit:!1,delete:!1,upload:!1,download:!1},archivos:{view:!0,create:!1,edit:!1,delete:!1,upload:!1,download:!0},anuncios:{view:!0,create:!1,edit:!1,delete:!1,upload:!1,download:!0},asistencias_siniestros:{view:!0,create:!1,edit:!1,delete:!1,upload:!1,download:!1},metodos_pago:{view:!0,create:!1,edit:!1,delete:!1,upload:!1,download:!1}},broker_externo:{dashboard:{view:!0,create:!1,edit:!1,delete:!1,upload:!1,download:!0},usuarios:{view:!1,create:!1,edit:!1,delete:!1,upload:!1,download:!1},archivos:{view:!0,create:!1,edit:!1,delete:!1,upload:!1,download:!0},anuncios:{view:!0,create:!1,edit:!1,delete:!1,upload:!1,download:!0},asistencias_siniestros:{view:!0,create:!1,edit:!1,delete:!1,upload:!1,download:!1},metodos_pago:{view:!0,create:!1,edit:!1,delete:!1,upload:!1,download:!1}}},nl=(o,n,r)=>{const i=Ig[o];if(!i)return!1;const c=i[n];return c&&c[r]||!1},yw=(o,n)=>nl(o,n,"view"),jw=(o,n)=>{const r=Ig[o];return r?r[n]||{}:{}},ww=(o,n)=>nl(o,n,"create")||nl(o,n,"edit")||nl(o,n,"upload"),Qt=()=>{const{user:o}=Ps(),n=o?.rol||"broker";return{userRole:n,can:(v,y)=>nl(n,v,y),canAccess:v=>yw(n,v),getPermissions:v=>jw(n,v),canWriteTo:v=>ww(n,v),isAdmin:()=>n==="admin",isAdminComercial:()=>n==="admin_comercial",isAdminOperaciones:()=>n==="admin_operaciones",isBroker:()=>n==="broker"||n==="broker_externo",isBrokerExterno:()=>n==="broker_externo"}},Ir=({isOpen:o,onClose:n})=>{const r=Bt(),i=da(),{canAccess:c}=Qt(),{bgSidebar:u,border:f,text:p,textSecondary:g,activeBg:m,activeText:x,activeBorder:v,hoverBg:y,hoverText:S}=we(),{unreadCount:j}=Ju(),$=[{id:"inicio",label:"Inicio",path:"/dashboard",icon:Gg,module:"dashboard"},{id:"usuarios",label:"Usuarios",path:"/usuarios",icon:Ii,module:"usuarios"},{id:"archivos",label:"Archivos",path:"/archivos",icon:Wu,module:"archivos"},{id:"anuncios",label:"Anuncios",path:"/anuncios",icon:Fg,module:"anuncios",hasNotifications:!0},{id:"asistencias-siniestros",label:"Asistencias y Siniestros",path:"/asistencias-siniestros",icon:Gi,module:"asistencias_siniestros"},{id:"metodos-pago",label:"Métodos de Pago",path:"/metodos-pago",icon:Ki,module:"metodos_pago"}].filter(A=>c(A.module)),O=A=>{r(A),window.innerWidth<=768&&n()},D=A=>i.pathname===A,U=A=>!A.hasNotifications||!c("anuncios")||j===0?null:s.jsx("span",{className:`
        ml-auto
        inline-flex items-center justify-center
        w-5 h-5
        text-[10px] font-semibold
        bg-red-500/90 backdrop-blur-sm
        text-white
        rounded-full
        shadow-sm
        border border-red-400/20
        transition-all duration-200 ease-in-out
        hover:bg-red-500 hover:scale-105
      `,children:j>99?"99+":j});return o?s.jsxs(s.Fragment,{children:[window.innerWidth<=768&&s.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n}),s.jsxs("div",{className:`
        fixed lg:static inset-y-0 left-0 z-50 lg:z-auto
        w-64 ${u} border-r ${f} shadow-lg lg:shadow-none
        transform ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0
        transition-transform duration-300 ease-in-out
        flex flex-col
      `,children:[s.jsx("div",{className:"h-32 lg:h-16"}),s.jsx("nav",{className:"flex-1 px-4 py-1 space-y-1",children:$.map(A=>{const R=A.icon;return s.jsxs("button",{onClick:()=>O(A.path),className:`
                  w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg
                  transition-colors duration-200
                  ${D(A.path)?`${m} ${x} border-l-4 ${v}`:`${p} ${y} ${S}`}
                `,children:[s.jsx(R,{size:20,className:`mr-3 ${D(A.path)?x:g}`}),A.label,U(A)]},A.id)})}),s.jsx("div",{className:`mt-auto p-4 border-t ${f}`,children:s.jsx("div",{className:"text-center",children:s.jsx("span",{className:`text-xs ${g}`,children:"Versión Beta"})})})]})]}):null};class bt{static async getFolderContents(n="/"){try{let r=W.from("files").select("*").eq("type","folder").eq("is_deleted",!1),i=W.from("files").select("*").eq("type","file").eq("is_deleted",!1);if(n==="/")r=r.or("path.eq./,parent_id.is.null"),i=i.or("path.eq./,parent_id.is.null");else{const{data:x}=await W.from("files").select("id").eq("type","folder").eq("path",n).eq("is_deleted",!1).single();if(x)r=r.eq("parent_id",x.id),i=i.eq("parent_id",x.id);else return{data:{folders:[],files:[]},error:null}}const{data:c,error:u}=await r.order("name"),{data:f,error:p}=await i.order("name");if(u)return{data:null,error:u.message};if(p)return{data:null,error:p.message};const g=c?.map(x=>({id:x.id,name:x.name,type:"folder",created_at:x.created_at,updated_at:x.updated_at,path:x.path}))||[],m=f?.map(x=>({id:x.id,name:x.name,type:"file",size:x.size||0,created_at:x.created_at,updated_at:x.updated_at,path:x.path,mime_type:x.mime_type,storage_path:x.storage_path}))||[];return{data:{folders:g,files:m},error:null}}catch(r){return{data:null,error:r.message||"Error al obtener contenido de la carpeta"}}}static async createFolder(n,r="/"){try{const i=r==="/"?`/${n}`:`${r}/${n}`,{data:c}=await W.from("files").select("id").eq("type","folder").eq("path",i).eq("is_deleted",!1).single();if(c)return{data:null,error:"Ya existe una carpeta con ese nombre en esta ubicación"};const{data:{user:u}}=await W.auth.getUser();if(!u)return{data:null,error:"Usuario no autenticado"};let f=null;if(r!=="/"){const{data:x}=await W.from("files").select("id").eq("type","folder").eq("path",r).eq("is_deleted",!1).single();f=x?.id||null}const{data:p,error:g}=await W.from("files").insert({name:n,type:"folder",path:i,parent_id:f,created_by:u.id}).select().single();return g?{data:null,error:g.message}:{data:{id:p.id,name:p.name,type:"folder",created_at:p.created_at,updated_at:p.updated_at,path:p.path},error:null}}catch(i){return{data:null,error:i.message||"Error al crear la carpeta"}}}static async uploadFile(n,r,i,c,u="/"){try{const f=u==="/"?`/${n}`:`${u}/${n}`,{data:p}=await W.from("files").select("id").eq("type","file").eq("path",f).eq("is_deleted",!1).single();if(p)return{data:null,error:"Ya existe un archivo con ese nombre en esta ubicación"};const{data:{user:g}}=await W.auth.getUser();if(!g)return{data:null,error:"Usuario no autenticado"};let m=null;if(u!=="/"){const{data:O}=await W.from("files").select("id").eq("type","folder").eq("path",u).eq("is_deleted",!1).single();m=O?.id||null}const x=n.split(".").pop()||"",v=`${Date.now()}_${Math.random().toString(36).substring(2)}.${x}`,y=`files/${g.id}/${v}`,{error:S}=await W.storage.from("files").upload(y,r,{contentType:i,upsert:!1});if(S)return{data:null,error:`Error al subir archivo: ${S.message}`};const{data:j,error:C}=await W.from("files").insert({name:n,type:"file",size:c,path:f,mime_type:i,parent_id:m,created_by:g.id,storage_path:y}).select().single();return C?(await W.storage.from("files").remove([y]),{data:null,error:C.message}):{data:{id:j.id,name:j.name,type:"file",size:j.size||0,created_at:j.created_at,updated_at:j.updated_at,path:j.path,mime_type:j.mime_type,storage_path:j.storage_path},error:null}}catch(f){return{data:null,error:f.message||"Error al subir el archivo"}}}static async deleteItem(n){try{const{data:r,error:i}=await W.from("files").select("type, storage_path").eq("id",n).eq("is_deleted",!1).single();if(i)return{data:null,error:i.message};if(r?.type==="file"&&r?.storage_path){const{error:u}=await W.storage.from("files").remove([r.storage_path])}const{error:c}=await W.from("files").update({is_deleted:!0}).eq("id",n);return c?{data:null,error:c.message}:{data:null,error:null}}catch(r){return{data:null,error:r.message||"Error al eliminar el elemento"}}}static async renameItem(n,r){try{const{data:i,error:c}=await W.from("files").select("*").eq("id",n).eq("is_deleted",!1).single();if(c||!i)return{data:null,error:"Elemento no encontrado"};const u=i.path,f=u.substring(0,u.lastIndexOf("/")),p=f===""?`/${r}`:`${f}/${r}`,{data:g}=await W.from("files").select("id").eq("type",i.type).eq("path",p).eq("is_deleted",!1).neq("id",n).single();if(g)return{data:null,error:"Ya existe un elemento con ese nombre en esta ubicación"};const{error:m}=await W.from("files").update({name:r,path:p}).eq("id",n);return m?{data:null,error:m.message}:{data:null,error:null}}catch(i){return{data:null,error:i.message||"Error al renombrar el elemento"}}}static async getFileDownloadUrl(n){try{const{data:r,error:i}=await W.from("files").select("storage_path").eq("id",n).eq("is_deleted",!1).single();if(i||!r?.storage_path)return{data:null,error:"Archivo no encontrado"};const{data:c}=W.storage.from("files").getPublicUrl(r.storage_path);return{data:c.publicUrl,error:null}}catch(r){return{data:null,error:r.message||"Error al obtener URL de descarga"}}}static async getTotalFileCount(){try{const{data:n,error:r}=await W.from("files").select("id",{count:"exact"}).eq("type","file").eq("is_deleted",!1);return r?{data:null,error:r.message}:{data:n?.length||0,error:null}}catch(n){return{data:null,error:n.message||"Error al obtener conteo"}}}static async getFileById(n){try{const{data:r,error:i}=await W.from("files").select("*").eq("id",n).eq("is_deleted",!1).single();return i?{data:null,error:i.message}:r?{data:{id:r.id,name:r.name,type:"file",size:r.size||0,created_at:r.created_at,updated_at:r.updated_at,path:r.path,mime_type:r.mime_type,storage_path:r.storage_path},error:null}:{data:null,error:"Archivo no encontrado"}}catch(r){return{data:null,error:r.message||"Error al obtener archivo"}}}static async getFilesByIds(n){try{if(n.length===0)return{data:[],error:null};const{data:r,error:i}=await W.from("files").select("*").in("id",n).eq("is_deleted",!1).order("name");return i?{data:null,error:i.message}:{data:(r||[]).map(u=>({id:u.id,name:u.name,type:"file",size:u.size||0,created_at:u.created_at,updated_at:u.updated_at,path:u.path,mime_type:u.mime_type,storage_path:u.storage_path})),error:null}}catch(r){return{data:null,error:r.message||"Error al obtener archivos"}}}}class ml{constructor(n=0,r="Network Error"){this.status=n,this.text=r}}const _w=()=>{if(!(typeof localStorage>"u"))return{get:o=>Promise.resolve(localStorage.getItem(o)),set:(o,n)=>Promise.resolve(localStorage.setItem(o,n)),remove:o=>Promise.resolve(localStorage.removeItem(o))}},mt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:_w()},ed=o=>o?typeof o=="string"?{publicKey:o}:o.toString()==="[object Object]"?o:{}:{},Nw=(o,n="https://api.emailjs.com")=>{if(!o)return;const r=ed(o);mt.publicKey=r.publicKey,mt.blockHeadless=r.blockHeadless,mt.storageProvider=r.storageProvider,mt.blockList=r.blockList,mt.limitRate=r.limitRate,mt.origin=r.origin||n},Xg=async(o,n,r={})=>{const i=await fetch(mt.origin+o,{method:"POST",headers:r,body:n}),c=await i.text(),u=new ml(i.status,c);if(i.ok)return u;throw u},Qg=(o,n,r)=>{if(!o||typeof o!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!n||typeof n!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||typeof r!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Sw=o=>{if(o&&o.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Zg=o=>o.webdriver||!o.languages||o.languages.length===0,Jg=()=>new ml(451,"Unavailable For Headless Browser"),Ew=(o,n)=>{if(!Array.isArray(o))throw"The BlockList list has to be an array";if(typeof n!="string")throw"The BlockList watchVariable has to be a string"},Cw=o=>!o.list?.length||!o.watchVariable,$w=(o,n)=>o instanceof FormData?o.get(n):o[n],Wg=(o,n)=>{if(Cw(o))return!1;Ew(o.list,o.watchVariable);const r=$w(n,o.watchVariable);return typeof r!="string"?!1:o.list.includes(r)},ex=()=>new ml(403,"Forbidden"),kw=(o,n)=>{if(typeof o!="number"||o<0)throw"The LimitRate throttle has to be a positive number";if(n&&typeof n!="string")throw"The LimitRate ID has to be a non-empty string"},Aw=async(o,n,r)=>{const i=Number(await r.get(o)||0);return n-Date.now()+i},tx=async(o,n,r)=>{if(!n.throttle||!r)return!1;kw(n.throttle,n.id);const i=n.id||o;return await Aw(i,n.throttle,r)>0?!0:(await r.set(i,Date.now().toString()),!1)},ax=()=>new ml(429,"Too Many Requests"),Tw=async(o,n,r,i)=>{const c=ed(i),u=c.publicKey||mt.publicKey,f=c.blockHeadless||mt.blockHeadless,p=c.storageProvider||mt.storageProvider,g={...mt.blockList,...c.blockList},m={...mt.limitRate,...c.limitRate};return f&&Zg(navigator)?Promise.reject(Jg()):(Qg(u,o,n),Sw(r),r&&Wg(g,r)?Promise.reject(ex()):await tx(location.pathname,m,p)?Promise.reject(ax()):Xg("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:u,service_id:o,template_id:n,template_params:r}),{"Content-type":"application/json"}))},Ow=o=>{if(!o||o.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Rw=o=>typeof o=="string"?document.querySelector(o):o,Mw=async(o,n,r,i)=>{const c=ed(i),u=c.publicKey||mt.publicKey,f=c.blockHeadless||mt.blockHeadless,p=mt.storageProvider||c.storageProvider,g={...mt.blockList,...c.blockList},m={...mt.limitRate,...c.limitRate};if(f&&Zg(navigator))return Promise.reject(Jg());const x=Rw(r);Qg(u,o,n),Ow(x);const v=new FormData(x);return Wg(g,v)?Promise.reject(ex()):await tx(location.pathname,m,p)?Promise.reject(ax()):(v.append("lib_version","4.4.1"),v.append("service_id",o),v.append("template_id",n),v.append("user_id",u),Xg("/api/v1.0/email/send-form",v))},Gp={init:Nw,send:Tw,sendForm:Mw,EmailJSResponseStatus:ml},_u="service_inmnn26",Nu="template_7thgtqu",Mi="cmQtuafJJhb0fT8Ol";class Uw{static initializeEmailJS(){try{Gp.init(Mi)}catch{throw new Error("Error en la inicialización de EmailJS")}}static async sendUserCredentials(n,r,i){try{if(!n||!r.nombres||!r.apellido_paterno||!i.username||!i.password)return{success:!1,error:"Faltan datos requeridos para enviar el email"};this.initializeEmailJS();const u={to_name:`${r.nombres} ${r.apellido_paterno}${r.apellido_materno?` ${r.apellido_materno}`:""}`.trim(),user_email:n,username:i.username,password:i.password,current_year:new Date().getFullYear().toString(),to_email:n},f=await Gp.send(_u,Nu,u,Mi);return f.status===200?{success:!0,error:null}:{success:!1,error:`Error del servidor de email: ${f.status}`}}catch(c){let u="Error enviando email";return c?.message?u=c.message:c?.text?u=c.text:typeof c=="string"&&(u=c),{success:!1,error:u}}}static async testEmailConfiguration(){try{const n={serviceId:_u,templateId:Nu,publicKey:Mi};return!n.serviceId||!n.templateId||n.publicKey,this.initializeEmailJS(),{success:!0,error:null}}catch(n){return{success:!1,error:n?.message||"Error en la configuración"}}}static async sendTestEmail(n){return this.sendUserCredentials(n,{nombres:"Usuario",apellido_paterno:"Prueba",apellido_materno:"Test"},{username:"usuarioprueba",password:"TempPassword123!"})}}const Dw=o=>{if(!o||o.trim().length===0)return!0;const n=o.replace(/[.-]/g,"");if(n.length<2)return!1;const r=n.slice(0,-1),i=n.slice(-1).toUpperCase();if(!/^[0-9]+$/.test(r))return!1;let c=0,u=2;for(let g=r.length-1;g>=0;g--)c+=parseInt(r[g])*u,u=u===7?2:u+1;const f=11-c%11;return(f===11?"0":f===10?"K":f.toString())===i};class ds{static async getJefesComercialesDisponibles(){try{const{data:n,error:r}=await W.from("profiles").select("id, nombres, apellido_paterno, apellido_materno").in("rol",["admin_comercial"]).order("nombres",{ascending:!0});return r?{jefes:null,error:"Error al cargar los jefes comerciales"}:n?{jefes:n.map(c=>({id:c.id,nombre:`${c.nombres} ${c.apellido_paterno}${c.apellido_materno?` ${c.apellido_materno}`:""}`.trim()})),error:null}:{jefes:[],error:null}}catch{return{jefes:null,error:"Error de conexión al cargar jefes comerciales"}}}static async getAllUsers(){return this.getUsersWithFilters({page:1,limit:100})}static async getUsersWithFilters(n={}){try{const{rol:r,region:i,fecha_desde:c,fecha_hasta:u,search:f,page:p=1,limit:g=10}=n;let m=W.from("profiles").select("*").order("created_at",{ascending:!1});r&&(m=m.eq("rol",r)),i&&(m=m.eq("region",i)),c&&(m=m.gte("fecha_registro",c)),u&&(m=m.lte("fecha_registro",u)),f&&(m=m.or(`nombres.ilike.%${f}%,apellido_paterno.ilike.%${f}%,apellido_materno.ilike.%${f}%,email.ilike.%${f}%,username.ilike.%${f}%,rut.ilike.%${f}%`));const{count:x}=await W.from("profiles").select("*",{count:"exact",head:!0}),v=(p-1)*g,y=v+g-1;m=m.range(v,y);const{data:S,error:j}=await m;if(j)return console.error("Error en getUsersWithFilters:",j),{users:null,total:0,page:p,limit:g,hasMore:!1,error:"Error al cargar los usuarios"};if(!S)return{users:[],total:0,page:p,limit:g,hasMore:!1,error:null};const{data:C,error:$}=await W.from("user_contracts").select("*").eq("is_active",!0);$&&console.error("Error al cargar contratos:",$);const O=new Map;C&&C.forEach(R=>{O.set(R.user_id,R)});const D=S.map(R=>({id:R.id,email:R.email,nombres:R.nombres,apellido_paterno:R.apellido_paterno,apellido_materno:R.apellido_materno,username:R.username||`${R.nombres.toLowerCase()}.${R.apellido_paterno.toLowerCase()}`,rol:R.rol,uf_vendida:Number(R.uf_vendida)||0,fecha_registro:R.created_at||new Date().toISOString(),jefe_comercial_id:R.jefe_comercial_id,rut:R.rut,telefono:R.telefono,direccion:R.direccion,comuna:R.comuna,region:R.region,fecha_nacimiento:R.fecha_nacimiento,fecha_inicio_contrato:R.fecha_inicio_contrato,nuevas_ventas:Number(R.nuevas_ventas)||0,renovaciones:Number(R.renovaciones)||0,comentarios:R.comentarios,is_active:R.is_active??!0,contract:O.get(R.id)||null})),U=x||0,A=p*g<U;return{users:D,total:U,page:p,limit:g,hasMore:A,error:null}}catch(r){return console.error("Error en getAllUsers catch:",r),{users:null,total:0,page:1,limit:5,hasMore:!1,error:"Error de conexión al cargar usuarios"}}}static async getUserById(n){try{const{data:r,error:i}=await W.from("profiles").select("*").eq("id",n).single();if(i||!r)return console.error("Error en getUserById:",i),{user:null,error:"Usuario no encontrado"};const{data:c,error:u}=await W.from("user_contracts").select("*").eq("user_id",n).eq("is_active",!0).single();return u&&u.code!=="PGRST116"&&console.error("Error al cargar contrato:",u),{user:{id:r.id,email:r.email,nombres:r.nombres,apellido_paterno:r.apellido_paterno,apellido_materno:r.apellido_materno,username:r.username||`${r.nombres.toLowerCase()}.${r.apellido_paterno.toLowerCase()}`,rol:r.rol,uf_vendida:Number(r.uf_vendida)||0,fecha_registro:r.created_at||new Date().toISOString(),jefe_comercial_id:r.jefe_comercial_id,rut:r.rut,telefono:r.telefono,direccion:r.direccion,comuna:r.comuna,region:r.region,fecha_nacimiento:r.fecha_nacimiento,fecha_inicio_contrato:r.fecha_inicio_contrato,nuevas_ventas:Number(r.nuevas_ventas)||0,renovaciones:Number(r.renovaciones)||0,comentarios:r.comentarios,is_active:r.is_active??!0,contract:c||null},error:null}}catch(r){return console.error("Error en getUserById catch:",r),{user:null,error:"Error al cargar el usuario"}}}static async createContractRecord(n,r){try{const{data:i,error:c}=await W.from("user_contracts").insert([{user_id:n,file_id:r,is_active:!0,uploaded_by:(await W.auth.getUser()).data.user?.id}]).select().single();return c||!i?{contract:null,error:c?.message||"Error al crear registro de contrato"}:{contract:i,error:null}}catch{return{contract:null,error:"Error de conexión al crear contrato"}}}static async createUserComplete(n){try{if(!n.contractFile)return{user:null,credentials:null,error:"El contrato firmado es obligatorio"};if(n.contractFile.type!=="application/pdf")return{user:null,credentials:null,error:"El contrato debe ser un archivo PDF"};const{data:r}=await W.from("profiles").select("email").eq("email",n.email).single();if(r)return{user:null,credentials:null,error:"Ya existe un usuario con este correo electrónico"};const{username:i,error:c}=await this.generateUsername(n.nombres,n.apellido_paterno,n.apellido_materno);if(c||!i)return{user:null,credentials:null,error:c||"Error generando username"};const{password:u,error:f}=this.generateTemporaryPassword(n.nombres,n.apellido_paterno,n.apellido_materno);if(f||!u)return{user:null,credentials:null,error:f||"Error generando contraseña"};if(!Us)return{user:null,credentials:null,error:"Configuración admin de Supabase no disponible"};const{data:p,error:g}=await Us.auth.admin.createUser({email:n.email,password:u,email_confirm:!0,user_metadata:{nombres:n.nombres,apellido_paterno:n.apellido_paterno,apellido_materno:n.apellido_materno,username:i,rol:n.rol,temp_password:u,first_login:!0}});if(g||!p.user)return{user:null,credentials:null,error:g?.message||"Error creando usuario en sistema de autenticación"};const m={id:p.user.id,email:n.email,nombres:n.nombres,apellido_paterno:n.apellido_paterno,apellido_materno:n.apellido_materno,username:i,rol:n.rol,uf_vendida:0,jefe_comercial_id:n.jefe_comercial_id||null,rut:n.rut&&Dw(n.rut)?n.rut.replace(/[.-]/g,""):null,telefono:n.telefono||null,direccion:n.direccion||null,comuna:n.comuna||null,region:n.region||null,fecha_nacimiento:n.fecha_nacimiento||null,fecha_inicio_contrato:n.fecha_inicio_contrato||null,nuevas_ventas:n.nuevas_ventas||0,renovaciones:n.renovaciones||0,comentarios:n.comentarios||null,is_active:n.is_active??!0},{data:x,error:v}=await W.from("profiles").insert([m]).select().single();if(v||!x){try{await Us.auth.admin.deleteUser(p.user.id)}catch{}return{user:null,credentials:null,error:v?.message||"Error creando perfil de usuario"}}const{data:y,error:S}=await bt.uploadFile(n.contractFile.name,n.contractFile,n.contractFile.type,n.contractFile.size,`/contratos/${p.user.id}`);if(S||!y){try{await Us.auth.admin.deleteUser(p.user.id),await W.from("profiles").delete().eq("id",p.user.id)}catch{}return{user:null,credentials:null,error:S||"Error al subir contrato"}}const{contract:j,error:C}=await this.createContractRecord(p.user.id,y.id);if(C||!j){try{await Us.auth.admin.deleteUser(p.user.id),await W.from("profiles").delete().eq("id",p.user.id),await bt.deleteItem(y.id)}catch{}return{user:null,credentials:null,error:C||"Error al registrar contrato"}}const{success:$,error:O}=await Uw.sendUserCredentials(n.email,{nombres:n.nombres,apellido_paterno:n.apellido_paterno,apellido_materno:n.apellido_materno},{username:i,password:u});return{user:{id:x.id,email:x.email,nombres:x.nombres,apellido_paterno:x.apellido_paterno,apellido_materno:x.apellido_materno,username:x.username,rol:x.rol,uf_vendida:Number(x.uf_vendida)||0,fecha_registro:x.created_at||new Date().toISOString(),jefe_comercial_id:x.jefe_comercial_id,rut:x.rut,telefono:x.telefono,direccion:x.direccion,comuna:x.comuna,region:x.region,fecha_nacimiento:x.fecha_nacimiento,fecha_inicio_contrato:x.fecha_inicio_contrato,nuevas_ventas:Number(x.nuevas_ventas)||0,renovaciones:Number(x.renovaciones)||0,comentarios:x.comentarios,is_active:x.is_active??!0,contract:j},credentials:{username:i,password:u},error:$?null:`Usuario creado exitosamente, pero falló el envío de email: ${O}`}}catch{return{user:null,credentials:null,error:"Error general en la creación del usuario"}}}static async updateUser(n,r){try{const i={};r.email&&(i.email=r.email),r.nombres&&(i.nombres=r.nombres),r.apellido_paterno&&(i.apellido_paterno=r.apellido_paterno),r.apellido_materno!==void 0&&(i.apellido_materno=r.apellido_materno),r.username&&(i.username=r.username),r.rol&&(i.rol=r.rol),r.uf_vendida!==void 0&&(i.uf_vendida=r.uf_vendida),r.jefe_comercial_id!==void 0&&(i.jefe_comercial_id=r.jefe_comercial_id),r.rut!==void 0&&(i.rut=r.rut),r.telefono!==void 0&&(i.telefono=r.telefono),r.direccion!==void 0&&(i.direccion=r.direccion),r.comuna!==void 0&&(i.comuna=r.comuna),r.region!==void 0&&(i.region=r.region),r.fecha_nacimiento!==void 0&&(i.fecha_nacimiento=r.fecha_nacimiento),r.fecha_inicio_contrato!==void 0&&(i.fecha_inicio_contrato=r.fecha_inicio_contrato),r.nuevas_ventas!==void 0&&(i.nuevas_ventas=r.nuevas_ventas),r.renovaciones!==void 0&&(i.renovaciones=r.renovaciones),r.comentarios!==void 0&&(i.comentarios=r.comentarios),r.is_active!==void 0&&(i.is_active=r.is_active);const{data:c,error:u}=await W.from("profiles").update(i).eq("id",n).select("*").single();if(u||!c)return{user:null,error:u?.message||"Error al actualizar el usuario"};const{data:f,error:p}=await W.from("user_contracts").select("*").eq("user_id",n).eq("is_active",!0).single();return p&&p.code!=="PGRST116"&&console.error("Error al cargar contrato:",p),{user:{id:c.id,email:c.email,nombres:c.nombres,apellido_paterno:c.apellido_paterno,apellido_materno:c.apellido_materno,username:c.username||`${c.nombres.toLowerCase()}.${c.apellido_paterno.toLowerCase()}`,rol:c.rol,uf_vendida:Number(c.uf_vendida)||0,fecha_registro:c.created_at||new Date().toISOString(),jefe_comercial_id:c.jefe_comercial_id,rut:c.rut,telefono:c.telefono,direccion:c.direccion,comuna:c.comuna,region:c.region,fecha_nacimiento:c.fecha_nacimiento,fecha_inicio_contrato:c.fecha_inicio_contrato,nuevas_ventas:Number(c.nuevas_ventas)||0,renovaciones:Number(c.renovaciones)||0,comentarios:c.comentarios,is_active:c.is_active??!0,contract:f||null},error:null}}catch{return{user:null,error:"Error de conexión al actualizar usuario"}}}static async deleteUser(n){try{const{data:r,error:i}=await W.from("profiles").select("email").eq("id",n).single();if(i||!r)return{success:!1,error:"Usuario no encontrado"};if(Us){const{error:u}=await Us.auth.admin.deleteUser(n);if(u)return{success:!1,error:`Error al eliminar usuario de Auth: ${u.message}`}}const{error:c}=await W.from("profiles").delete().eq("id",n);return c?{success:!1,error:c.message||"Error al eliminar el usuario"}:{success:!0,error:null}}catch{return{success:!1,error:"Error de conexión al eliminar usuario"}}}static async getAvailableJefesComerciales(){try{const{data:n,error:r}=await W.from("profiles").select("*").eq("rol","admin_comercial").order("nombres",{ascending:!0});return r?{usuarios:null,error:"Error al cargar jefes comerciales"}:n?{usuarios:n.map(c=>({id:c.id,email:c.email,nombres:c.nombres,apellido_paterno:c.apellido_paterno,apellido_materno:c.apellido_materno,username:c.username||`${c.nombres.toLowerCase()}.${c.apellido_paterno.toLowerCase()}`,rol:c.rol,uf_vendida:Number(c.uf_vendida)||0,fecha_registro:c.created_at||new Date().toISOString(),jefe_comercial_id:c.jefe_comercial_id,is_active:c.is_active??!0})),error:null}:{usuarios:[],error:null}}catch{return{usuarios:null,error:"Error de conexión al cargar jefes comerciales"}}}static async checkUsernameExists(n){try{const{data:r,error:i}=await W.from("profiles").select("username").eq("username",n).single();return!i&&!!r}catch{return!1}}static async generateUsername(n,r,i){try{const c=n.trim().toLowerCase(),u=r.trim().toLowerCase(),f=i?.trim().toLowerCase()||"";if(!c||!u)return{username:null,error:"Nombres y apellido paterno son requeridos para generar username"};const p=c.charAt(0),g=f?f.charAt(0):"";let m=p+u+g;if(m=m.replace(/[^a-z0-9]/g,""),m.length<3)return{username:null,error:"No se puede generar un username válido con los datos proporcionados"};let x=m,v=0;const y=100;for(;v<y;){if(!await this.checkUsernameExists(x))return{username:x,error:null};v++,x=m+v}return{username:null,error:"No se pudo generar un username único después de múltiples intentos"}}catch{return{username:null,error:"Error al generar username"}}}static generateTemporaryPassword(n,r,i){try{const c=n.trim(),u=r.trim(),f=i?.trim()||"";if(!c||!u)return{password:null,error:"Nombres y apellido paterno son requeridos para generar contraseña"};const p=c.charAt(0).toUpperCase(),g=u.toLowerCase(),m=f?f.charAt(0).toLowerCase():"",x=p+g+m,v=Math.floor(Math.random()*900)+100,y=["!","@","#","$","%","&","*","+","=","?"],S=y[Math.floor(Math.random()*y.length)],j=x+v+S;return j.length<8?{password:null,error:"No se puede generar una contraseña segura con los datos proporcionados"}:{password:j,error:null}}catch{return{password:null,error:"Error al generar contraseña temporal"}}}static async toggleUserStatus(n,r){try{const{data:i,error:c}=await W.from("profiles").select("id, is_active").eq("id",n).single();if(c||!i)return{success:!1,error:"Usuario no encontrado"};const{error:u}=await W.from("profiles").update({is_active:r}).eq("id",n);return u?(console.error("Error al actualizar estado del usuario:",u),{success:!1,error:"Error al actualizar el estado del usuario"}):{success:!0,error:null}}catch(i){return console.error("Error en toggleUserStatus:",i),{success:!1,error:"Error de conexión al cambiar estado del usuario"}}}}const Vp=({size:o=80,label:n,src:r,className:i="",backgroundColor:c="#fd8412",textColor:u="#ffffff"})=>{const p=(m=>m.split(" ").map(x=>x.charAt(0)).join("").toUpperCase().slice(0,2))(n||""),g=`
    inline-flex items-center justify-center rounded-full
    font-bold text-center select-none flex-shrink-0
    ${i}
  `;return r?s.jsx("img",{src:r,alt:n,className:`${g} object-cover`,style:{width:o,height:o}}):s.jsx("div",{className:g,style:{width:o,height:o,backgroundColor:c,color:u,fontSize:o*.4},children:p})},sx=({checked:o,onChange:n,disabled:r=!1,className:i="",label:c})=>{const u=()=>{r||n(!o)},f=`
    relative inline-flex h-6 w-11 items-center rounded-full
    transition-colors duration-200 ease-in-out focus:outline-none
    focus:ring-2 focus:ring-[#fd8412] focus:ring-offset-2
    ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}
    ${o?"bg-[#fd8412]":"bg-gray-300"}
  `,p=`
    inline-block h-4 w-4 transform rounded-full bg-white
    transition-transform duration-200 ease-in-out
    ${o?"translate-x-6":"translate-x-1"}
  `;return s.jsxs("div",{className:`flex items-center ${i}`,children:[c&&s.jsx("label",{className:"mr-3 text-sm font-medium text-gray-700",children:c}),s.jsx("button",{type:"button",className:f,onClick:u,disabled:r??void 0,role:"switch","aria-checked":o,"aria-label":c||"Toggle switch",children:s.jsx("span",{className:p})})]})},Xr=({isOpen:o,onClose:n,onOpenChangePasswordModal:r})=>{const i=Bt(),{user:c,logout:u}=Ps(),{isDarkMode:f,toggleTheme:p}=Tg(),{bgCard:g,text:m,textSecondary:x,textMuted:v,border:y,bgSurface:S}=we(),[j,C]=_.useState(null),[$,O]=_.useState(!1),D=async ae=>{O(!0);try{const{user:X,error:F}=await ds.getUserById(ae);C(F?null:X)}catch{C(null)}finally{O(!1)}};if(_.useEffect(()=>{c?.rol==="broker_externo"&&c?.jefe_comercial_id?D(c.jefe_comercial_id):C(null)},[c?.rol,c?.jefe_comercial_id]),!c)return null;const U=(ae,X)=>`${ae} ${X}`,A=ae=>({admin:"Administrador",admin_comercial:"Admin Comercial",admin_operaciones:"Admin Operaciones",broker:"Corredor",broker_externo:"Corredor Externo"})[ae]||ae,R=()=>{n(),setTimeout(()=>{r&&r()},150)},P=async()=>{await u(),n(),i("/login")},I=ae=>{ae.target===ae.currentTarget&&n()};return s.jsxs(s.Fragment,{children:[o&&s.jsx("div",{className:"fixed inset-0 z-[60] transition-opacity duration-300",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:I}),s.jsxs("div",{className:`
          fixed top-0 right-0 h-full w-80 sm:w-96 ${g} shadow-2xl z-[70]
          transform transition-transform duration-300 ease-in-out
          ${o?"translate-x-0":"translate-x-full"}
          overflow-y-auto drawer-content
        `,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${y}`,children:[s.jsx("h2",{className:`text-xl font-semibold ${m}`,children:"Perfil de Usuario"}),s.jsx("button",{onClick:n,className:`p-2 ${v} hover:${x} rounded-lg hover:${S} transition-colors`,children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx(Vp,{size:80,label:U(c.nombres,c.apellido_paterno),backgroundColor:"#fd8412",className:"mx-auto mb-4"}),s.jsx("h3",{className:`text-xl font-bold ${m} mb-1`,children:`${c.nombres||""} ${c.apellido_paterno||""}`.trim()||"Usuario"}),s.jsxs("p",{className:`${x} mb-3`,children:["@",c.username||"No disponible"]}),s.jsx("div",{className:"inline-flex px-3 py-1 rounded-full",style:{backgroundColor:"rgba(147, 51, 234, 0.1)"},children:s.jsx("span",{className:"font-semibold text-xs",style:{color:"rgba(147, 51, 234, 0.8)"},children:A(c.rol)})})]}),s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:`flex justify-between items-center py-3 border-b ${y}`,children:[s.jsx("span",{className:`${x} text-sm font-medium`,children:"Correo:"}),s.jsx("span",{className:`${m} font-semibold text-sm text-right`,children:c.email||"No disponible"})]}),s.jsxs("div",{className:`flex justify-between items-center py-3 border-b ${y}`,children:[s.jsx("span",{className:`${x} text-sm font-medium`,children:"ID:"}),s.jsx("span",{className:`${m} font-semibold text-sm text-right`,children:c.id||"No disponible"})]}),c.uf_vendida!==void 0&&s.jsxs("div",{className:`flex justify-between items-center py-3 border-b ${y}`,children:[s.jsx("span",{className:`${x} text-sm font-medium`,children:"UF Vendida:"}),s.jsx("span",{className:`${m} font-semibold text-sm text-right`,children:c.uf_vendida})]})]})}),c.rol==="broker_externo"&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:`text-sm font-medium ${v} mb-3`,children:"Jefe Comercial"}),$?s.jsxs("div",{className:`flex items-center space-x-3 p-4 ${S} rounded-xl`,children:[s.jsx("div",{className:`w-10 h-10 ${S} rounded-full animate-pulse`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`h-4 ${S} rounded animate-pulse mb-2`}),s.jsx("div",{className:`h-3 ${S} rounded animate-pulse w-2/3`})]})]}):j?s.jsxs("div",{className:`flex items-center space-x-3 p-4 ${S} rounded-xl`,children:[s.jsx(Vp,{size:40,label:U(j.nombres,j.apellido_paterno),backgroundColor:"#fd8412"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`font-medium ${m} text-sm truncate`,children:`${j.nombres} ${j.apellido_paterno}`}),s.jsx("p",{className:`${v} text-xs truncate`,children:j.email})]})]}):s.jsx("div",{className:`p-4 ${S} rounded-xl`,children:s.jsx("p",{className:`${v} text-sm text-center`,children:"No se pudo cargar la información del jefe comercial"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:`flex items-center justify-between p-4 ${S} rounded-xl`,children:[s.jsx("span",{className:`${m} font-medium text-sm`,children:"Modo oscuro"}),s.jsx(sx,{checked:f,onChange:p})]}),s.jsx(he,{variant:"outlined",color:"primary",onClick:R,fullWidth:!0,size:"sm",children:"Cambiar Contraseña"}),s.jsx(he,{variant:"contained",color:"error",onClick:P,fullWidth:!0,size:"sm",children:"Cerrar Sesión"})]})]})]})]})},zw=({title:o,description:n,icon:r,mainStat:i,onClick:c,className:u=""})=>{const{bgCard:f,text:p,textSecondary:g,textMuted:m,shadowCard:x}=we(),v=()=>{if(typeof r=="string")return s.jsx("div",{className:"text-3xl mr-4 group-hover:scale-110 transition-transform duration-200",children:r});{const y=r;return s.jsx("div",{className:"mr-4 group-hover:scale-110 transition-transform duration-200",children:s.jsx(y,{size:32,className:"text-[#1e3a8a] group-hover:text-[#1d4ed8] transition-colors duration-200"})})}};return s.jsxs("div",{onClick:c,className:`
        ${f} rounded-xl ${x} hover:shadow-lg p-8
        cursor-pointer transition-all duration-300
        group ${u}
      `,children:[s.jsxs("div",{className:"flex items-center mb-6",children:[v(),s.jsxs("div",{children:[s.jsx("h3",{className:`text-xl font-bold ${p}`,children:o}),s.jsx("p",{className:`text-sm ${g} mt-1`,children:n})]})]}),s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-4xl font-bold text-[#fd8412] mb-2",children:i.value}),s.jsx("div",{className:`text-sm ${m} font-medium`,children:i.label})]}),s.jsxs("div",{className:"flex items-center justify-center text-blue-600 hover:text-blue-800 transition-colors",children:[s.jsx("span",{className:"text-sm font-medium",children:"Ver detalles"}),s.jsx("svg",{className:"w-4 h-4 ml-2 transform group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})},Qr=()=>{const[o,n]=_.useState(!1),{openChangePasswordModal:r}=Rg(),i=()=>{n(!0)},c=()=>{n(!1)};return{isProfileDrawerOpen:o,openProfileDrawer:i,closeProfileDrawer:c,toggleProfileDrawer:()=>{n(p=>!p)},handleOpenChangePasswordModal:()=>{c(),setTimeout(()=>{r()},150)}}},Ct=o=>{const{user:n}=Ps(),r=n?.rol||"broker",i=r==="broker"||r==="broker_externo";return{usuarios:{title:"Usuarios",description:i?"Revisa información de usuarios del sistema":"Gestiona usuarios del sistema",dashboardTitle:"Usuarios",dashboardDescription:i?"Revisa información de usuarios":"Gestiona usuarios del sistema"},archivos:{title:"Archivos",description:i?"Revisa y visualiza documentos y archivos":"Administra y organiza todos los archivos del sistema",dashboardTitle:"Archivos",dashboardDescription:i?"Revisa documentos y archivos":"Administra documentos y archivos"},anuncios:{title:"Anuncios",description:i?"Revisa y visualiza anuncios del sistema":"Gestiona y publica anuncios para todos los usuarios",dashboardTitle:"Anuncios",dashboardDescription:i?"Revisa anuncios del sistema":"Crea y gestiona anuncios"},asistencias_siniestros:{title:"Asistencias y Siniestros",description:i?"Revisa información de asistencias y siniestros":"Gestiona asistencias y siniestros del sistema",dashboardTitle:"Asistencias y Siniestros",dashboardDescription:i?"Revisa asistencias y siniestros":"Gestiona asistencias y siniestros"},metodos_pago:{title:"Métodos de Pago",description:i?"Revisa información de métodos de pago":"Gestiona métodos de pago del sistema",dashboardTitle:"Métodos de Pago",dashboardDescription:i?"Revisa métodos de pago":"Gestiona métodos de pago"}}[o]||{title:o,description:`Módulo de ${o}`,dashboardTitle:o,dashboardDescription:`Acceso a ${o}`}};class Lw{static async getDashboardStats(){try{const{data:n,error:r}=await W.from("profiles").select("id",{count:"exact"});if(r)return{stats:null,error:"Error al obtener estadísticas de usuarios"};const{data:i,error:c}=await W.from("files").select("id",{count:"exact"}).eq("type","file").eq("is_deleted",!1);if(c)return{stats:null,error:"Error al obtener estadísticas de archivos"};const u=new Date;u.setDate(u.getDate()-7);const{data:f,error:p}=await W.from("profiles").select("id",{count:"exact"}).gte("created_at",u.toISOString());if(p)return{stats:null,error:"Error al obtener estadísticas de usuarios nuevos"};const{data:g,error:m}=await W.from("files").select("id",{count:"exact"}).eq("type","file").eq("is_deleted",!1).gte("created_at",u.toISOString());if(m)return{stats:null,error:"Error al obtener estadísticas de archivos nuevos"};const{data:x,error:v}=await W.from("announcements").select("id",{count:"exact"}).eq("status","published");if(v)return{stats:null,error:"Error al obtener estadísticas de anuncios"};const{data:y,error:S}=await W.from("companies").select("id",{count:"exact"});if(S)return{stats:null,error:"Error al obtener estadísticas de compañías"};const{data:j,error:C}=await W.from("payment_methods").select("id",{count:"exact"}).eq("is_active",!0);return C?{stats:null,error:"Error al obtener estadísticas de métodos de pago"}:{stats:{totalUsers:n?.length||0,totalFiles:i?.length||0,activeAnnouncements:x?.length||0,totalCompanies:y?.length||0,totalPaymentMethods:j?.length||0,recentActivity:{newUsers:f?.length||0,newFiles:g?.length||0}},error:null}}catch{return{stats:null,error:"Error de conexión al obtener estadísticas"}}}static async getModuleStats(n){try{switch(n){case"usuarios":const{data:r,error:i}=await W.from("profiles").select("id",{count:"exact"});return i?{count:0,error:"Error al obtener usuarios"}:{count:r?.length||0,error:null};case"archivos":const{data:c,error:u}=await W.from("files").select("id",{count:"exact"}).eq("type","file").eq("is_deleted",!1);return u?{count:0,error:"Error al obtener archivos"}:{count:c?.length||0,error:null};case"anuncios":const{data:f,error:p}=await W.from("announcements").select("id",{count:"exact"}).eq("status","published");return p?{count:0,error:"Error al obtener anuncios"}:{count:f?.length||0,error:null};default:return{count:0,error:"Módulo no válido"}}}catch{return{count:0,error:"Error de conexión"}}}static async getAnnouncementWidgetData(){try{const{data:{user:n}}=await W.auth.getUser();if(!n)return{data:null,error:"Usuario no autenticado"};const{data:r,error:i}=await W.from("announcements").select(`
          *,
          announcement_roles(role)
        `).eq("status","published").order("created_at",{ascending:!1}).limit(5);if(i)return{data:null,error:"Error al obtener anuncios recientes"};const{data:c,error:u}=await W.rpc("get_unread_announcements_count",{user_uuid:n.id});if(u)return{data:null,error:"Error al obtener conteo de no leídos"};const{data:f,error:p}=await W.from("announcements").select(`
          *,
          announcement_recipients!inner(user_id, is_read)
        `).eq("status","published").eq("priority","high").eq("announcement_recipients.user_id",n.id).eq("announcement_recipients.is_read",!1);if(p)return{data:null,error:"Error al obtener anuncios urgentes"};const{data:g,error:m}=await W.from("announcements").select("id",{count:"exact"}).eq("status","published");return m?{data:null,error:"Error al obtener total de anuncios"}:{data:{recentAnnouncements:r||[],unreadCount:c||0,urgentCount:f?.length||0,totalPublished:g?.length||0},error:null}}catch{return{data:null,error:"Error de conexión al obtener datos de anuncios"}}}static async getUnreadAnnouncementsCount(){try{const{data:{user:n}}=await W.auth.getUser();if(!n)return{count:0,error:"Usuario no autenticado"};const{data:r,error:i}=await W.rpc("get_unread_announcements_count",{user_uuid:n.id});return i?{count:0,error:"Error al obtener conteo"}:{count:r||0,error:null}}catch{return{count:0,error:"Error de conexión"}}}}const Bw=()=>{const o=Bt(),{user:n}=Ps(),{canAccess:r}=Qt(),{bg:i,text:c,textSecondary:u,skeletonBg:f}=we(),[p,g]=_.useState(!0),[m,x]=_.useState(!1),{isProfileDrawerOpen:v,openProfileDrawer:y,closeProfileDrawer:S,handleOpenChangePasswordModal:j}=Qr(),[C,$]=_.useState({totalUsers:0,totalFiles:0,activeAnnouncements:0,totalCompanies:0,totalPaymentMethods:0,newUsers:0,newFiles:0}),[O,D]=_.useState(!0),[U,A]=_.useState(null);_.useEffect(()=>{(async()=>{try{D(!0),A(null);const{stats:Q,error:Y}=await Lw.getDashboardStats();Y?A(Y):Q&&$({totalUsers:Q.totalUsers,totalFiles:Q.totalFiles,activeAnnouncements:Q.activeAnnouncements,totalCompanies:Q.totalCompanies,totalPaymentMethods:Q.totalPaymentMethods,newUsers:Q.recentActivity.newUsers,newFiles:Q.recentActivity.newFiles})}catch{A("Error de conexión al cargar estadísticas")}finally{D(!1)}})()},[]),_.useEffect(()=>{const F=()=>{x(window.innerWidth<=768),window.innerWidth<=768?g(!1):g(!0)};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]);const R=()=>{o("/login")},P=()=>{g(!p)},I=()=>n?.nombres?n.nombres.split(" ")[0]:"Usuario",X=[{title:Ct("usuarios").dashboardTitle,description:Ct("usuarios").dashboardDescription,icon:Ii,path:"/usuarios",mainStat:{label:"Total Usuarios",value:C.totalUsers},canAccess:r("usuarios")},{title:Ct("archivos").dashboardTitle,description:Ct("archivos").dashboardDescription,icon:Wu,path:"/archivos",mainStat:{label:"Total Archivos",value:C.totalFiles},canAccess:r("archivos")},{title:Ct("anuncios").dashboardTitle,description:Ct("anuncios").dashboardDescription,icon:Fg,path:"/anuncios",mainStat:{label:"Anuncios Activos",value:C.activeAnnouncements},canAccess:r("anuncios")},{title:Ct("asistencias_siniestros").dashboardTitle,description:Ct("asistencias_siniestros").dashboardDescription,icon:Gi,path:"/asistencias-siniestros",mainStat:{label:"Total Compañías",value:C.totalCompanies},canAccess:r("asistencias_siniestros")},{title:Ct("metodos_pago").dashboardTitle,description:Ct("metodos_pago").dashboardDescription,icon:Ki,path:"/metodos-pago",mainStat:{label:"Métodos Activos",value:C.totalPaymentMethods},canAccess:r("metodos_pago")}].filter(F=>F.canAccess);return s.jsxs("div",{className:`h-screen overflow-hidden ${i}`,children:[s.jsx(Kr,{onLogout:R,onMenuToggle:P,showMenuButton:m,showUserIcon:!0,showLogout:!1,onUserIconClick:y,isSidebarOpen:p}),s.jsxs("div",{className:"flex h-screen pt-16",children:[s.jsx(Ir,{isOpen:p,onClose:()=>g(!1)}),s.jsx("div",{className:"flex-1 overflow-auto main-content",children:s.jsx("main",{className:"p-6 pt-24",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:`text-2xl font-bold ${c} mb-2`,children:["¡Bienvenido, ",I(),"!"]}),s.jsx("p",{className:u,children:"Aquí tienes un resumen de tu sistema y acceso rápido a los módulos principales."})]}),O?s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[1,2,3].map(F=>s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 animate-pulse",children:[s.jsx("div",{className:`h-4 ${f} rounded w-3/4 mb-4`}),s.jsx("div",{className:`h-3 ${f} rounded w-1/2 mb-6`}),s.jsx("div",{className:`h-8 ${f} rounded w-1/3`})]},F))}):U?s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-red-800",children:["Error al cargar estadísticas: ",U]})}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:X.map((F,Q)=>s.jsx(zw,{title:F.title,description:F.description,icon:F.icon,mainStat:F.mainStat,onClick:()=>o(F.path)},Q))})]})})})]}),s.jsx(Xr,{isOpen:v,onClose:S,onOpenChangePasswordModal:j})]})},qw=({onDeleteUser:o,onViewUser:n,onRefresh:r,filters:i,onPageChange:c})=>{const{bgCard:u,text:f,textSecondary:p,textMuted:g,border:m,bgSurface:x,hoverBg:v}=we(),[y,S]=_.useState(null),[j,C]=_.useState([]),[$,O]=_.useState(!0),[D,U]=_.useState(null),[A,R]=_.useState({total:0,page:1,limit:5,hasMore:!1}),P=_.useRef(null),I=async()=>{try{O(!0),U(null);const{users:ee,total:K,page:E,limit:T,hasMore:H,error:re}=await ds.getUsersWithFilters(i||{});re?(U(re),C([]),R({total:0,page:1,limit:5,hasMore:!1})):(C(ee||[]),R({total:K,page:E,limit:T,hasMore:H}))}catch{U("Error de conexión al cargar usuarios"),C([]),R({total:0,page:1,limit:5,hasMore:!1})}finally{O(!1)}};_.useEffect(()=>{I()},[i]),_.useEffect(()=>{r&&I()},[r]);const ae=ee=>`${ee.nombres} ${ee.apellido_paterno}${ee.apellido_materno?` ${ee.apellido_materno}`:""}`,X=ee=>({admin:"Administrador",admin_comercial:"Admin Comercial",admin_operaciones:"Admin Operaciones",broker:"Corredor",broker_externo:"Corredor Externo"})[ee]||ee,F=(ee,K)=>{ee.stopPropagation(),S(y===K?null:K)},Q=_.useCallback(ee=>{P.current&&!P.current.contains(ee.target)&&S(null)},[]),Y=_.useCallback(()=>{S(null)},[]),oe=ee=>ee>=j.length-2;return _.useEffect(()=>{if(y)return document.addEventListener("mousedown",Q),()=>{document.removeEventListener("mousedown",Q)}},[y,Q]),$?s.jsx("div",{className:`${u} rounded-2xl shadow-sm overflow-hidden`,children:s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fd8412] mr-3"}),s.jsx("span",{className:p,children:"Cargando usuarios..."})]})}):D?s.jsx("div",{className:`${u} rounded-2xl shadow-sm overflow-hidden`,children:s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx(Ra,{className:"w-8 h-8 text-red-500 mr-3"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 font-medium",children:D}),s.jsx(he,{onClick:I,variant:"outlined",size:"sm",className:"mt-2",children:"Intentar nuevamente"})]})]})}):j.length===0?s.jsx("div",{className:`${u} rounded-2xl shadow-sm overflow-hidden`,children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:`${p} font-medium`,children:"No hay usuarios registrados"}),s.jsx("p",{className:`${g} text-sm mt-1`,children:"Los usuarios aparecerán aquí cuando se registren"})]})})}):s.jsxs("div",{className:`${u} rounded-2xl shadow-sm overflow-hidden relative`,children:[s.jsx("div",{className:`${x} px-6 py-4 border-b ${m}`,children:s.jsxs("div",{className:`grid grid-cols-12 gap-4 text-xs font-semibold ${p} uppercase tracking-wider`,children:[s.jsx("div",{className:"col-span-4 lg:col-span-3",children:"Nombre"}),s.jsx("div",{className:"hidden lg:block col-span-3",children:"Email"}),s.jsx("div",{className:"col-span-2 lg:col-span-2",children:"Rol"}),s.jsx("div",{className:"col-span-2 lg:col-span-2 text-center",children:"Estado"}),s.jsx("div",{className:"col-span-2 lg:col-span-2 text-center",children:"Acciones"})]})}),s.jsx("div",{className:"",children:j.map((ee,K)=>s.jsx("div",{className:`px-6 py-4 transition-colors duration-150
              ${y===ee.id?"relative z-20":""}
              ${y===ee.id?"hover:bg-transparent":v}
            `,children:s.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[s.jsxs("div",{className:"col-span-4 lg:col-span-3",children:[s.jsx("div",{className:`font-medium ${f}`,children:ae(ee)}),s.jsxs("div",{className:`text-sm ${g}`,children:["@",ee.username]})]}),s.jsx("div",{className:"hidden lg:block col-span-3",children:s.jsx("div",{className:`text-sm ${f}`,children:ee.email})}),s.jsx("div",{className:"col-span-2 lg:col-span-2",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:X(ee.rol)})}),s.jsx("div",{className:"col-span-2 lg:col-span-2 flex justify-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ee.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ee.is_active?"Activo":"Inactivo"})}),s.jsx("div",{className:"col-span-2 lg:col-span-2 flex justify-center",children:s.jsxs("div",{className:"relative",children:[y===ee.id&&!oe(K)&&s.jsxs("div",{ref:P,className:"absolute right-0 w-48 rounded-lg shadow-2xl py-1 z-50 top-full mt-2",onClick:E=>E.stopPropagation(),style:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",backdropFilter:"none",WebkitBackdropFilter:"none"},children:[s.jsxs("button",{onClick:()=>{n?.(ee),Y()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[s.jsx(ca,{className:"w-4 h-4 mr-3"}),"Ver detalles"]}),s.jsxs("button",{onClick:async E=>{E.preventDefault(),E.stopPropagation(),o&&await o(ee.id),Y()},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(tt,{className:"w-4 h-4 mr-3"}),"Eliminar"]})]}),s.jsx("button",{onClick:E=>{F(E,ee.id)},className:`p-2 ${g} hover:${f} rounded-lg hover:${x} transition-colors relative`,children:s.jsx(Bg,{className:"w-4 h-4"})}),y===ee.id&&oe(K)&&s.jsxs("div",{ref:P,className:"absolute right-0 w-48 rounded-lg shadow-2xl py-1 z-50 bottom-full mb-2",onClick:E=>E.stopPropagation(),style:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",backdropFilter:"none",WebkitBackdropFilter:"none"},children:[s.jsxs("button",{onClick:()=>{n?.(ee),Y()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[s.jsx(ca,{className:"w-4 h-4 mr-3"}),"Ver detalles"]}),s.jsxs("button",{onClick:async E=>{E.preventDefault(),E.stopPropagation(),o&&await o(ee.id),Y()},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(tt,{className:"w-4 h-4 mr-3"}),"Eliminar"]})]})]})})]})},ee.id))}),s.jsx("div",{className:`${x} px-6 py-4 border-t ${m}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:`text-sm ${p}`,children:["Mostrando ",(A.page-1)*A.limit+1," - ",Math.min(A.page*A.limit,A.total)," de ",A.total," usuario",A.total!==1?"s":""]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>c?.(A.page-1),disabled:A.page<=1,className:`px-3 py-1 text-sm rounded-lg transition-colors ${A.page<=1?`${g} cursor-not-allowed`:`${f} hover:${v}`}`,children:"Anterior"}),s.jsxs("span",{className:`text-sm ${p} px-2`,children:["Página ",A.page]}),s.jsx("button",{onClick:()=>c?.(A.page+1),disabled:!A.hasMore,className:`px-3 py-1 text-sm rounded-lg transition-colors ${A.hasMore?`${f} hover:${v}`:`${g} cursor-not-allowed`}`,children:"Siguiente"})]})]})})]})},Hw=[{id:1,nombre:"Arica y Parinacota"},{id:2,nombre:"Tarapacá"},{id:3,nombre:"Antofagasta"},{id:4,nombre:"Atacama"},{id:5,nombre:"Coquimbo"},{id:6,nombre:"Valparaíso"},{id:7,nombre:"Región Metropolitana de Santiago"},{id:8,nombre:"Libertador General Bernardo O'Higgins"},{id:9,nombre:"Maule"},{id:10,nombre:"Ñuble"},{id:11,nombre:"Biobío"},{id:12,nombre:"La Araucanía"},{id:13,nombre:"Los Ríos"},{id:14,nombre:"Los Lagos"},{id:15,nombre:"Aysén del General Carlos Ibáñez del Campo"},{id:16,nombre:"Magallanes y de la Antártica Chilena"}],Yp=o=>{if(!o||o.trim().length===0)return!0;const n=o.replace(/[.-]/g,"");if(n.length<2)return!1;const r=n.slice(0,-1),i=n.slice(-1).toUpperCase();if(!/^[0-9]+$/.test(r))return!1;let c=0,u=2;for(let g=r.length-1;g>=0;g--)c+=parseInt(r[g])*u,u=u===7?2:u+1;const f=11-c%11;return(f===11?"0":f===10?"K":f.toString())===i},Pw=o=>{if(!o)return"";const n=o.replace(/[.-]/g,"");if(n.length<2)return o;const r=n.slice(0,-1),i=n.slice(-1).toUpperCase();let c="";for(let u=r.length-1;u>=0;u--)c=r[u]+c,(r.length-u)%3===0&&u>0&&(c="."+c);return`${c}-${i}`},Gw=({isOpen:o,onClose:n,onSubmit:r})=>{const{modalBg:i,text:c,textSecondary:u,border:f,inputBg:p,inputBorder:g,inputText:m,inputPlaceholder:x}=we(),[v,y]=_.useState({nombres:"",apellido_paterno:"",apellido_materno:"",email:"",username:"",rol:"broker",jefe_comercial_id:null,rut:"",telefono:"",direccion:"",comuna:"",region:void 0,fecha_nacimiento:"",fecha_inicio_contrato:"",nuevas_ventas:0,renovaciones:0,comentarios:"",contractFile:null}),[S,j]=_.useState(!1),[C,$]=_.useState(null),[O,D]=_.useState([]),[U,A]=_.useState(!1),[R,P]=_.useState(null),[I,ae]=_.useState(null),[X,F]=_.useState(""),Q=async()=>{A(!0);try{const{jefes:T,error:H}=await ds.getJefesComercialesDisponibles();D(H?[]:T||[])}catch{D([])}finally{A(!1)}},Y=T=>{const{name:H,value:re}=T.target;if(y(H==="jefe_comercial_id"?N=>({...N,[H]:re||null}):N=>({...N,[H]:re})),H==="rut"&&re){const N=Pw(re);Yp(re)?(P(null),y(se=>({...se,rut:N}))):P("RUT inválido")}else H==="rut"&&P(null)},oe=T=>{const{name:H,value:re}=T.target,N=re===""?0:parseInt(re)||0;y(q=>({...q,[H]:N}))},ee=T=>{const H=T.target.files?.[0];if(ae(null),H){if(H.type!=="application/pdf"){ae("Solo se permiten archivos PDF"),F(""),y(re=>({...re,contractFile:null}));return}if(H.size>10*1024*1024){ae("El archivo no puede superar los 10MB"),F(""),y(re=>({...re,contractFile:null}));return}F(H.name),y(re=>({...re,contractFile:H}))}else F(""),y(re=>({...re,contractFile:null}))},K=async T=>{if(T.preventDefault(),(v.rol==="broker"||v.rol==="broker_externo")&&!v.contractFile){ae("El contrato firmado es obligatorio para corredores");return}if(v.rut&&!Yp(v.rut)){P("RUT inválido");return}if(v.rol==="broker_externo"&&!v.jefe_comercial_id){$("El jefe comercial es obligatorio para corredores externos");return}$(null),j(!0);try{await r(v),E()}catch(H){$(H?.message||"Error creando usuario")}finally{j(!1)}},E=()=>{y({nombres:"",apellido_paterno:"",apellido_materno:"",email:"",username:"",rol:"broker",jefe_comercial_id:null,rut:"",telefono:"",direccion:"",comuna:"",region:void 0,fecha_nacimiento:"",fecha_inicio_contrato:"",nuevas_ventas:0,renovaciones:0,comentarios:"",contractFile:null}),j(!1),$(null),P(null),ae(null),F(""),n()};return _.useEffect(()=>{const T=H=>{H.key==="Escape"&&E()};return o&&(document.addEventListener("keydown",T),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",T),document.body.style.overflow="unset"}},[o]),_.useEffect(()=>{o&&Q()},[o]),o?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:E}),s.jsxs("div",{className:`relative ${i} rounded-2xl shadow-2xl w-full max-w-2xl mx-4 transform transition-all max-h-[90vh] overflow-y-auto`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${f} sticky top-0 bg-inherit z-10`,children:[s.jsx("div",{className:"flex items-center",children:s.jsx("h2",{className:`text-xl font-bold ${c}`,children:"Crear Nuevo Usuario"})}),s.jsx("button",{onClick:E,className:`p-2 rounded-full hover:${p} transition-colors`,children:s.jsx(Je,{size:20,className:u})})]}),s.jsxs("form",{onSubmit:K,className:"p-6 space-y-5",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${c} border-b ${f} pb-2`,children:"Información Personal"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Nombres *"}),s.jsx("input",{type:"text",name:"nombres",value:v.nombres,onChange:Y,required:!0,disabled:S,className:`w-full px-4 py-3 ${p} ${m} ${x} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,placeholder:"Ingresa los nombres"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Apellido Paterno *"}),s.jsx("input",{type:"text",name:"apellido_paterno",value:v.apellido_paterno,onChange:Y,required:!0,disabled:S,className:`w-full px-4 py-3 ${p} ${m} ${x} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,placeholder:"Ingresa el apellido paterno"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Apellido Materno"}),s.jsx("input",{type:"text",name:"apellido_materno",value:v.apellido_materno||"",onChange:Y,disabled:S,className:`w-full px-4 py-3 ${p} ${m} ${x} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,placeholder:"Ingresa el apellido materno"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"RUT"}),s.jsx("input",{type:"text",name:"rut",value:v.rut||"",onChange:Y,disabled:S,className:`w-full px-4 py-3 ${p} ${m} ${x} border ${R?"border-red-500":g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,placeholder:"12.345.678-9"}),R&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:R})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Email *"}),s.jsx("input",{type:"email",name:"email",value:v.email,onChange:Y,required:!0,disabled:S,className:`w-full px-4 py-3 ${p} ${m} ${x} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,placeholder:"correo@unidad.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Teléfono"}),s.jsx("input",{type:"tel",name:"telefono",value:v.telefono||"",onChange:Y,disabled:S,className:`w-full px-4 py-3 ${p} ${m} ${x} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,placeholder:"+56 9 1234 5678"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Dirección"}),s.jsx("input",{type:"text",name:"direccion",value:v.direccion||"",onChange:Y,disabled:S,className:`w-full px-4 py-3 ${p} ${m} ${x} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,placeholder:"Calle 123, Depto 456"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Comuna"}),s.jsx("input",{type:"text",name:"comuna",value:v.comuna||"",onChange:Y,disabled:S,className:`w-full px-4 py-3 ${p} ${m} ${x} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,placeholder:"Santiago"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Región"}),s.jsxs("select",{name:"region",value:v.region?.toString()||"",onChange:Y,disabled:S,className:`w-full px-4 py-3 ${p} ${m} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,children:[s.jsx("option",{value:"",children:"Selecciona una región"}),Hw.map(T=>s.jsxs("option",{value:T.id,children:[T.id===7?"RM":T.id," - ",T.nombre]},T.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Fecha de Nacimiento"}),s.jsx("input",{type:"date",name:"fecha_nacimiento",value:v.fecha_nacimiento||"",onChange:Y,disabled:S,className:`w-full px-4 py-3 ${p} ${m} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Fecha de Inicio de Contrato"}),s.jsx("input",{type:"date",name:"fecha_inicio_contrato",value:v.fecha_inicio_contrato||"",onChange:Y,disabled:S,className:`w-full px-4 py-3 ${p} ${m} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Rol *"}),s.jsxs("select",{name:"rol",value:v.rol,onChange:Y,required:!0,disabled:S,className:`w-full px-4 py-3 ${p} ${m} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,children:[s.jsx("option",{value:"admin",children:"Administrador"}),s.jsx("option",{value:"admin_comercial",children:"Admin Comercial"}),s.jsx("option",{value:"admin_operaciones",children:"Admin Operaciones"}),s.jsx("option",{value:"broker",children:"Corredor"}),s.jsx("option",{value:"broker_externo",children:"Corredor Externo"})]})]}),(v.rol==="broker"||v.rol==="broker_externo")&&s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsx("h3",{className:`text-lg font-semibold ${c} border-b ${f} pb-2`,children:"Información Laboral"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Nuevas Ventas"}),s.jsx("input",{type:"text",name:"nuevas_ventas",value:v.nuevas_ventas,onChange:oe,disabled:S,className:`w-full px-4 py-3 ${p} ${m} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Renovaciones"}),s.jsx("input",{type:"text",name:"renovaciones",value:v.renovaciones,onChange:oe,disabled:S,className:`w-full px-4 py-3 ${p} ${m} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,placeholder:"0"})]})]}),v.rol==="broker_externo"&&s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Jefe Comercial *"}),s.jsx("select",{name:"jefe_comercial_id",value:v.jefe_comercial_id||"",onChange:Y,required:!0,disabled:S||U,className:`w-full px-4 py-3 ${p} ${m} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,children:U?s.jsx("option",{value:"",children:"Cargando jefes comerciales..."}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"",children:"Selecciona un jefe comercial"}),O.map(T=>s.jsx("option",{value:T.id,children:T.nombre},T.id))]})})]})]}),(v.rol==="broker"||v.rol==="broker_externo")&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[s.jsx("h3",{className:`text-lg font-semibold ${c} border-b ${f} pb-2`,children:"Contrato Firmado *"}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Archivo PDF del Contrato"}),s.jsxs("div",{className:`border-2 border-dashed ${I?"border-red-500":g} rounded-xl p-6 text-center transition-colors`,children:[s.jsx("input",{type:"file",accept:".pdf",onChange:ee,disabled:S,className:"hidden",id:"contract-file"}),s.jsx("label",{htmlFor:"contract-file",className:`cursor-pointer flex flex-col items-center space-y-2 ${S?"cursor-not-allowed opacity-50":""}`,children:X?s.jsxs(s.Fragment,{children:[s.jsx(Ua,{className:"w-8 h-8 text-green-500"}),s.jsx("span",{className:`text-sm ${c}`,children:X}),s.jsx("span",{className:"text-xs text-green-600",children:"Archivo seleccionado"})]}):s.jsxs(s.Fragment,{children:[s.jsx(ul,{className:"w-8 h-8 text-gray-400"}),s.jsx("span",{className:`text-sm ${u}`,children:"Haz clic para seleccionar un archivo PDF"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Máximo 10MB"})]})})]}),I&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:I})]})]}),s.jsxs("div",{className:"animate-fadeIn",children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-2`,children:"Comentarios"}),s.jsx("textarea",{name:"comentarios",value:v.comentarios||"",onChange:Y,disabled:S,rows:3,className:`w-full px-4 py-3 ${p} ${m} ${x} border ${g} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed resize-none`,placeholder:"Comentarios adicionales sobre el usuario..."})]})]}),C&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600 text-sm",children:C})}),s.jsxs("div",{className:"flex gap-3 pt-4 mt-6",children:[s.jsx(he,{type:"button",variant:"outlined",color:"secondary",onClick:E,disabled:S,className:"flex-1",children:"Cancelar"}),s.jsx(he,{type:"submit",variant:"contained",color:"primary",disabled:S,className:"flex-1 flex items-center justify-center",children:S?s.jsxs(s.Fragment,{children:[s.jsx(Yg,{className:"w-4 h-4 animate-spin mr-2"}),"Creando..."]}):"Crear Usuario"})]})]})]})]}):null},rx=({isOpen:o,onClose:n,fileId:r,fileName:i,fileType:c,fileSize:u})=>{const[f,p]=_.useState(null),[g,m]=_.useState(!1),[x,v]=_.useState(null),{modalBg:y,text:S,textSecondary:j,textMuted:C,border:$,bgSurface:O}=we();_.useEffect(()=>{o&&r&&D()},[o,r]);const D=async()=>{m(!0),v(null);try{const X=await bt.getFileDownloadUrl(r);X.error?v(X.error):X.data&&p(X.data)}catch{v("Error al cargar el archivo")}finally{m(!1)}},U=()=>{if(f){const X=document.createElement("a");X.href=f,X.download=i,X.target="_blank",document.body.appendChild(X),X.click(),document.body.removeChild(X)}},A=()=>{f&&window.open(f,"_blank")},R=X=>{if(X===0)return"0 B";const F=1024,Q=["B","KB","MB","GB"],Y=Math.floor(Math.log(X)/Math.log(F));return parseFloat((X/Math.pow(F,Y)).toFixed(2))+" "+Q[Y]},P=()=>{const X=c.toLowerCase();return X.startsWith("image/")?s.jsx(Vg,{size:32,className:"text-purple-500"}):X==="application/pdf"?s.jsx(Ua,{size:32,className:"text-red-500"}):X.includes("spreadsheet")||X.includes("excel")?s.jsx(qg,{size:32,className:"text-green-600"}):X.includes("word")||X.includes("document")?s.jsx(Ua,{size:32,className:"text-blue-600"}):X.includes("zip")||X.includes("rar")?s.jsx(Dg,{size:32,className:"text-yellow-600"}):s.jsx(Bi,{size:32,className:"text-gray-500"})},I=()=>{const X=c.toLowerCase();return X.startsWith("image/")||X==="application/pdf"||X.includes("text/")},ae=()=>{if(g)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fd8412] mx-auto mb-4"}),s.jsx("p",{className:j,children:"Cargando archivo..."})]})});if(x)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"p-3 bg-red-50 rounded-full mx-auto mb-4",children:s.jsx(Bi,{size:32,className:"text-red-500"})}),s.jsx("p",{className:"text-red-600 mb-2",children:"Error al cargar el archivo"}),s.jsx("p",{className:`text-sm ${j}`,children:x})]})});if(!f)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`p-3 ${O} rounded-full mx-auto mb-4`,children:s.jsx(Bi,{size:32,className:C})}),s.jsx("p",{className:j,children:"No se pudo cargar el archivo"})]})});const X=c.toLowerCase();return X.startsWith("image/")?s.jsx("div",{className:"flex justify-center",children:s.jsx("img",{src:f,alt:i,className:"max-w-full max-h-96 object-contain rounded-lg shadow-sm",onError:()=>v("Error al cargar la imagen")})}):X==="application/pdf"?s.jsx("div",{className:"w-full h-96",children:s.jsx("iframe",{src:`${f}#toolbar=0`,className:`w-full h-full border ${$} rounded-lg`,title:i})}):s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`p-3 ${O} rounded-full mx-auto mb-4`,children:P()}),s.jsx("p",{className:`${S} font-medium mb-2`,children:i}),s.jsxs("p",{className:`text-sm ${j} mb-4`,children:[R(u)," • ",c]}),s.jsx("p",{className:`text-sm ${C}`,children:"Vista previa no disponible para este tipo de archivo"})]})})};return o?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n}),s.jsxs("div",{className:`relative ${y} rounded-2xl shadow-xl w-full max-w-4xl mx-4 transform transition-all max-h-[calc(100vh-2rem)] overflow-hidden modal-content`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${$}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 ${O} rounded-lg`,children:P()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:`text-lg font-semibold ${S} truncate`,children:i}),s.jsxs("p",{className:`text-sm ${j}`,children:[R(u)," • ",c]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"hidden lg:flex items-center space-x-2",children:f&&s.jsxs(s.Fragment,{children:[I()&&s.jsxs(he,{variant:"outlined",color:"primary",size:"sm",onClick:A,className:"flex items-center",children:[s.jsx(Ls,{size:16,className:"mr-1"}),"Abrir"]}),s.jsxs(he,{variant:"outlined",color:"primary",size:"sm",onClick:U,className:"flex items-center",children:[s.jsx(ol,{size:16,className:"mr-1"}),"Descargar"]})]})}),s.jsx("button",{onClick:n,className:`p-2 ${C} hover:${j} transition-colors`,children:s.jsx(Je,{size:20})})]})]}),s.jsx("div",{className:"p-6 overflow-auto max-h-[calc(90vh-140px)]",children:ae()}),f&&s.jsx("div",{className:"lg:hidden p-6 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex space-x-3 justify-center",children:[I()&&s.jsxs(he,{variant:"outlined",color:"primary",size:"sm",onClick:A,className:"flex items-center",children:[s.jsx(Ls,{size:16,className:"mr-1"}),"Abrir"]}),s.jsxs(he,{variant:"outlined",color:"primary",size:"sm",onClick:U,className:"flex items-center",children:[s.jsx(ol,{size:16,className:"mr-1"}),"Descargar"]})]})})]})]}):null},Vw=({isOpen:o,onClose:n,user:r,onConfirm:i,isDeactivating:c=!1})=>{const{modalBg:u,text:f,textSecondary:p,border:g,inputBg:m}=we();if(!u||!f||!p||!g||!m||!o||!r)return null;const x=async()=>{await i(),n()};return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n}),s.jsxs("div",{className:`relative ${u} rounded-2xl shadow-2xl w-full max-w-md mx-4 transform transition-all`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${g}`,children:[s.jsx("h3",{className:`text-lg font-semibold ${f}`,children:"Confirmar Desactivación"}),s.jsx("button",{onClick:n,className:`p-2 rounded-full hover:${m} transition-colors`,children:s.jsx(Je,{size:20,className:p})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#fd8412] to-orange-600 rounded-full flex items-center justify-center",children:s.jsxs("span",{className:"text-white text-lg font-bold",children:[r.nombres.charAt(0),r.apellido_paterno.charAt(0)]})}),s.jsxs("div",{children:[s.jsxs("p",{className:`font-medium ${f}`,children:[r.nombres," ",r.apellido_paterno]}),s.jsxs("p",{className:`text-sm ${p}`,children:["@",r.username]})]})]}),s.jsxs("p",{className:`${p} mb-6`,children:["¿Estás seguro de que quieres desactivar este usuario?",s.jsx("strong",{className:f,children:" No podrá acceder a la aplicación"})," hasta que sea reactivado."]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(he,{onClick:n,variant:"outlined",className:"flex-1",disabled:c,children:"Cancelar"}),s.jsx(he,{onClick:x,variant:"contained",color:"error",className:"flex-1",disabled:c,children:c?"Desactivando...":"Desactivar Usuario"})]})]})]})]})},nx=[{id:1,nombre:"Arica y Parinacota"},{id:2,nombre:"Tarapacá"},{id:3,nombre:"Antofagasta"},{id:4,nombre:"Atacama"},{id:5,nombre:"Coquimbo"},{id:6,nombre:"Valparaíso"},{id:7,nombre:"Región Metropolitana de Santiago"},{id:8,nombre:"Libertador General Bernardo O'Higgins"},{id:9,nombre:"Maule"},{id:10,nombre:"Ñuble"},{id:11,nombre:"Biobío"},{id:12,nombre:"La Araucanía"},{id:13,nombre:"Los Ríos"},{id:14,nombre:"Los Lagos"},{id:15,nombre:"Aysén del General Carlos Ibáñez del Campo"},{id:16,nombre:"Magallanes y de la Antártica Chilena"}],Yw=o=>{if(!o)return"No especificada";const n=nx.find(r=>r.id===o);return n?`${o===7?"RM":o} - ${n.nombre}`:"No especificada"},Fw=o=>{if(!o)return"No especificado";const n=o.replace(/[.-]/g,"");if(n.length<2)return o;const r=n.slice(0,-1),i=n.slice(-1).toUpperCase();let c="";for(let u=r.length-1;u>=0;u--)c=r[u]+c,(r.length-u)%3===0&&u>0&&(c="."+c);return`${c}-${i}`},Ui=o=>o?new Date(o).toLocaleDateString("es-CL"):"No especificada",Kw=({isOpen:o,onClose:n,user:r,onUserUpdated:i})=>{const{modalBg:c,text:u,textSecondary:f,border:p,inputBg:g,inputText:m,inputBorder:x,bgCard:v,bgSurface:y}=we(),{can:S}=Qt(),{user:j}=Ps(),[C,$]=_.useState(!1),[O,D]=_.useState(null),[U,A]=_.useState(!1),[R,P]=_.useState(!1),[I,ae]=_.useState(null),[X,F]=_.useState(!1),[Q,Y]=_.useState(null),[oe,ee]=_.useState(!1),[K,E]=_.useState(null),[T,H]=_.useState(!1),[re,N]=_.useState(null),q=async()=>{if(r?.contract?.file_id){A(!0);try{const{data:ce,error:Ye}=await bt.getFileById(r.contract.file_id);if(Ye||!ce){console.error("Error al obtener información del archivo:",Ye);return}D({id:ce.id,name:ce.name||"contrato.pdf",mimeType:ce.mime_type||"application/pdf",size:ce.size||0}),$(!0)}catch(ce){console.error("Error al cargar contrato:",ce)}finally{A(!1)}}},se=async()=>{if(r?.contract?.file_id)try{const{data:ce,error:Ye}=await bt.getFileDownloadUrl(r.contract.file_id);if(Ye||!ce){console.error("Error al obtener URL de descarga:",Ye);return}const at=document.createElement("a");at.href=ce,at.download="contrato.pdf",document.body.appendChild(at),at.click(),document.body.removeChild(at)}catch(ce){console.error("Error al descargar contrato:",ce)}},le=()=>{r&&(ae({...r}),P(!0),Y(null))},ne=()=>{P(!1),ae(null),Y(null)},fe=async()=>{if(!(!I||!r)){F(!0),Y(null);try{const ce={id:r.id,email:I.email,nombres:I.nombres,apellido_paterno:I.apellido_paterno,apellido_materno:I.apellido_materno,telefono:I.telefono,rut:I.rut,direccion:I.direccion,comuna:I.comuna,region:I.region,fecha_nacimiento:I.fecha_nacimiento,fecha_inicio_contrato:I.fecha_inicio_contrato,nuevas_ventas:I.nuevas_ventas,renovaciones:I.renovaciones,comentarios:I.comentarios},{user:Ye,error:at}=await ds.updateUser(r.id,ce);if(at){Y(at);return}Ye&&(P(!1),ae(null),i?.(Ye),alert("Usuario actualizado exitosamente"))}catch(ce){Y(ce.message||"Error al actualizar usuario")}finally{F(!1)}}},ue=(ce,Ye)=>{I&&ae({...I,[ce]:Ye})},Ke=async ce=>{if(r){if(j&&r.id===j.id&&!ce){E("No puedes desactivar tu propia cuenta");return}if(!ce){N(r),H(!0);return}await ke(ce)}},ke=async ce=>{if(r){ee(!0),E(null);try{const{success:Ye,error:at}=await ds.toggleUserStatus(r.id,ce);if(Ye){const fa={...r,is_active:ce};i?.(fa),alert(`Usuario ${ce?"activado":"desactivado"} exitosamente`)}else E(at||"Error al cambiar estado del usuario")}catch{E("Error de conexión al cambiar estado")}finally{ee(!1)}}};return Hr.useEffect(()=>{const ce=Ye=>{Ye.key==="Escape"&&(R?ne():n())};return o&&(document.addEventListener("keydown",ce),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",ce),document.body.style.overflow="unset"}},[o,n,R]),!o||!r?null:s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n}),s.jsxs("div",{className:`relative ${c} rounded-2xl shadow-2xl w-full max-w-6xl mx-4 transform transition-all max-h-[90vh] overflow-y-auto`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${p} sticky top-0 bg-inherit z-10`,children:[s.jsx("div",{className:"flex items-center",children:s.jsx("h2",{className:`text-xl font-bold ${u}`,children:"Detalles del Usuario"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[S("usuarios","edit")&&!R&&s.jsx("button",{onClick:le,className:`p-2 rounded-full hover:${g} transition-colors`,title:"Editar usuario",children:s.jsx(cl,{size:20,className:f})}),R&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:fe,disabled:X,className:`p-2 rounded-full hover:${g} transition-colors ${X?"opacity-50 cursor-not-allowed":""}`,title:"Guardar cambios",children:s.jsx(nw,{size:20,className:"text-green-600"})}),s.jsx("button",{onClick:ne,disabled:X,className:`p-2 rounded-full hover:${g} transition-colors ${X?"opacity-50 cursor-not-allowed":""}`,title:"Cancelar edición",children:s.jsx(Je,{size:20,className:"text-red-600"})})]}),!R&&s.jsx("button",{onClick:n,className:`p-2 rounded-full hover:${g} transition-colors`,children:s.jsx(Je,{size:20,className:f})})]})]}),s.jsxs("div",{className:"p-6",children:[Q&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600 text-sm",children:Q})}),K&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600 text-sm",children:K})}),s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#fd8412] to-orange-600 rounded-full flex items-center justify-center",children:s.jsxs("span",{className:"text-white text-2xl font-bold",children:[r.nombres.charAt(0),r.apellido_paterno.charAt(0)]})}),s.jsxs("div",{children:[s.jsxs("h2",{className:`text-2xl font-bold ${u} mb-2`,children:[r.nombres," ",r.apellido_paterno," ",r.apellido_materno||""]}),s.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:r.rol==="broker"?"Corredor":r.rol==="broker_externo"?"Corredor Externo":r.rol==="admin"?"Administrador":r.rol==="admin_comercial"?"Admin Comercial":r.rol==="admin_operaciones"?"Admin Operaciones":r.rol})]})]}),S("usuarios","edit")&&s.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[s.jsx(sx,{checked:r.is_active,onChange:Ke,disabled:oe||j&&r.id===j.id,className:"scale-100"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:`text-sm font-medium ${f}`,children:r.is_active?"Activo":"Inactivo"}),j&&r.id===j.id&&s.jsx("span",{className:"text-xs text-orange-600 font-medium",children:"(Tu cuenta)"})]})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:`text-lg font-semibold ${u} mb-4 flex items-center`,children:[s.jsx("div",{className:"w-1 h-6 bg-[#fd8412] rounded-full mr-3"}),"Información Personal"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`flex items-center space-x-3 ${y} rounded-xl p-4`,children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm ${f}`,children:"Email"}),R?s.jsx("input",{type:"email",value:I?.email||"",onChange:ce=>ue("email",ce.target.value),className:`w-full px-3 py-1 ${g} ${m} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent text-sm`}):s.jsx("p",{className:`font-medium ${u}`,children:r.email})]})]}),s.jsxs("div",{className:`flex items-center space-x-3 ${y} rounded-xl p-4`,children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm ${f}`,children:"Teléfono"}),R?s.jsx("input",{type:"tel",value:I?.telefono||"",onChange:ce=>ue("telefono",ce.target.value),className:`w-full px-3 py-1 ${g} ${m} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent text-sm`,placeholder:"+56 9 1234 5678"}):s.jsx("p",{className:`font-medium ${u}`,children:r.telefono||"No especificado"})]})]}),s.jsxs("div",{className:`flex items-center space-x-3 ${y} rounded-xl p-4`,children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V4a2 2 0 114 0v2m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm ${f}`,children:"RUT"}),R?s.jsx("input",{type:"text",value:I?.rut||"",onChange:ce=>ue("rut",ce.target.value),className:`w-full px-3 py-1 ${g} ${m} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent text-sm`,placeholder:"12.345.678-9"}):s.jsx("p",{className:`font-medium ${u}`,children:Fw(r.rut)})]})]}),s.jsxs("div",{className:`flex items-center space-x-3 ${y} rounded-xl p-4`,children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${f}`,children:"Username"}),s.jsxs("p",{className:`font-medium ${u}`,children:["@",r.username]})]})]})]}),s.jsx("div",{className:"mt-6",children:s.jsxs("div",{className:`flex items-start space-x-3 ${y} rounded-xl p-4`,children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center mt-1`,children:s.jsxs("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm ${f} mb-1`,children:"Dirección"}),R?s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"text",value:I?.direccion||"",onChange:ce=>ue("direccion",ce.target.value),className:`w-full px-3 py-1 ${g} ${m} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent text-sm`,placeholder:"Av. Providencia 1234"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"text",value:I?.comuna||"",onChange:ce=>ue("comuna",ce.target.value),className:`px-3 py-1 ${g} ${m} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent text-sm`,placeholder:"Comuna"}),s.jsxs("select",{value:I?.region?.toString()||"",onChange:ce=>ue("region",ce.target.value?parseInt(ce.target.value):null),className:`px-3 py-1 ${g} ${m} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent text-sm`,children:[s.jsx("option",{value:"",children:"Seleccionar región"}),nx.map(ce=>s.jsxs("option",{value:ce.id,children:[ce.id===7?"RM":ce.id," - ",ce.nombre]},ce.id))]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:`font-medium ${u} mb-2`,children:r.direccion||"No especificada"}),s.jsxs("div",{className:"flex space-x-4 text-sm",children:[s.jsxs("span",{className:`${f}`,children:[s.jsx("span",{className:"font-medium",children:"Comuna:"})," ",r.comuna||"No especificada"]}),s.jsxs("span",{className:`${f}`,children:[s.jsx("span",{className:"font-medium",children:"Región:"})," ",Yw(r.region)]})]})]})]})]})}),s.jsxs("div",{className:"mt-6 flex items-center space-x-6",children:[s.jsxs("div",{className:`flex items-center space-x-3 ${y} rounded-xl p-4`,children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${f}`,children:"Fecha de Nacimiento"}),s.jsx("p",{className:`font-medium ${u}`,children:Ui(r.fecha_nacimiento)})]})]}),s.jsxs("div",{className:`flex items-center space-x-3 ${y} rounded-xl p-4`,children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${f}`,children:"Inicio de Contrato"}),s.jsx("p",{className:`font-medium ${u}`,children:Ui(r.fecha_inicio_contrato)})]})]})]})]}),(r.rol==="broker"||r.rol==="broker_externo")&&s.jsxs("div",{className:"mt-8",children:[s.jsxs("h3",{className:`text-lg font-semibold ${u} mb-4 flex items-center`,children:[s.jsx("div",{className:"w-1 h-6 bg-[#fd8412] rounded-full mr-3"}),"Información Laboral"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx("div",{className:`${v} rounded-xl p-4 shadow-lg border ${p}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-10 h-10 ${y} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${f}`,children:"Nuevas Ventas"}),s.jsxs("p",{className:"text-2xl font-bold text-[#fd8412]",children:[r.nuevas_ventas||0,"%"]})]})]})}),s.jsx("div",{className:`${v} rounded-xl p-4 shadow-lg border ${p}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-10 h-10 ${y} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${f}`,children:"Renovaciones"}),s.jsxs("p",{className:"text-2xl font-bold text-[#fd8412]",children:[r.renovaciones||0,"%"]})]})]})}),s.jsx("div",{className:`${y} rounded-xl p-4`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${f}`,children:"UF Vendida"}),s.jsx("p",{className:`text-2xl font-bold ${u}`,children:r.uf_vendida||0})]})]})})]}),r.rol==="broker_externo"&&r.jefe_comercial_id&&s.jsx("div",{className:"mt-6",children:s.jsxs("div",{className:`flex items-center space-x-3 ${y} rounded-xl p-4`,children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${f}`,children:"Jefe Comercial"}),s.jsxs("p",{className:`font-medium ${u}`,children:["ID: ",r.jefe_comercial_id]})]})]})})]}),(r.rol==="broker"||r.rol==="broker_externo")&&r.contract&&s.jsxs("div",{className:"mt-8",children:[s.jsxs("h3",{className:`text-lg font-semibold ${u} mb-4 flex items-center`,children:[s.jsx("div",{className:"w-1 h-6 bg-[#fd8412] rounded-full mr-3"}),"Contrato Firmado"]}),s.jsx("div",{className:`${y} rounded-xl p-6`,children:s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx("div",{className:`w-16 h-16 ${v} rounded-full flex items-center justify-center`,children:s.jsx(Ua,{className:"w-8 h-8 text-blue-600"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:`font-medium ${u} mb-1`,children:"Contrato disponible"}),s.jsxs("p",{className:`text-sm ${f}`,children:["Subido el ",Ui(r.contract.created_at)]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(he,{type:"button",variant:"outlined",color:"primary",onClick:q,disabled:U,className:"flex items-center",children:[s.jsx(ca,{className:"w-4 h-4 mr-2"}),U?"Cargando...":"Ver Contrato"]}),s.jsxs(he,{type:"button",variant:"outlined",color:"primary",onClick:se,className:"flex items-center",children:[s.jsx(ol,{className:"w-4 h-4 mr-2"}),"Descargar"]})]})]})})]}),(r.rol==="broker"||r.rol==="broker_externo")&&r.comentarios&&s.jsxs("div",{className:"mt-8",children:[s.jsxs("h3",{className:`text-lg font-semibold ${u} mb-4 flex items-center`,children:[s.jsx("div",{className:"w-1 h-6 bg-[#fd8412] rounded-full mr-3"}),"Comentarios"]}),s.jsx("div",{className:`${y} rounded-xl p-4`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center mt-1`,children:s.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:`${u} leading-relaxed`,children:r.comentarios})})]})})]}),s.jsxs("div",{className:"mt-8",children:[s.jsxs("h3",{className:`text-lg font-semibold ${u} mb-4 flex items-center`,children:[s.jsx("div",{className:"w-1 h-6 bg-[#fd8412] rounded-full mr-3"}),"Información del Sistema"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`flex items-center space-x-3 ${y} rounded-xl p-4`,children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${f}`,children:"Fecha de Registro"}),s.jsx("p",{className:`font-medium ${u}`,children:Ui(r.fecha_registro)})]})]}),!(r.rol==="broker"||r.rol==="broker_externo")&&s.jsxs("div",{className:`flex items-center space-x-3 ${y} rounded-xl p-4`,children:[s.jsx("div",{className:`w-10 h-10 ${v} rounded-lg flex items-center justify-center`,children:s.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${f}`,children:"UF Vendida"}),s.jsx("p",{className:`font-medium ${u}`,children:r.uf_vendida||0})]})]})]})]})]})]})]}),s.jsx(Vw,{isOpen:T,onClose:()=>{H(!1),N(null)},user:re,onConfirm:async()=>{re&&(await ke(!1),H(!1),N(null))},isDeactivating:oe}),s.jsx(rx,{isOpen:C,onClose:()=>{$(!1),D(null)},fileId:O?.id||"",fileName:O?.name||"",fileType:O?.mimeType||"",fileSize:O?.size||0})]})},Iw=({isOpen:o,onClose:n,onConfirm:r,user:i,isLoading:c=!1})=>{if(!o||!i)return null;const u=p=>`${p.nombres} ${p.apellido_paterno}${p.apellido_materno?` ${p.apellido_materno}`:""}`,f=p=>({admin:"Administrador",admin_comercial:"Admin Comercial",admin_operaciones:"Admin Operaciones",broker:"Corredor",broker_externo:"Corredor Externo"})[p]||p;return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n}),s.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(fs,{className:"w-6 h-6 text-red-500"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Eliminar Usuario"})]}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:c,children:s.jsx(Je,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"¿Estás seguro de que quieres eliminar al siguiente usuario?"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Nombre:"}),s.jsx("span",{className:"ml-2 text-gray-700",children:u(i)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Email:"}),s.jsx("span",{className:"ml-2 text-gray-700",children:i.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Rol:"}),s.jsx("span",{className:"ml-2 text-gray-700",children:f(i.rol)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Username:"}),s.jsxs("span",{className:"ml-2 text-gray-700",children:["@",i.username]})]})]})})]}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex",children:[s.jsx(fs,{className:"w-5 h-5 text-red-400 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-red-800 font-medium",children:"Esta acción no se puede deshacer"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:"El usuario será eliminado permanentemente de la base de datos y no podrá acceder al sistema."})]})]})})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[s.jsx(he,{onClick:n,variant:"outlined",disabled:c,children:"Cancelar"}),s.jsx(he,{onClick:r,color:"error",disabled:c,loading:c,children:c?"Eliminando...":"Eliminar Usuario"})]})]})]})},Xw=[{id:1,nombre:"Arica y Parinacota"},{id:2,nombre:"Tarapacá"},{id:3,nombre:"Antofagasta"},{id:4,nombre:"Atacama"},{id:5,nombre:"Coquimbo"},{id:6,nombre:"Valparaíso"},{id:7,nombre:"Región Metropolitana de Santiago"},{id:8,nombre:"Libertador General Bernardo O'Higgins"},{id:9,nombre:"Maule"},{id:10,nombre:"Ñuble"},{id:11,nombre:"Biobío"},{id:12,nombre:"La Araucanía"},{id:13,nombre:"Los Ríos"},{id:14,nombre:"Los Lagos"},{id:15,nombre:"Aysén del General Carlos Ibáñez del Campo"},{id:16,nombre:"Magallanes y de la Antártica Chilena"}],Qw=({filters:o,onFiltersChange:n,onCreateNew:r})=>{const{can:i}=Qt(),{bgCard:c,textSecondary:u,textMuted:f,inputBg:p,inputBorder:g,inputText:m,inputPlaceholder:x}=we(),[v,y]=_.useState(!1),S=$=>{n({...o,search:$||void 0,page:1})},j=($,O)=>{n({...o,[$]:O,page:1})},C=()=>{n({page:1,limit:5})};return s.jsxs("div",{className:`${c} rounded-lg shadow-sm p-4`,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(Kg,{size:20,className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${f}`}),s.jsx("input",{type:"text",placeholder:"Buscar usuarios...",className:`w-full pl-10 pr-4 py-2 ${p} ${m} ${x} border ${g} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent`,onChange:$=>S($.target.value),value:o.search||""})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(he,{onClick:()=>y(!v),variant:"outlined",className:"flex items-center gap-2",children:[s.jsx(Pg,{size:16}),"Filtros"]}),i("usuarios","create")&&s.jsxs(he,{onClick:r,className:"flex items-center gap-2",children:[s.jsx(hw,{size:16}),"Nuevo Usuario"]})]})]}),v&&s.jsx("div",{className:"mt-4 pt-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-1`,children:"Rol"}),s.jsxs("select",{className:`w-full px-3 py-2 ${p} ${m} border ${g} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent`,onChange:$=>j("rol",$.target.value||void 0),value:o.rol||"",children:[s.jsx("option",{value:"",children:"Todos los roles"}),s.jsx("option",{value:"admin",children:"Administrador"}),s.jsx("option",{value:"admin_comercial",children:"Admin Comercial"}),s.jsx("option",{value:"admin_operaciones",children:"Admin Operaciones"}),s.jsx("option",{value:"broker",children:"Corredor"}),s.jsx("option",{value:"broker_externo",children:"Corredor Externo"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:`block text-sm font-medium ${u} mb-1`,children:"Región"}),s.jsxs("select",{className:`w-full px-3 py-2 ${p} ${m} border ${g} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent`,onChange:$=>j("region",$.target.value?parseInt($.target.value):void 0),value:o.region?.toString()||"",children:[s.jsx("option",{value:"",children:"Todas las regiones"}),Xw.map($=>s.jsxs("option",{value:$.id,children:[$.id===7?"RM":$.id," - ",$.nombre]},$.id))]})]}),s.jsx("div",{children:s.jsx(he,{onClick:C,variant:"outlined",className:"text-sm",children:"Limpiar Filtros"})})]})})]})},Zw=()=>{const[o,n]=_.useState(!1);return{isModalOpen:o,openModal:()=>{n(!0)},closeModal:()=>{n(!1)}}},Jw=()=>{const o=Bt(),{bg:n}=we(),[r,i]=_.useState(!0),[c,u]=_.useState(!1),[f,p]=_.useState(0),{isProfileDrawerOpen:g,openProfileDrawer:m,closeProfileDrawer:x,handleOpenChangePasswordModal:v}=Qr(),{isModalOpen:y,openModal:S,closeModal:j}=Zw(),[C,$]=_.useState(!1),[O,D]=_.useState(null),[U,A]=_.useState(!1),[R,P]=_.useState(!1),[I,ae]=_.useState(null),[X,F]=_.useState({page:1,limit:5});_.useEffect(()=>{const ne=()=>{u(window.innerWidth<=768),window.innerWidth<=768?i(!1):i(!0)};return ne(),window.addEventListener("resize",ne),()=>window.removeEventListener("resize",ne)},[]);const Q=()=>{o("/login")},Y=()=>{i(!r)},oe=()=>{S()},ee=ne=>{F(ne),p(fe=>fe+1)},K=ne=>{F(fe=>({...fe,page:ne})),p(fe=>fe+1)},E=async ne=>{try{const{user:fe,credentials:ue,error:Ke}=await ds.createUserComplete(ne);if(Ke)throw new Error(Ke);fe&&ue&&(j(),p(ke=>ke+1),alert(`Usuario creado exitosamente!

Username: ${ue.username}
Se ha enviado un email con las credenciales.`))}catch(fe){throw fe}},T=ne=>{},H=async ne=>{try{const fe=await ds.getUserById(ne);fe.user?(D(fe.user),$(!0)):alert("Error: No se pudo encontrar el usuario")}catch{alert("Error al buscar el usuario")}},re=async()=>{if(O){A(!0);try{const{success:ne,error:fe}=await ds.deleteUser(O.id);ne?($(!1),D(null),p(ue=>ue+1),alert("Usuario eliminado exitosamente")):alert(`Error al eliminar usuario: ${fe}`)}catch(ne){alert(`Error de conexión: ${ne.message}`)}finally{A(!1)}}},N=()=>{$(!1),D(null),A(!1)},q=ne=>{ae(ne),P(!0)},se=()=>{P(!1),ae(null)},le=ne=>{ae(ne),p(fe=>fe+1)};return s.jsxs("div",{className:`h-screen overflow-hidden ${n}`,children:[s.jsx(Kr,{onLogout:Q,onMenuToggle:Y,showMenuButton:c,showUserIcon:!0,showLogout:!1,onUserIconClick:m}),s.jsxs("div",{className:"flex h-screen pt-16",children:[s.jsx(Ir,{isOpen:r,onClose:()=>i(!1)}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("main",{className:"p-6 pt-24",children:s.jsxs("div",{className:"max-w-7xl mx-auto h-full flex flex-col",children:[s.jsx(Qw,{filters:X,onFiltersChange:ee,onCreateNew:oe}),s.jsx("div",{className:"mb-6"}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx(qw,{onEditUser:T,onDeleteUser:H,onViewUser:q,filters:X,onPageChange:K},f)})]})})})]}),s.jsx(Gw,{isOpen:y,onClose:j,onSubmit:E}),s.jsx(Kw,{isOpen:R,onClose:se,user:I,onUserUpdated:le}),s.jsx(Iw,{isOpen:C,onClose:N,user:O,onConfirm:re,isLoading:U}),s.jsx(Xr,{isOpen:g,onClose:x,onOpenChangePasswordModal:v})]})},Ww=({onCreateFolder:o,onUploadFile:n,canCreate:r=!0,canUpload:i=!0})=>{const{text:c,textSecondary:u}=we(),f=Ct("archivos");return s.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start mb-8 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center mb-2",children:s.jsx("h1",{className:`text-2xl font-bold ${c}`,children:f.title})}),s.jsx("p",{className:u,children:f.description})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-shrink-0",children:[r&&s.jsxs(he,{variant:"outlined",color:"primary",size:"lg",onClick:o,className:"w-full sm:w-auto px-6 py-3",children:[s.jsx(Hg,{size:18,className:"mr-2"}),"Nueva Carpeta"]}),i&&s.jsxs(he,{variant:"contained",color:"primary",size:"lg",onClick:n,className:"w-full sm:w-auto px-6 py-3",children:[s.jsx(ul,{size:18,className:"mr-2"}),"Subir Archivo"]})]})]})},e2=({currentPath:o,onNavigate:n})=>{const{bgCard:r,textSecondary:i,textMuted:c}=we(),f=(()=>{if(o==="/")return[{name:"Inicio",path:"/"}];const p=o.split("/").filter(x=>x!==""),g=[{name:"Inicio",path:"/"}];let m="";return p.forEach(x=>{m+=`/${x}`,g.push({name:x,path:m})}),g})();return s.jsx("div",{className:`${r} rounded-2xl shadow-sm p-4 mb-6`,children:s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:f.map((p,g)=>s.jsxs(Hr.Fragment,{children:[g===0&&s.jsx(Gg,{size:16,className:`${c} mr-1`}),s.jsx("button",{onClick:()=>n(p.path),className:`
                  text-sm font-medium truncate transition-colors
                  ${g===f.length-1?"text-[#fd8412] cursor-default":`${i} hover:text-[#fd8412] hover:underline`}
                `,disabled:g===f.length-1,children:p.name}),g<f.length-1&&s.jsx(N1,{size:16,className:`${c} flex-shrink-0`})]},p.path))})})})},t2=({id:o,name:n,type:r,size:i,extension:c,modified:u,itemCount:f,mime_type:p,onOpen:g,onDownload:m,onRename:x,onDelete:v,onPreview:y,openMenuId:S,setOpenMenuId:j})=>{const{bgCard:C,text:$,textSecondary:O,textMuted:D,hoverBg:U,border:A}=we(),R=_.useRef(null),P=()=>{if(r==="folder")return s.jsx(H1,{size:32,className:"text-[#1e3a8a]"});switch(c?.toLowerCase()){case"pdf":return s.jsx(Ua,{size:32,className:"text-red-500"});case"xlsx":case"xls":return s.jsx(qg,{size:32,className:"text-green-600"});case"docx":case"doc":return s.jsx(Ua,{size:32,className:"text-blue-600"});case"jpg":case"jpeg":case"png":case"gif":return s.jsx(Vg,{size:32,className:"text-purple-500"});case"zip":case"rar":return s.jsx(Dg,{size:32,className:"text-yellow-600"});default:return s.jsx(Bi,{size:32,className:"text-gray-500"})}},I=Q=>{if(Q===0)return"0 B";const Y=1024,oe=["B","KB","MB","GB"],ee=Math.floor(Math.log(Q)/Math.log(Y));return parseFloat((Q/Math.pow(Y,ee)).toFixed(2))+" "+oe[ee]},ae=Q=>{const oe=new Date().getTime()-Q.getTime(),ee=Math.floor(oe/(1e3*60*60*24));return ee===0?"Hoy":ee===1?"Ayer":ee<7?`Hace ${ee} días`:Q.toLocaleDateString()},X=()=>{j(S===o?null:o)},F=Q=>{switch(j(null),Q){case"open":g(o);break;case"preview":r==="file"&&y&&p&&i&&y(o,n,p,i);break;case"download":m?.(o);break;case"rename":x?.(o);break;case"delete":v?.(o);break}};return _.useEffect(()=>{const Q=Y=>{S===o&&R.current&&!R.current.contains(Y.target)&&j(null)};return document.addEventListener("mousedown",Q),()=>{document.removeEventListener("mousedown",Q)}},[S,o,j]),s.jsx("div",{className:`${C} rounded-2xl shadow-sm hover:shadow-md transition-all duration-300 p-4 group cursor-pointer ${S===o?"relative z-30":""}`,onClick:()=>g(o),children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:P()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:`text-sm font-medium ${$} truncate mb-1`,children:n}),s.jsxs("div",{className:`flex items-center gap-4 text-xs ${O}`,children:[r==="folder"?s.jsxs("span",{children:[f," elementos"]}):i&&s.jsx("span",{children:I(i)}),s.jsx("span",{children:ae(u)})]})]}),s.jsxs("div",{className:"relative flex-shrink-0",ref:R,children:[s.jsx("button",{onClick:Q=>{Q.stopPropagation(),X()},className:`p-2 rounded-full ${U} transition-colors opacity-0 group-hover:opacity-100`,children:s.jsx(Bg,{size:16,className:O})}),S===o&&s.jsxs("div",{className:`absolute right-0 top-full mt-1 z-20 ${C} rounded-xl shadow-lg border ${A} py-2 min-w-[140px]`,children:[s.jsxs("button",{onClick:Q=>{Q.stopPropagation(),F("open")},className:`w-full px-3 py-2 text-left text-sm ${$} ${U} flex items-center transition-colors`,children:[s.jsx(ca,{size:14,className:`mr-2 ${D}`}),r==="folder"?"Abrir":"Ver"]}),r==="file"&&m&&s.jsxs("button",{onClick:Q=>{Q.stopPropagation(),F("download")},className:`w-full px-3 py-2 text-left text-sm ${$} ${U} flex items-center transition-colors`,children:[s.jsx(ol,{size:14,className:`mr-2 ${D}`}),"Descargar"]}),x&&s.jsxs("button",{onClick:Q=>{Q.stopPropagation(),F("rename")},className:`w-full px-3 py-2 text-left text-sm ${$} ${U} flex items-center transition-colors`,children:[s.jsx(cl,{size:14,className:`mr-2 ${D}`}),"Renombrar"]}),v&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`h-px ${A} my-1 mx-2`}),s.jsxs("button",{onClick:Q=>{Q.stopPropagation(),F("delete")},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center transition-colors",children:[s.jsx(tt,{size:14,className:"mr-2 text-red-400"}),"Eliminar"]})]})]})]})]})})},a2=({files:o,folders:n,onItemOpen:r,onItemDownload:i,onItemRename:c,onItemDelete:u,onItemPreview:f,loading:p=!1,canEdit:g=!0,canDelete:m=!0,canDownload:x=!0})=>{const{text:v,textSecondary:y,textMuted:S}=we(),[j,C]=_.useState(null),$=[...n,...o],O=D=>{const U=$.find(A=>A.id===D);U&&r(D,U.type)};return p?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fd8412] mx-auto mb-4"}),s.jsx("p",{className:y,children:"Cargando archivos..."})]})}):$.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(Wu,{size:64,className:S})}),s.jsx("h3",{className:`text-lg font-medium ${v} mb-2`,children:"Esta carpeta está vacía"}),s.jsx("p",{className:y,children:"Sube archivos o crea nuevas carpetas para comenzar"})]}):s.jsx("div",{className:"space-y-3",children:$.map(D=>s.jsx(t2,{id:D.id,name:D.name,type:D.type,size:D.type==="file"?D.size:void 0,extension:D.type==="file"?D.mime_type?.split("/").pop():void 0,modified:new Date((D.type==="file",D.updated_at)),itemCount:D.type==="folder"?D.itemCount:void 0,mime_type:D.type==="file"?D.mime_type:void 0,onOpen:O,onDownload:x&&D.type==="file"?i:void 0,onRename:g?c:void 0,onDelete:m?u:void 0,onPreview:f,openMenuId:j,setOpenMenuId:C},D.id))})},s2=({isOpen:o,onClose:n,onSubmit:r,currentPath:i,loading:c=!1})=>{const[u,f]=_.useState(""),[p,g]=_.useState(null),{modalBg:m,text:x,textSecondary:v,textMuted:y,border:S,inputBg:j,inputBorder:C,inputText:$,inputPlaceholder:O,bgSurface:D}=we(),U=R=>{if(R.preventDefault(),!u.trim()){g("El nombre de la carpeta es requerido");return}if(u.trim().length<2){g("El nombre debe tener al menos 2 caracteres");return}if(u.trim().length>50){g("El nombre no puede exceder 50 caracteres");return}if(/[<>:"/\\|?*]/.test(u.trim())){g('El nombre no puede contener caracteres especiales: < > : " / \\ | ? *');return}g(null),r(u.trim())},A=()=>{f(""),g(null),n()};return o?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:A}),s.jsxs("div",{className:`relative ${m} rounded-2xl shadow-xl w-full max-w-md mx-4 transform transition-all`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${S}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 ${D} rounded-lg`,children:s.jsx(Hg,{size:20,className:"text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:`text-lg font-semibold ${x}`,children:"Nueva Carpeta"}),s.jsxs("p",{className:`text-sm ${v}`,children:["Crear carpeta en: ",i==="/"?"Raíz":i]})]})]}),s.jsx("button",{onClick:A,className:`p-2 ${y} hover:${v} transition-colors`,disabled:c,children:s.jsx(Je,{size:20})})]}),s.jsx("form",{onSubmit:U,className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"folderName",className:`block text-sm font-medium ${v} mb-2`,children:"Nombre de la carpeta"}),s.jsx("input",{type:"text",id:"folderName",value:u,onChange:R=>f(R.target.value),className:`w-full px-4 py-3 ${j} ${$} ${O} border ${C} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,placeholder:"Ingresa el nombre de la carpeta",disabled:c,autoFocus:!0})]}),p&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-600",children:p})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(he,{type:"button",variant:"outlined",color:"secondary",onClick:A,disabled:c,children:"Cancelar"}),s.jsx(he,{type:"submit",variant:"contained",color:"primary",loading:c,disabled:c,children:"Crear Carpeta"})]})]})})]})]}):null},r2=({isOpen:o,onClose:n,onSubmit:r,currentPath:i,loading:c=!1})=>{const[u,f]=_.useState(null),[p,g]=_.useState(!1),[m,x]=_.useState(null),v=_.useRef(null),{modalBg:y,text:S,textSecondary:j,textMuted:C,border:$,bgSurface:O}=we(),D=["image/jpeg","image/png","image/gif","image/webp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/csv"],U=50*1024*1024,A=Y=>D.includes(Y.type)?Y.size>U?"El archivo es demasiado grande. El tamaño máximo es 50MB.":Y.name.length>100?"El nombre del archivo es demasiado largo. Máximo 100 caracteres.":/[<>:"/\\|?*]/.test(Y.name)?'El nombre del archivo no puede contener caracteres especiales: < > : " / \\ | ? *':null:"Tipo de archivo no permitido. Solo se permiten: imágenes, PDF, documentos, hojas de cálculo y archivos de texto.",R=Y=>{const oe=A(Y);if(oe){x(oe),f(null);return}x(null),f(Y)},P=_.useCallback(Y=>{Y.preventDefault(),Y.stopPropagation(),Y.type==="dragenter"||Y.type==="dragover"?g(!0):Y.type==="dragleave"&&g(!1)},[]),I=_.useCallback(Y=>{Y.preventDefault(),Y.stopPropagation(),g(!1),Y.dataTransfer.files&&Y.dataTransfer.files[0]&&R(Y.dataTransfer.files[0])},[]),ae=Y=>{Y.target.files&&Y.target.files[0]&&R(Y.target.files[0])},X=Y=>{if(Y.preventDefault(),!u){x("Por favor selecciona un archivo");return}x(null),r(u)},F=()=>{f(null),x(null),g(!1),v.current&&(v.current.value=""),n()},Q=Y=>{if(Y===0)return"0 B";const oe=1024,ee=["B","KB","MB","GB"],K=Math.floor(Math.log(Y)/Math.log(oe));return parseFloat((Y/Math.pow(oe,K)).toFixed(2))+" "+ee[K]};return o?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:F}),s.jsxs("div",{className:`relative ${y} rounded-2xl shadow-xl w-full max-w-lg mx-4 transform transition-all`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${$}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 ${O} rounded-lg`,children:s.jsx(ul,{size:20,className:"text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:`text-lg font-semibold ${S}`,children:"Subir Archivo"}),s.jsxs("p",{className:`text-sm ${j}`,children:["Subir a: ",i==="/"?"Raíz":i]})]})]}),s.jsx("button",{onClick:F,className:`p-2 ${C} hover:${j} transition-colors`,disabled:c,children:s.jsx(Je,{size:20})})]}),s.jsxs("form",{onSubmit:X,className:"p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-all ${p?"border-blue-400 bg-blue-50":u?"border-green-400 bg-green-50":`${$} hover:border-gray-400`}`,onDragEnter:P,onDragLeave:P,onDragOver:P,onDrop:I,children:[u?s.jsxs("div",{className:"space-y-3",children:[s.jsx(zg,{size:48,className:"text-green-500 mx-auto"}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm font-medium ${S}`,children:u.name}),s.jsxs("p",{className:`text-xs ${j}`,children:[Q(u.size)," • ",u.type]})]}),s.jsx(he,{type:"button",variant:"outlined",color:"secondary",size:"sm",onClick:()=>{f(null),v.current&&(v.current.value="")},disabled:c,children:"Cambiar archivo"})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx(ul,{size:48,className:`${C} mx-auto`}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm font-medium ${S}`,children:"Arrastra y suelta tu archivo aquí"}),s.jsx("p",{className:`text-xs ${j}`,children:"o haz clic para seleccionar"})]}),s.jsx(he,{type:"button",variant:"outlined",color:"primary",size:"sm",onClick:()=>v.current?.click(),disabled:c,children:"Seleccionar archivo"})]}),s.jsx("input",{ref:v,type:"file",onChange:ae,className:"hidden",accept:D.join(","),disabled:c})]}),m&&s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx(Ra,{size:16,className:"text-red-500 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-red-600",children:m})]}),s.jsxs("div",{className:`${O} rounded-lg p-3`,children:[s.jsx("p",{className:`text-xs ${j}`,children:s.jsx("strong",{children:"Tipos de archivo permitidos:"})}),s.jsxs("ul",{className:`text-xs ${j} mt-1 space-y-1`,children:[s.jsx("li",{children:"• Imágenes: JPG, PNG, GIF, WebP"}),s.jsx("li",{children:"• Documentos: PDF, DOC, DOCX"}),s.jsx("li",{children:"• Hojas de cálculo: XLS, XLSX"}),s.jsx("li",{children:"• Texto: TXT, CSV"}),s.jsx("li",{children:"• Tamaño máximo: 50MB"})]})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx(he,{type:"button",variant:"outlined",color:"secondary",onClick:F,disabled:c,className:"flex-1",children:"Cancelar"}),s.jsx(he,{type:"submit",variant:"contained",color:"primary",disabled:c||!u,className:"flex-1",children:c?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Subiendo..."]}):"Subir Archivo"})]})]})]})]}):null},n2=({isOpen:o,onClose:n,onSubmit:r,currentName:i,itemType:c,loading:u=!1})=>{const[f,p]=_.useState(""),[g,m]=_.useState(null),{modalBg:x,text:v,textSecondary:y,textMuted:S,border:j,inputBg:C,inputBorder:$,inputText:O,inputPlaceholder:D,bgSurface:U}=we();_.useEffect(()=>{o&&(p(i),m(null))},[o,i]);const A=P=>{if(P.preventDefault(),!f.trim()){m("El nombre es requerido");return}if(f.trim()===i){m("El nuevo nombre debe ser diferente al actual");return}if(f.trim().length<2){m("El nombre debe tener al menos 2 caracteres");return}if(f.trim().length>50){m("El nombre no puede exceder 50 caracteres");return}if(/[<>:"/\\|?*]/.test(f.trim())){m('El nombre no puede contener caracteres especiales: < > : " / \\ | ? *');return}m(null),r(f.trim())},R=()=>{p(""),m(null),n()};return o?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:R}),s.jsxs("div",{className:`relative ${x} rounded-2xl shadow-xl w-full max-w-md mx-4 transform transition-all`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${j}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 ${U} rounded-lg`,children:s.jsx(tw,{size:20,className:"text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:`text-lg font-semibold ${v}`,children:["Renombrar ",c==="folder"?"Carpeta":"Archivo"]}),s.jsxs("p",{className:`text-sm ${y}`,children:["Nombre actual: ",i]})]})]}),s.jsx("button",{onClick:R,className:`p-2 ${S} hover:${y} transition-colors`,disabled:u,children:s.jsx(Je,{size:20})})]}),s.jsxs("form",{onSubmit:A,className:"p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newName",className:`block text-sm font-medium ${y} mb-2`,children:"Nuevo nombre"}),s.jsx("input",{type:"text",id:"newName",value:f,onChange:P=>{p(P.target.value),g&&m(null)},placeholder:`Nuevo nombre para ${c==="folder"?"la carpeta":"el archivo"}`,className:`w-full px-4 py-3 ${C} ${O} ${D} border ${$} rounded-xl focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] transition-colors disabled:bg-gray-50 disabled:cursor-not-allowed`,disabled:u,autoFocus:!0}),g&&s.jsx("p",{className:"mt-2 text-sm text-red-600",children:g})]}),s.jsxs("div",{className:`${U} rounded-lg p-3`,children:[s.jsx("p",{className:`text-xs ${y}`,children:s.jsx("strong",{children:"Consejos:"})}),s.jsxs("ul",{className:`text-xs ${y} mt-1 space-y-1`,children:[s.jsx("li",{children:"• Usa nombres descriptivos y organizados"}),s.jsx("li",{children:"• Evita caracteres especiales"}),s.jsx("li",{children:"• No excedas 50 caracteres"}),c==="file"&&s.jsx("li",{children:"• Mantén la extensión del archivo"})]})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx(he,{type:"button",variant:"outlined",color:"secondary",onClick:R,disabled:u,className:"flex-1",children:"Cancelar"}),s.jsx(he,{type:"submit",variant:"contained",color:"primary",disabled:u||!f.trim()||f.trim()===i,className:"flex-1",children:u?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Renombrando..."]}):"Renombrar"})]})]})]})]}):null},l2=({isOpen:o,onClose:n,onConfirm:r,itemName:i,itemType:c,loading:u=!1})=>{const{modalBg:f,text:p,textSecondary:g,textMuted:m,border:x}=we();return o?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n}),s.jsxs("div",{className:`relative ${f} rounded-2xl shadow-xl w-full max-w-md mx-4 transform transition-all`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${x}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:s.jsx(tt,{size:20,className:"text-red-600"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:`text-lg font-semibold ${p}`,children:["Eliminar ",c==="folder"?"Carpeta":"Archivo"]}),s.jsx("p",{className:`text-sm ${g}`,children:"Esta acción no se puede deshacer"})]})]}),s.jsx("button",{onClick:n,className:`p-2 ${m} hover:${g} transition-colors`,disabled:u,children:s.jsx(Je,{size:20})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"p-3 bg-red-50 rounded-full",children:s.jsx(fs,{size:32,className:"text-red-500"})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h4",{className:`text-lg font-medium ${p} mb-2`,children:"¿Estás seguro?"}),s.jsxs("p",{className:`text-sm ${g} mb-4`,children:["Estás a punto de eliminar ",s.jsxs("strong",{children:['"',i,'"']})]}),c==="folder"&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-xs text-yellow-800",children:[s.jsx("strong",{children:"⚠️ Atención:"})," Al eliminar esta carpeta, también se eliminarán todos los archivos y subcarpetas que contenga."]})})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx(he,{type:"button",variant:"outlined",color:"secondary",onClick:n,disabled:u,className:"flex-1",children:"Cancelar"}),s.jsx(he,{type:"button",variant:"contained",color:"error",onClick:r,disabled:u,className:"flex-1",children:u?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Eliminando..."]}):"Eliminar"})]})]})]})]}):null},i2=()=>{const o=Bt(),{bg:n}=we(),[r,i]=_.useState(!0),[c,u]=_.useState(!1),{isProfileDrawerOpen:f,openProfileDrawer:p,closeProfileDrawer:g,handleOpenChangePasswordModal:m}=Qr(),{can:x}=Qt(),[v,y]=_.useState("/"),[S,j]=_.useState(!1),[C,$]=_.useState([]),[O,D]=_.useState([]),[U,A]=_.useState(null),[R,P]=_.useState(!1),[I,ae]=_.useState(!1),[X,F]=_.useState(!1),[Q,Y]=_.useState(!1),[oe,ee]=_.useState(!1),[K,E]=_.useState(null),[T,H]=_.useState(!1),[re,N]=_.useState(null),q=async ve=>{j(!0),A(null);try{const xe=await bt.getFolderContents(ve);xe.error?(A(xe.error),$([]),D([])):xe.data&&($(xe.data.folders),D(xe.data.files))}catch{A("Error de conexión al cargar archivos"),$([]),D([])}finally{j(!1)}};_.useEffect(()=>{q(v)},[v]),_.useEffect(()=>{const ve=()=>{u(window.innerWidth<=768),window.innerWidth<=768?i(!1):i(!0)};return ve(),window.addEventListener("resize",ve),()=>window.removeEventListener("resize",ve)},[]);const se=()=>{o("/login")},le=()=>{i(!r)},ne=()=>{P(!0)},fe=()=>{ae(!0)},ue=async ve=>{ee(!0);try{(await bt.createFolder(ve,v)).error||(await q(v),P(!1))}catch{}finally{ee(!1)}},Ke=async ve=>{ee(!0);try{(await bt.uploadFile(ve.name,ve,ve.type,ve.size,v)).error||(await q(v),ae(!1))}catch{}finally{ee(!1)}},ke=ve=>{y(ve)},ce=(ve,xe)=>{if(xe==="folder"){const Be=C.find(Pe=>Pe.id===ve);Be&&y(Be.path)}else{const Be=O.find(Pe=>Pe.id===ve);Be&&(N({id:Be.id,name:Be.name,mimeType:Be.mime_type||"",size:Be.size}),H(!0))}},Ye=async ve=>{try{const xe=await bt.getFileDownloadUrl(ve);if(xe.error)return;if(xe.data){const Be=O.find(Pe=>Pe.id===ve);if(Be){const Pe=document.createElement("a");Pe.href=xe.data,Pe.download=Be.name,Pe.target="_blank",document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe)}}}catch{}},at=ve=>{const xe=O.find(Pe=>Pe.id===ve),Be=C.find(Pe=>Pe.id===ve);xe?(E({id:xe.id,name:xe.name,type:"file"}),F(!0)):Be&&(E({id:Be.id,name:Be.name,type:"folder"}),F(!0))},fa=ve=>{const xe=O.find(Pe=>Pe.id===ve),Be=C.find(Pe=>Pe.id===ve);xe?(E({id:xe.id,name:xe.name,type:"file"}),Y(!0)):Be&&(E({id:Be.id,name:Be.name,type:"folder"}),Y(!0))},za=(ve,xe,Be,Pe)=>{N({id:ve,name:xe,mimeType:Be,size:Pe}),H(!0)},ms=async ve=>{if(K){ee(!0);try{(await bt.renameItem(K.id,ve)).error||(await q(v),F(!1),E(null))}catch{}finally{ee(!1)}}},Le=async()=>{if(K){ee(!0);try{(await bt.deleteItem(K.id)).error||(await q(v),Y(!1),E(null))}catch{}finally{ee(!1)}}};return s.jsxs("div",{className:`h-screen overflow-hidden ${n}`,children:[s.jsx(Kr,{onLogout:se,onMenuToggle:le,showMenuButton:c,showUserIcon:!0,showLogout:!1,onUserIconClick:p}),s.jsxs("div",{className:"flex h-screen pt-16",children:[s.jsx(Ir,{isOpen:r,onClose:()=>i(!1)}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsx("main",{className:"p-6 pt-24",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx(Ww,{onCreateFolder:ne,onUploadFile:fe,canCreate:x("archivos","create"),canUpload:x("archivos","upload")}),s.jsx(e2,{currentPath:v,onNavigate:ke}),s.jsx(a2,{files:O,folders:C,onItemOpen:ce,onItemDownload:Ye,onItemRename:at,onItemDelete:fa,onItemPreview:za,loading:S,canEdit:x("archivos","edit"),canDelete:x("archivos","delete"),canDownload:x("archivos","download")})]})})})]}),s.jsx(Xr,{isOpen:f,onClose:g,onOpenChangePasswordModal:m}),s.jsx(s2,{isOpen:R,onClose:()=>P(!1),onSubmit:ue,currentPath:v,loading:oe}),s.jsx(r2,{isOpen:I,onClose:()=>ae(!1),onSubmit:Ke,currentPath:v,loading:oe}),s.jsx(n2,{isOpen:X,onClose:()=>{F(!1),E(null)},onSubmit:ms,currentName:K?.name||"",itemType:K?.type||"file",loading:oe}),s.jsx(l2,{isOpen:Q,onClose:()=>{Y(!1),E(null)},onConfirm:Le,itemName:K?.name||"",itemType:K?.type||"file",loading:oe}),s.jsx(rx,{isOpen:T,onClose:()=>{H(!1),N(null)},fileId:re?.id||"",fileName:re?.name||"",fileType:re?.mimeType||"",fileSize:re?.size||0})]})};class Bs{static async getAnnouncements(n={}){try{const{priority:r,status:i,search:c,date_from:u,date_to:f,page:p=1,limit:g=10}=n,{data:{user:m}}=await W.auth.getUser();let x=W.from("announcements").select(`
          *,
          announcement_recipients!left(user_id, is_read, read_at)
        `).eq("announcement_recipients.user_id",m?.id).order("created_at",{ascending:!1});r&&(x=x.eq("priority",r)),i&&(x=x.eq("status",i)),c&&(x=x.or(`title.ilike.%${c}%,content.ilike.%${c}%`)),u&&(x=x.gte("created_at",u)),f&&(x=x.lte("created_at",f));const v=(p-1)*g,y=v+g-1;x=x.range(v,y);const{data:S,error:j,count:C}=await x;if(j)throw j;const $=S||[],O=C||0,D=v+g<O;return{success:!0,data:{announcements:$.map(A=>{const P=(A.announcement_recipients||[]).find(I=>I.user_id===m?.id);return{...A,isRead:P?P.is_read:!1,readAt:P?.read_at||null}}),total:O,page:p,limit:g,hasMore:D}}}catch(r){return console.error("Error fetching announcements:",r),{success:!1,error:r instanceof Error?r.message:"Error desconocido"}}}static async getAnnouncementById(n){try{const{data:r,error:i}=await W.from("announcements").select("*").eq("id",n).single();if(i)throw i;const{data:c,error:u}=await W.from("announcement_recipients").select("*").eq("announcement_id",n);if(u)throw u;const{data:f,error:p}=await W.from("announcement_roles").select("*").eq("announcement_id",n);if(p)throw p;return{success:!0,data:{announcement:r,recipients:c||[],roles:f||[]}}}catch(r){return console.error("Error fetching announcement:",r),{success:!1,error:r instanceof Error?r.message:"Error desconocido"}}}static async createAnnouncement(n){try{const{title:r,content:i,priority:c,status:u,scheduled_at:f,published_at:p,target_roles:g}=n,{data:m,error:x}=await W.from("announcements").insert({title:r,content:i,priority:c,status:u,scheduled_at:f,published_at:p,created_by:(await W.auth.getUser()).data.user?.id}).select().single();if(x)throw x;if(g&&g.length>0){const v=g.map(S=>({announcement_id:m.id,role:S})),{error:y}=await W.from("announcement_roles").insert(v);if(y)throw y;if(u==="published"){const{error:S}=await W.rpc("create_announcement_recipients",{announcement_uuid:m.id});S&&console.warn("Error creating announcement recipients:",S)}}return{success:!0,data:m,message:"Anuncio creado exitosamente"}}catch(r){return console.error("Error creating announcement:",r),{success:!1,error:r instanceof Error?r.message:"Error desconocido"}}}static async updateAnnouncement(n){try{const{id:r,title:i,content:c,priority:u,status:f,scheduled_at:p,published_at:g,target_roles:m}=n,x={};i!==void 0&&(x.title=i),c!==void 0&&(x.content=c),u!==void 0&&(x.priority=u),f!==void 0&&(x.status=f),p!==void 0&&(x.scheduled_at=p),g!==void 0&&(x.published_at=g);const{data:v,error:y}=await W.from("announcements").update(x).eq("id",r).select().single();if(y)throw y;if(m!==void 0){if(await W.from("announcement_roles").delete().eq("announcement_id",r),m.length>0){const S=m.map(C=>({announcement_id:r,role:C})),{error:j}=await W.from("announcement_roles").insert(S);if(j)throw j}if(f==="published"){const{error:S}=await W.rpc("create_announcement_recipients",{announcement_uuid:r});S&&console.warn("Error creating announcement recipients:",S)}}return{success:!0,data:v,message:"Anuncio actualizado exitosamente"}}catch(r){return console.error("Error updating announcement:",r),{success:!1,error:r instanceof Error?r.message:"Error desconocido"}}}static async deleteAnnouncement(n){try{const{error:r}=await W.from("announcements").delete().eq("id",n);if(r)throw r;return{success:!0,message:"Anuncio eliminado exitosamente"}}catch(r){return console.error("Error deleting announcement:",r),{success:!1,error:r instanceof Error?r.message:"Error desconocido"}}}static async getAnnouncementStats(){try{const{data:n,error:r}=await W.from("announcements").select("status");if(r)throw r;const{data:i,error:c}=await W.from("announcements").select("priority");if(c)throw c;const u=n?.length||0,f=n?.filter(y=>y.status==="published").length||0,p=n?.filter(y=>y.status==="draft").length||0,g=n?.filter(y=>y.status==="archived").length||0,m={low:0,medium:0,high:0};i?.forEach(y=>{m[y.priority]++});const{data:{user:x}}=await W.auth.getUser();let v=0;if(x){const{data:y}=await W.rpc("get_unread_announcements_count",{user_uuid:x.id});v=y||0}return{success:!0,data:{total:u,published:f,draft:p,archived:g,unread:v,by_priority:m}}}catch(n){return console.error("Error fetching announcement stats:",n),{success:!1,error:n instanceof Error?n.message:"Error desconocido"}}}static async markAsRead(n){try{const{data:{user:r}}=await W.auth.getUser();if(!r)throw new Error("Usuario no autenticado");const{error:i}=await W.rpc("mark_announcement_as_read",{announcement_uuid:n,user_uuid:r.id});if(i)throw i;return{success:!0,message:"Anuncio marcado como leído"}}catch(r){return console.error("Error marking announcement as read:",r),{success:!1,error:r instanceof Error?r.message:"Error desconocido"}}}}const o2=({onAnnouncementSelect:o,onEditAnnouncement:n,onDeleteAnnouncement:r,onCreateNew:i})=>{const{can:c}=Qt(),{bgCard:u,text:f,textSecondary:p,textMuted:g,inputBg:m,inputBorder:x,inputText:v,inputPlaceholder:y,hoverBg:S}=we(),[j,C]=_.useState([]),[$,O]=_.useState(!0),[D,U]=_.useState(null),[A,R]=_.useState({page:1,limit:10}),[P,I]=_.useState(0),[ae,X]=_.useState(!1),[F,Q]=_.useState(!1),Y=async()=>{try{O(!0),U(null);const N=await Bs.getAnnouncements(A);N.success&&N.data?(C(N.data.announcements),I(N.data.total),X(N.data.hasMore)):U(N.error||"Error al cargar anuncios")}catch(N){U("Error inesperado al cargar anuncios"),console.error("Error loading announcements:",N)}finally{O(!1)}};_.useEffect(()=>{Y()},[A]);const oe=N=>{R(q=>({...q,search:N||void 0,page:1}))},ee=(N,q)=>{R(se=>({...se,[N]:q,page:1}))},K=()=>{ae&&!$&&R(N=>({...N,page:(N.page||1)+1}))},E=N=>{switch(N){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},T=N=>{switch(N){case"published":return"bg-green-100 text-green-800 border-green-200";case"draft":return"bg-gray-100 text-gray-800 border-gray-200";case"archived":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},H=N=>N?"bg-blue-100 text-blue-800 border-blue-200":"bg-yellow-100 text-yellow-800 border-yellow-200",re=N=>new Date(N).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return $&&j.length===0?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fd8412] mx-auto mb-4"}),s.jsx("p",{className:p,children:"Cargando anuncios..."})]})}):D?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ra,{size:48,className:"text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-red-600 mb-4",children:D}),s.jsx(he,{onClick:Y,variant:"outlined",children:"Reintentar"})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:`${u} rounded-lg shadow-sm p-4`,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(Kg,{size:20,className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${g}`}),s.jsx("input",{type:"text",placeholder:"Buscar anuncios...",className:`w-full pl-10 pr-4 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent`,onChange:N=>oe(N.target.value)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(he,{onClick:()=>Q(!F),variant:"outlined",className:"flex items-center gap-2",children:[s.jsx(Pg,{size:16}),"Filtros"]}),c("anuncios","create")&&s.jsxs(he,{onClick:i,className:"flex items-center gap-2",children:[s.jsx($t,{size:16}),"Nuevo Anuncio"]})]})]}),F&&s.jsx("div",{className:"mt-4 pt-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${p} mb-1`,children:"Prioridad"}),s.jsxs("select",{className:`w-full px-3 py-2 ${m} ${v} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent`,onChange:N=>ee("priority",N.target.value||void 0),value:A.priority||"",children:[s.jsx("option",{value:"",children:"Todas"}),s.jsx("option",{value:"low",children:"Baja"}),s.jsx("option",{value:"medium",children:"Media"}),s.jsx("option",{value:"high",children:"Alta"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${p} mb-1`,children:"Estado"}),s.jsxs("select",{className:`w-full px-3 py-2 ${m} ${v} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent`,onChange:N=>ee("status",N.target.value||void 0),value:A.status||"",children:[s.jsx("option",{value:"",children:"Todos"}),s.jsx("option",{value:"draft",children:"Borrador"}),s.jsx("option",{value:"published",children:"Publicado"}),s.jsx("option",{value:"archived",children:"Archivado"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(he,{onClick:()=>R({page:1,limit:10}),variant:"outlined",className:"w-full",children:"Limpiar Filtros"})})]})})]}),s.jsxs("div",{className:`${u} rounded-lg shadow-sm overflow-hidden`,children:[j.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Bp,{size:48,className:`${g} mx-auto mb-4`}),s.jsx("h3",{className:`text-lg font-medium ${f} mb-2`,children:"No hay anuncios"}),s.jsx("p",{className:`${p} mb-4`,children:A.search||A.priority||A.status?"No se encontraron anuncios con los filtros aplicados.":"Aún no hay anuncios publicados."}),c("anuncios","create")&&s.jsx(he,{onClick:i,children:"Crear primer anuncio"})]}):s.jsx("div",{children:j.map(N=>s.jsx("div",{className:`p-6 ${S} transition-colors duration-200`,children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3 mb-2",children:s.jsx("h3",{className:`text-lg font-semibold ${f} truncate`,children:N.title})}),s.jsxs("div",{className:`flex flex-wrap items-center gap-2 text-sm ${p}`,children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Bp,{size:14}),re(N.created_at)]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E(N.priority)}`,children:N.priority==="high"?"Alta":N.priority==="medium"?"Media":"Baja"}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T(N.status)}`,children:N.status==="published"?"Publicado":N.status==="draft"?"Borrador":"Archivado"}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H(N.isRead||!1)}`,children:N.isRead?"Leído":"No leído"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 lg:ml-4",children:[s.jsxs("div",{className:"hidden sm:flex flex-col sm:flex-row gap-2",children:[s.jsxs(he,{onClick:()=>o(N),variant:"outlined",className:"flex items-center gap-1 px-3 py-2 text-sm",children:[s.jsx(ca,{size:14}),"Ver"]}),c("anuncios","edit")&&s.jsxs(he,{onClick:()=>n(N),variant:"outlined",className:"flex items-center gap-1 px-3 py-2 text-sm",children:[s.jsx(cl,{size:14}),"Editar"]}),c("anuncios","delete")&&s.jsxs(he,{onClick:()=>r(N),variant:"outlined",className:"flex items-center gap-1 px-3 py-2 text-sm text-red-600 hover:text-red-700 hover:border-red-300",children:[s.jsx(tt,{size:14}),"Eliminar"]})]}),s.jsxs("div",{className:"flex sm:hidden gap-2",children:[s.jsx(he,{onClick:()=>o(N),variant:"outlined",className:"p-2",children:s.jsx(ca,{size:16})}),c("anuncios","edit")&&s.jsx(he,{onClick:()=>n(N),variant:"outlined",className:"p-2",children:s.jsx(cl,{size:16})}),c("anuncios","delete")&&s.jsx(he,{onClick:()=>r(N),variant:"outlined",className:"p-2 text-red-600 hover:text-red-700 hover:border-red-300",children:s.jsx(tt,{size:16})})]})]})]})},N.id))}),ae&&s.jsx("div",{className:"p-4",children:s.jsx(he,{onClick:K,variant:"outlined",className:"w-full",disabled:$,children:$?"Cargando...":"Cargar más anuncios"})})]}),j.length>0&&s.jsxs("div",{className:`text-center text-sm ${p}`,children:["Mostrando ",j.length," de ",P," anuncios"]})]})},c2=({announcementId:o,isOpen:n,onClose:r,onEdit:i,onDelete:c,onMarkAsRead:u})=>{const{can:f}=Qt(),{modalBg:p,text:g,textSecondary:m,textMuted:x,border:v,bgSurface:y}=we(),{refreshBadge:S}=Ju(),[j,C]=_.useState(null),[$,O]=_.useState(!1),[D,U]=_.useState(null),A=async()=>{if(o)try{O(!0),U(null);const X=await Bs.getAnnouncementById(o);X.success&&X.data?(C(X.data.announcement),await Bs.markAsRead(o),S(),u&&u()):U(X.error||"Error al cargar el anuncio")}catch(X){U("Error inesperado al cargar el anuncio"),console.error("Error loading announcement:",X)}finally{O(!1)}};_.useEffect(()=>{n&&o&&A()},[n,o]),_.useEffect(()=>{n||(C(null),U(null))},[n]);const R=X=>{switch(X){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},P=X=>{switch(X){case"published":return"bg-green-100 text-green-800 border-green-200";case"draft":return"bg-gray-100 text-gray-800 border-gray-200";case"archived":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=X=>new Date(X).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),ae=async X=>{try{await navigator.clipboard.writeText(X)}catch(F){console.error("Error copying to clipboard:",F)}};return n?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:r}),s.jsxs("div",{className:`relative ${p} rounded-2xl shadow-xl w-full max-w-4xl mx-4 transform transition-all max-h-[calc(100vh-2rem)] overflow-hidden`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${v}`,children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("h2",{className:`text-xl font-semibold ${g}`,children:$?"Cargando...":j?.title||"Anuncio"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[j&&f("anuncios","edit")&&s.jsxs(he,{onClick:()=>i(j),variant:"outlined",className:"flex items-center gap-1 px-3 py-2 text-sm",children:[s.jsx(cl,{size:14}),"Editar"]}),j&&f("anuncios","delete")&&s.jsxs(he,{onClick:()=>c(j),variant:"outlined",className:"flex items-center gap-1 px-3 py-2 text-sm text-red-600 hover:text-red-700 hover:border-red-300",children:[s.jsx(tt,{size:14}),"Eliminar"]}),s.jsx("button",{onClick:r,className:`p-2 ${x} hover:${m} transition-colors`,children:s.jsx(Je,{size:20})})]})]}),s.jsx("div",{className:"p-6 overflow-auto max-h-[calc(100vh-140px)]",children:$?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fd8412] mx-auto mb-4"}),s.jsx("p",{className:m,children:"Cargando anuncio..."})]})}):D?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ra,{size:48,className:"text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-red-600 mb-4",children:D}),s.jsx(he,{onClick:A,variant:"outlined",children:"Reintentar"})]})}):j?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:`${y} rounded-lg p-4`,children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${x} mb-1`,children:"Creado"}),s.jsx("p",{className:`${g} font-medium`,children:I(j.created_at)})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${x} mb-1`,children:"Prioridad"}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(j.priority)}`,children:j.priority==="high"?"Alta":j.priority==="medium"?"Media":"Baja"})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm ${x} mb-1`,children:"Estado"}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P(j.status)}`,children:j.status==="published"?"Publicado":j.status==="draft"?"Borrador":"Archivado"})]})]})}),s.jsxs("div",{children:[s.jsx("h3",{className:`text-lg font-semibold ${g} mb-2`,children:"Contenido"}),s.jsx("div",{className:`${y} rounded-lg p-4`,children:s.jsx("div",{className:`${m} prose prose-sm max-w-none`,dangerouslySetInnerHTML:{__html:j.content}})})]}),s.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t ${v}`,children:[s.jsxs("div",{children:[s.jsx("h4",{className:`text-sm font-medium ${g} mb-2`,children:"Información del Anuncio"}),s.jsxs("div",{className:`space-y-1 text-sm ${m}`,children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Creado:"})," ",I(j.created_at)]}),j.updated_at!==j.created_at&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Actualizado:"})," ",I(j.updated_at)]}),j.scheduled_at&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Programado para:"})," ",I(j.scheduled_at)]}),j.published_at&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Publicado:"})," ",I(j.published_at)]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:`text-sm font-medium ${g} mb-2`,children:"Acciones Rápidas"}),s.jsx("div",{className:"space-y-2",children:s.jsxs(he,{onClick:()=>ae(j.title),variant:"outlined",className:"w-full justify-start px-3 py-2 text-sm",children:[s.jsx(Lt,{size:14,className:"mr-2"}),"Copiar título"]})})]})]})]}):null})]})]})}):null},u2=({value:o,onChange:n,placeholder:r="Escribe el contenido del anuncio...",className:i=""})=>{const c=_.useRef(null),u=_.useRef(null),{inputBg:f,inputText:p,inputBorder:g}=we();return _.useEffect(()=>{c.current&&window.Quill&&!u.current&&(u.current=new window.Quill(c.current,{theme:"snow",placeholder:r,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block"],["link"],["clean"]]}}),u.current.on("text-change",()=>{const m=c.current?.querySelector(".ql-editor")?.innerHTML||"";n(m)}),o&&(u.current.root.innerHTML=o))},[]),_.useEffect(()=>{u.current&&o!==u.current.root.innerHTML&&(u.current.root.innerHTML=o)},[o]),s.jsx("div",{className:i,children:s.jsx("div",{ref:c,className:`${f} ${p} border ${g} rounded-lg focus-within:ring-2 focus-within:ring-[#fd8412] focus-within:border-transparent min-h-[200px]`})})},d2=({announcement:o,isOpen:n,onClose:r,onSuccess:i})=>{const{modalBg:c,text:u,textSecondary:f,textMuted:p,border:g,inputBg:m,inputBorder:x,inputText:v,inputPlaceholder:y}=we(),[S,j]=_.useState({title:"",content:"",priority:"medium",status:"draft",target_roles:[]}),[C,$]=_.useState(!1),[O,D]=_.useState(null);_.useEffect(()=>{if(n){if(o){const F={title:o.title,content:o.content,priority:o.priority,status:o.status,target_roles:[]};j(F)}else j({title:"",content:"",priority:"medium",status:"draft",target_roles:[]});D(null)}},[n,o]);const U=(F,Q)=>{j(Y=>({...Y,[F]:Q}))},A=F=>{j(Q=>({...Q,target_roles:Q.target_roles.includes(F)?Q.target_roles.filter(Y=>Y!==F):[...Q.target_roles,F]}))},R=()=>{const F=["admin","admin_comercial","admin_operaciones","broker","broker_externo"],Q=F.every(Y=>S.target_roles.includes(Y));j(Y=>({...Y,target_roles:Q?[]:F}))},P=["admin","admin_comercial","admin_operaciones","broker","broker_externo"],I=P.every(F=>S.target_roles.includes(F)),ae=S.target_roles.length>0&&S.target_roles.length<P.length,X=async F=>{if(F.preventDefault(),!S.title.trim()){D("El título es obligatorio");return}if(!S.content.trim()){D("El contenido es obligatorio");return}if(S.target_roles.length===0){D("Debe seleccionar al menos un rol destinatario");return}try{$(!0),D(null);let Q;if(o){const Y={id:o.id,...S};Q=await Bs.updateAnnouncement(Y)}else Q=await Bs.createAnnouncement(S);Q.success?(i(),r()):D(Q.error||"Error al guardar el anuncio")}catch(Q){D("Error inesperado al guardar el anuncio"),console.error("Error saving announcement:",Q)}finally{$(!1)}};return n?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:r}),s.jsxs("div",{className:`relative ${c} rounded-2xl shadow-xl w-full max-w-4xl mx-4 transform transition-all max-h-[calc(100vh-2rem)] overflow-hidden`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${g}`,children:[s.jsx("h2",{className:`text-xl font-semibold ${u}`,children:o?"Editar Anuncio":"Crear Nuevo Anuncio"}),s.jsx("button",{onClick:r,className:`p-2 ${p} hover:${f} transition-colors`,children:s.jsx(Je,{size:20})})]}),s.jsxs("form",{onSubmit:X,className:"overflow-y-auto max-h-[calc(100vh-140px)]",children:[s.jsxs("div",{className:"p-6 space-y-6",children:[O&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-600 text-sm",children:O})}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Título *"}),s.jsx("input",{type:"text",value:S.title,onChange:F=>U("title",F.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent`,placeholder:"Ingrese el título del anuncio",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Contenido *"}),s.jsx(u2,{value:S.content,onChange:F=>U("content",F),placeholder:"Escribe el contenido del anuncio..."}),s.jsx("p",{className:`text-sm ${p} mt-2`,children:"Usa la barra de herramientas para formatear el contenido con negrita, cursiva, listas, enlaces y más"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Prioridad"}),s.jsxs("select",{value:S.priority,onChange:F=>U("priority",F.target.value),className:`w-full px-3 py-2 ${m} ${v} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent`,children:[s.jsx("option",{value:"low",children:"Baja"}),s.jsx("option",{value:"medium",children:"Media"}),s.jsx("option",{value:"high",children:"Alta"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Estado"}),s.jsxs("select",{value:S.status,onChange:F=>U("status",F.target.value),className:`w-full px-3 py-2 ${m} ${v} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent`,children:[s.jsx("option",{value:"draft",children:"Borrador"}),s.jsx("option",{value:"published",children:"Publicado"}),s.jsx("option",{value:"archived",children:"Archivado"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Programar Publicación (opcional)"}),s.jsx("input",{type:"datetime-local",onChange:F=>U("scheduled_at",F.target.value||void 0),className:`w-full px-3 py-2 ${m} ${v} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-transparent`})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Roles Destinatarios *"}),s.jsx("div",{className:"mb-3 pb-3 border-b border-gray-200",children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:I,ref:F=>{F&&(F.indeterminate=ae)},onChange:R,className:"rounded border-gray-300 text-[#fd8412] focus:ring-[#fd8412]"}),s.jsx("span",{className:`ml-2 text-sm font-medium ${f}`,children:"Seleccionar todos los roles"})]})}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:P.map(F=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:S.target_roles.includes(F),onChange:()=>A(F),className:"rounded border-gray-300 text-[#fd8412] focus:ring-[#fd8412]"}),s.jsx("span",{className:`ml-2 text-sm ${f}`,children:F==="admin"?"Administrador":F==="admin_comercial"?"Admin Comercial":F==="admin_operaciones"?"Admin Operaciones":F==="broker"?"Corredor":F==="broker_externo"?"Corredor Externo":F})]},F))})]})]}),s.jsxs("div",{className:`flex items-center justify-end gap-3 p-6 border-t ${g}`,children:[s.jsx(he,{type:"button",onClick:r,variant:"outlined",children:"Cancelar"}),s.jsx(he,{type:"submit",disabled:C,loading:C,children:o?"Actualizar Anuncio":"Crear Anuncio"})]})]})]})]})}):null},f2=()=>{const o=Bt(),[n]=ay(),{bg:r,text:i,textSecondary:c}=we(),u=Ct("anuncios"),[f,p]=_.useState(!0),[g,m]=_.useState(!1),{isProfileDrawerOpen:x,openProfileDrawer:v,closeProfileDrawer:y,handleOpenChangePasswordModal:S}=Qr(),{refreshBadge:j}=Ju(),[C,$]=_.useState(null),[O,D]=_.useState(!1),[U,A]=_.useState(!1),[R,P]=_.useState(null),[I,ae]=_.useState(null),[X,F]=_.useState(0);_.useEffect(()=>{const N=n.get("id");N&&(async()=>{try{const se=await Bs.getAnnouncementById(N);se.success&&se.data&&($(se.data.announcement),D(!0),o("/anuncios",{replace:!0}))}catch(se){console.error("Error loading announcement from URL:",se)}})()},[n,o]),_.useEffect(()=>{const N=()=>{m(window.innerWidth<=768),window.innerWidth<=768?p(!1):p(!0)};return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);const Q=()=>{o("/login")},Y=()=>{p(!f)},oe=N=>{$(N),D(!0)},ee=N=>{P(N),A(!0)},K=async N=>{if(window.confirm(`¿Está seguro de que desea eliminar el anuncio "${N.title}"?`))try{const q=await Bs.deleteAnnouncement(N.id);q.success?(ae({type:"success",message:"Anuncio eliminado exitosamente"}),O&&C?.id===N.id&&(D(!1),$(null)),F(se=>se+1)):ae({type:"error",message:q.error||"Error al eliminar el anuncio"})}catch{ae({type:"error",message:"Error inesperado al eliminar el anuncio"})}},E=()=>{P(null),A(!0)},T=()=>{ae({type:"success",message:"Anuncio guardado exitosamente"}),A(!1),P(null),F(N=>N+1),j()},H=()=>{D(!1),$(null)},re=()=>{A(!1),P(null)};return _.useEffect(()=>{if(I){const N=setTimeout(()=>{ae(null)},5e3);return()=>clearTimeout(N)}},[I]),s.jsxs("div",{className:`h-screen overflow-hidden ${r}`,children:[s.jsx(Kr,{onLogout:Q,onMenuToggle:Y,showMenuButton:g,showUserIcon:!0,showLogout:!1,onUserIconClick:v}),s.jsxs("div",{className:"flex h-screen pt-16",children:[s.jsx(Ir,{isOpen:f,onClose:()=>p(!1)}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsx("main",{className:"p-6 pt-24",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:`text-2xl font-bold mb-2 ${i}`,children:u.title}),s.jsx("p",{className:c,children:u.description})]})})}),I&&s.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center justify-between ${I.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[I.type==="success"?s.jsx(zg,{size:20,className:"text-green-600"}):s.jsx(fs,{size:20,className:"text-red-600"}),s.jsx("span",{children:I.message})]}),s.jsx(he,{onClick:()=>ae(null),variant:"outlined",className:"flex items-center gap-1 px-2 py-1 text-sm",children:s.jsx(Je,{size:14})})]}),s.jsx(o2,{onAnnouncementSelect:oe,onEditAnnouncement:ee,onDeleteAnnouncement:K,onCreateNew:E},X)]})})})]}),s.jsx(c2,{announcementId:C?.id||null,isOpen:O,onClose:H,onEdit:ee,onDelete:K,onMarkAsRead:()=>F(N=>N+1)}),s.jsx(d2,{announcement:R,isOpen:U,onClose:re,onSuccess:T}),s.jsx(Xr,{isOpen:x,onClose:y,onOpenChangePasswordModal:S})]})},h2=({companies:o,viewMode:n,onCompanyClick:r,onDeleteClick:i,canEdit:c=!1,loading:u=!1,error:f=null})=>{const{bgCard:p,text:g,textSecondary:m,textMuted:x}=we(),v=j=>{const C=[];return j.callCenter.length>0&&C.push(`Call Center: ${j.callCenter.length}`),j.assistance.length>0&&C.push(`Asistencia: ${j.assistance.length}`),j.autoReplacement.length>0&&C.push(`Auto Reemplazo: ${j.autoReplacement.length}`),C.join(", ")||"Sin servicios"},y=j=>j.callCenter.length>0?j.callCenter[0].number:j.assistance.length>0?j.assistance[0].number:j.autoReplacement.length>0?j.autoReplacement[0].number:"Sin números",S=Hr.lazy(()=>qs(()=>import("./CompanyListView-BP2oUViK.js"),[]));return u?s.jsx("div",{className:`${p} rounded-2xl shadow-sm overflow-hidden`,children:s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fd8412] mr-3"}),s.jsx("span",{className:m,children:"Cargando compañías..."})]})}):f?s.jsx("div",{className:`${p} rounded-2xl shadow-sm overflow-hidden`,children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 font-medium",children:f}),s.jsx("p",{className:`${x} text-sm mt-1`,children:"Error al cargar las compañías"})]})})}):o.length===0?s.jsx("div",{className:`${p} rounded-2xl shadow-sm overflow-hidden`,children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:`${m} font-medium`,children:"No hay compañías disponibles"}),s.jsx("p",{className:`${x} text-sm mt-1`,children:"Las compañías aparecerán aquí cuando se agreguen"})]})})}):n==="list"?s.jsx(Hr.Suspense,{fallback:s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fd8412]"})}),children:s.jsx(S,{companies:o,onCompanyClick:r,onDeleteClick:i,canEdit:c})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(j=>s.jsxs("div",{onClick:()=>r(j),className:`${p} rounded-2xl shadow-sm hover:shadow-md transition-all duration-300 p-6 cursor-pointer group`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:`text-lg font-semibold ${g} truncate mb-1`,children:j.name}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.type==="asistencias"?"bg-blue-100 text-blue-800":j.type==="siniestros"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:j.type==="asistencias"?"Asistencias":j.type==="siniestros"?"Siniestros":"Ambos"})})]}),c&&i&&s.jsx("button",{onClick:C=>{C.stopPropagation(),i(j)},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Eliminar compañía",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ta,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:`text-sm ${m} truncate`,children:y(j)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ii,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:`text-sm ${m} truncate`,children:v(j)})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:`text-xs ${x}`,children:[j.callCenter.length+j.assistance.length+j.autoReplacement.length," servicios"]}),s.jsx("span",{className:"text-xs text-[#fd8412] font-medium",children:"Ver detalles →"})]})})]},j.id))})};class qr{static async getAllCompanies(){try{const{data:n,error:r}=await W.from("companies").select("*").order("name");if(r)return{companies:null,error:r.message};if(!n)return{companies:[],error:null};const{data:i,error:c}=await W.from("company_section_comments").select("*");c&&console.error("Error fetching section comments:",c);const{data:u,error:f}=await W.from("company_contacts").select("*").order("is_primary",{ascending:!1}).order("name");return f&&console.error("Error fetching contacts:",f),{companies:n.map(g=>{const m=i?.reduce((v,y)=>(y.company_id===g.id&&(v[y.section_type]=y.comments),v),{})||{},x=(u||[]).filter(v=>v.company_id===g.id).map(v=>({id:v.id,companyId:v.company_id,name:v.name,position:v.position,phone:v.phone,email:v.email,isPrimary:v.is_primary,comments:v.comments,createdAt:v.created_at}));return{id:g.id,name:g.name,type:g.type,callCenter:g.call_center||[],assistance:g.assistance||[],autoReplacement:g.auto_replacement||[],website:g.website||[],websiteAttachments:g.website_attachments||[],contacts:x,sectionComments:m,createdAt:g.created_at,updatedAt:g.updated_at}}),error:null}}catch(n){return console.error("Error in getAllCompanies:",n),{companies:null,error:"Error al cargar las compañías"}}}static async getCompanyById(n){try{const{data:r,error:i}=await W.from("companies").select("*").eq("id",n).single();if(i)return{company:null,error:i.message};if(!r)return{company:null,error:"Compañía no encontrada"};const{data:c}=await W.from("company_section_comments").select("*").eq("company_id",n),{data:u}=await W.from("company_contacts").select("*").eq("company_id",n).order("is_primary",{ascending:!1}).order("name"),f=c?.reduce((m,x)=>(m[x.section_type]=x.comments,m),{})||{},p=(u||[]).map(m=>({id:m.id,companyId:m.company_id,name:m.name,position:m.position,phone:m.phone,email:m.email,isPrimary:m.is_primary,comments:m.comments,createdAt:m.created_at}));return{company:{id:r.id,name:r.name,type:r.type,callCenter:r.call_center||[],assistance:r.assistance||[],autoReplacement:r.auto_replacement||[],website:r.website||[],websiteAttachments:r.website_attachments||[],contacts:p,sectionComments:f,createdAt:r.created_at,updatedAt:r.updated_at},error:null}}catch(r){return console.error("Error in getCompanyById:",r),{company:null,error:"Error al obtener la compañía"}}}static async createCompany(n){try{const{data:r,error:i}=await W.from("companies").insert({name:n.name,type:n.type,call_center:n.callCenter,assistance:n.assistance,auto_replacement:n.autoReplacement,website:n.website}).select().single();if(i)return{company:null,error:i.message};const c=r.id;if(n.sectionComments){const u=Object.entries(n.sectionComments).filter(([f,p])=>p&&p.trim()!=="").map(([f,p])=>({company_id:c,section_type:f,comments:p}));if(u.length>0){const{error:f}=await W.from("company_section_comments").insert(u);f&&console.error("Error inserting section comments:",f)}}if(n.contacts&&n.contacts.length>0){const u=n.contacts.filter(f=>f.name&&f.name.trim()!=="");if(u.length>0){const f=u.map(g=>({company_id:c,name:g.name.trim(),position:g.position||null,phone:g.phone||null,email:g.email||null,is_primary:g.isPrimary||!1,comments:g.comments||null})),{error:p}=await W.from("company_contacts").insert(f);p&&console.error("Error inserting contacts:",p)}}return await this.getCompanyById(c)}catch(r){return console.error("Error in createCompany:",r),{company:null,error:"Error al crear la compañía"}}}static async updateCompany(n,r){try{const i={};if(r.name!==void 0&&(i.name=r.name),r.type!==void 0&&(i.type=r.type),r.callCenter!==void 0&&(i.call_center=r.callCenter),r.assistance!==void 0&&(i.assistance=r.assistance),r.autoReplacement!==void 0&&(i.auto_replacement=r.autoReplacement),r.website!==void 0&&(i.website=r.website),Object.keys(i).length>0){const{error:c}=await W.from("companies").update(i).eq("id",n);if(c)return{company:null,error:c.message}}if(r.sectionComments){await W.from("company_section_comments").delete().eq("company_id",n);const c=Object.entries(r.sectionComments).filter(([u,f])=>f&&f.trim()!=="").map(([u,f])=>({company_id:n,section_type:u,comments:f}));if(c.length>0){const{error:u}=await W.from("company_section_comments").insert(c);u&&console.error("Error updating section comments:",u)}}if(r.contacts!==void 0&&(await W.from("company_contacts").delete().eq("company_id",n),r.contacts.length>0)){const c=r.contacts.filter(u=>u.name&&u.name.trim()!=="");if(c.length>0){const u=c.map(p=>({company_id:n,name:p.name.trim(),position:p.position||null,phone:p.phone||null,email:p.email||null,is_primary:p.isPrimary||!1,comments:p.comments||null})),{error:f}=await W.from("company_contacts").insert(u);f&&console.error("Error updating contacts:",f)}}return await this.getCompanyById(n)}catch(i){return console.error("Error in updateCompany:",i),{company:null,error:"Error al actualizar la compañía"}}}static async deleteCompany(n){try{const{error:r}=await W.from("companies").delete().eq("id",n);return r?{error:r.message}:{error:null}}catch(r){return console.error("Error in deleteCompany:",r),{error:"Error al eliminar la compañía"}}}static async updateWebsiteAttachments(n,r){try{const{error:i}=await W.from("companies").update({website_attachments:r}).eq("id",n);return i?{error:i.message}:{error:null}}catch(i){return console.error("Error in updateWebsiteAttachments:",i),{error:"Error al actualizar archivos adjuntos"}}}}const m2=({companyId:o,attachmentIds:n,onAttachmentsChange:r})=>{const{bgCard:i,text:c,textSecondary:u,textMuted:f,border:p,bgSurface:g}=we(),{isBroker:m}=Qt(),[x,v]=_.useState([]),[y,S]=_.useState(!1),[j,C]=_.useState(!1);_.useEffect(()=>{(async()=>{if(n.length===0){v([]);return}S(!0);try{const{data:P,error:I}=await bt.getFilesByIds(n);I?(console.error("Error cargando archivos adjuntos:",I),v([])):v(P||[])}catch(P){console.error("Error cargando archivos adjuntos:",P),v([])}finally{S(!1)}})()},[n,o]);const $=async R=>{const P=R.target.files?.[0];if(P){if(P.type!=="application/pdf"){alert("Solo se permiten archivos PDF");return}if(P.size>10*1024*1024){alert("El archivo no puede ser mayor a 10MB");return}C(!0);try{const ae=`${Date.now()}_${P.name}`,{data:X,error:F}=await bt.uploadFile(ae,P,P.type,P.size,`/companies/${o}/attachments`);if(F)throw new Error(F);if(X){const Q=[...n,X.id],{error:Y}=await qr.updateWebsiteAttachments(o,Q);if(Y){await bt.deleteItem(X.id),alert("Error al guardar el archivo");return}r(Q)}R.target.value=""}catch(I){console.error("Error subiendo archivo:",I),alert("Error al subir el archivo")}finally{C(!1)}}},O=async R=>{try{const P=n.filter(ae=>ae!==R),{error:I}=await qr.updateWebsiteAttachments(o,P);if(I){alert("Error al eliminar el archivo");return}r(P)}catch(P){console.error("Error eliminando archivo:",P),alert("Error al eliminar el archivo")}},D=async R=>{try{const{data:P,error:I}=await bt.getFileDownloadUrl(R.id);if(I){alert("Error al obtener URL de descarga");return}if(P){const ae=document.createElement("a");ae.href=P,ae.download=R.name,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)}}catch(P){console.error("Error descargando archivo:",P),alert("Error al descargar el archivo")}},U=async R=>{try{const{data:P,error:I}=await bt.getFileDownloadUrl(R.id);if(I){alert("Error al obtener URL de vista previa");return}P&&window.open(P,"_blank")}catch(P){console.error("Error en vista previa:",P),alert("Error al abrir vista previa")}},A=R=>{if(R===0)return"0 B";const P=1024,I=["B","KB","MB","GB"],ae=Math.floor(Math.log(R)/Math.log(P));return parseFloat((R/Math.pow(P,ae)).toFixed(2))+" "+I[ae]};return s.jsxs("div",{className:`${g} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ua,{className:`w-6 h-6 ${u} mr-3`}),s.jsx("h3",{className:`text-xl font-semibold ${c}`,children:"Instructivos"})]}),s.jsxs("span",{className:`text-sm ${f}`,children:[x.length," archivo",x.length!==1?"s":""]})]}),!m()&&s.jsx("div",{className:"mb-4",children:s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("input",{type:"file",accept:".pdf",onChange:$,className:"hidden",disabled:j}),s.jsxs("div",{className:`
              flex items-center justify-center p-4 border-2 border-dashed rounded-lg
              ${p} ${f} hover:${c} hover:border-blue-500 transition-colors
              ${j?"opacity-50 cursor-not-allowed":"cursor-pointer"}
            `,children:[s.jsx(ul,{className:"w-5 h-5 mr-2"}),s.jsx("span",{children:j?"Subiendo...":"Agregar Instructivo (PDF)"})]})]})}),y?s.jsxs("div",{className:`text-center py-8 ${f}`,children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),s.jsx("p",{className:"mt-2",children:"Cargando archivos..."})]}):x.length>0?s.jsx("div",{className:"space-y-3",children:x.map(R=>s.jsx("div",{className:`${i} rounded-lg p-4 border ${p}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[s.jsx(Ua,{className:"w-5 h-5 text-red-500 mr-3 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`font-medium ${c} truncate`,children:R.name}),s.jsx("p",{className:`text-sm ${f}`,children:A(R.size)})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>U(R),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Vista previa",children:s.jsx(ca,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>D(R),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Descargar",children:s.jsx(ol,{className:"w-4 h-4"})}),!m()&&s.jsx("button",{onClick:()=>O(R.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar",children:s.jsx(tt,{className:"w-4 h-4"})})]})]})},R.id))}):s.jsxs("div",{className:`text-center py-8 ${f}`,children:[s.jsx(Ua,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No hay instructivos disponibles"}),!m()&&s.jsx("p",{className:"text-sm mt-1",children:'Haz clic en "Agregar Instructivo" para subir archivos PDF'})]})]})},p2=({isOpen:o,onClose:n,company:r,canEdit:i=!1,onEdit:c,onDelete:u})=>{const{modalBg:f,text:p,textSecondary:g,textMuted:m,border:x,bgSurface:v,bgCard:y}=we(),{isBroker:S}=Qt(),[j,C]=_.useState(r.websiteAttachments||[]);_.useEffect(()=>{C(r.websiteAttachments||[])},[r.websiteAttachments]);const $=async(A,R)=>{try{await navigator.clipboard.writeText(A),console.log(`${R} copiado al portapapeles`)}catch(P){console.error("Error al copiar al portapapeles:",P)}},O=A=>{window.open(A,"_blank","noopener,noreferrer")},D=A=>{window.open(`mailto:${A}`,"_blank")},U=A=>{window.open(`tel:${A}`,"_blank")};return o?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n}),s.jsxs("div",{className:`relative ${f} rounded-2xl shadow-xl w-full max-w-4xl mx-4 transform transition-all max-h-[calc(100vh-2rem)] overflow-hidden modal-content`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${x}`,children:[s.jsx("div",{children:s.jsx("h2",{className:`text-2xl font-bold ${p}`,children:r.name})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[i&&c&&s.jsx("button",{onClick:c,className:"px-4 py-2 text-[#fd8412] border border-[#fd8412] rounded-lg hover:bg-[#fd8412] hover:text-white transition-colors",children:"Editar"}),i&&u&&s.jsx("button",{onClick:u,className:"px-4 py-2 text-red-600 border border-red-600 rounded-lg hover:bg-red-600 hover:text-white transition-colors",children:"Eliminar"}),s.jsx("button",{onClick:n,className:`p-2 ${m} hover:${g} transition-colors`,title:"Cerrar",children:s.jsx(Je,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(100vh-200px)]",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:`${v} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ta,{className:`w-6 h-6 ${g} mr-3`}),s.jsx("h3",{className:`text-xl font-semibold ${p}`,children:"Call Center"})]}),s.jsxs("span",{className:`text-sm ${m}`,children:[r.callCenter.length," número",r.callCenter.length!==1?"s":""]})]}),r.callCenter.length>0?s.jsx("div",{className:"space-y-4",children:r.callCenter.map((A,R)=>s.jsxs("div",{className:`${y} rounded-lg p-4 border ${x}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ta,{className:"w-4 h-4 text-gray-500 mr-2"}),s.jsx("span",{className:`font-medium ${p}`,children:A.number})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>U(A.number),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Llamar",children:s.jsx(ta,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>$(A.number,"número"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Copiar número",children:s.jsx(Lt,{className:"w-4 h-4"})})]})]}),A.description&&s.jsx("p",{className:`text-sm ${g} mb-2`,children:A.description}),A.instructions&&s.jsxs("p",{className:`text-sm ${m}`,children:[s.jsx("strong",{children:"Instrucciones:"})," ",A.instructions]})]},R))}):s.jsxs("div",{className:`text-center py-8 ${m}`,children:[s.jsx(ta,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No hay números de call center registrados"})]}),r.sectionComments?.callCenter&&s.jsx("div",{className:`mt-4 p-3 ${y} rounded-lg border ${x}`,children:s.jsxs("p",{className:`text-sm ${g}`,children:[s.jsx("strong",{children:"Comentarios:"})," ",r.sectionComments.callCenter]})})]}),s.jsxs("div",{className:`${v} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gi,{className:`w-6 h-6 ${g} mr-3`}),s.jsx("h3",{className:`text-xl font-semibold ${p}`,children:"Asistencia"})]}),s.jsxs("span",{className:`text-sm ${m}`,children:[r.assistance.length," número",r.assistance.length!==1?"s":""]})]}),r.assistance.length>0?s.jsx("div",{className:"space-y-4",children:r.assistance.map((A,R)=>s.jsxs("div",{className:`${y} rounded-lg p-4 border ${x}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ta,{className:"w-4 h-4 text-gray-500 mr-2"}),s.jsx("span",{className:`font-medium ${p}`,children:A.number})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>U(A.number),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Llamar",children:s.jsx(ta,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>$(A.number,"número"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Copiar número",children:s.jsx(Lt,{className:"w-4 h-4"})})]})]}),A.description&&s.jsx("p",{className:`text-sm ${g} mb-2`,children:A.description}),A.instructions&&s.jsxs("p",{className:`text-sm ${m}`,children:[s.jsx("strong",{children:"Instrucciones:"})," ",A.instructions]})]},R))}):s.jsxs("div",{className:`text-center py-8 ${m}`,children:[s.jsx(Gi,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No hay números de asistencia registrados"})]}),r.sectionComments?.assistance&&s.jsx("div",{className:`mt-4 p-3 ${y} rounded-lg border ${x}`,children:s.jsxs("p",{className:`text-sm ${g}`,children:[s.jsx("strong",{children:"Comentarios:"})," ",r.sectionComments.assistance]})})]}),s.jsxs("div",{className:`${v} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(fs,{className:`w-6 h-6 ${g} mr-3`}),s.jsx("h3",{className:`text-xl font-semibold ${p}`,children:"Auto Reemplazo"})]}),s.jsxs("span",{className:`text-sm ${m}`,children:[r.autoReplacement.length," número",r.autoReplacement.length!==1?"s":""]})]}),r.autoReplacement.length>0?s.jsx("div",{className:"space-y-4",children:r.autoReplacement.map((A,R)=>s.jsxs("div",{className:`${y} rounded-lg p-4 border ${x}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ta,{className:"w-4 h-4 text-gray-500 mr-2"}),s.jsx("span",{className:`font-medium ${p}`,children:A.number})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>U(A.number),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Llamar",children:s.jsx(ta,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>$(A.number,"número"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Copiar número",children:s.jsx(Lt,{className:"w-4 h-4"})})]})]}),A.description&&s.jsx("p",{className:`text-sm ${g} mb-2`,children:A.description}),A.instructions&&s.jsxs("p",{className:`text-sm ${m}`,children:[s.jsx("strong",{children:"Instrucciones:"})," ",A.instructions]})]},R))}):s.jsxs("div",{className:`text-center py-8 ${m}`,children:[s.jsx(fs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No hay números de auto reemplazo registrados"})]}),r.sectionComments?.autoReplacement&&s.jsx("div",{className:`mt-4 p-3 ${y} rounded-lg border ${x}`,children:s.jsxs("p",{className:`text-sm ${g}`,children:[s.jsx("strong",{children:"Comentarios:"})," ",r.sectionComments.autoReplacement]})})]}),r.website.length>0&&s.jsxs("div",{className:`${v} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(V1,{className:`w-6 h-6 ${g} mr-3`}),s.jsx("h3",{className:`text-xl font-semibold ${p}`,children:"Sitios Web"})]}),s.jsxs("span",{className:`text-sm ${m}`,children:[r.website.length," sitio",r.website.length!==1?"s":""]})]}),s.jsx("div",{className:"space-y-3",children:r.website.map((A,R)=>s.jsx("div",{className:`${y} rounded-lg p-4 border ${x}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`font-medium ${p} break-all`,children:A}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>O(A),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Abrir sitio web",children:s.jsx(Ls,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>$(A,"URL"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Copiar URL",children:s.jsx(Lt,{className:"w-4 h-4"})})]})]})},R))}),r.sectionComments?.website&&s.jsx("div",{className:`mt-4 p-3 ${y} rounded-lg border ${x}`,children:s.jsxs("p",{className:`text-sm ${g}`,children:[s.jsx("strong",{children:"Comentarios:"})," ",r.sectionComments.website]})})]}),s.jsx(m2,{companyId:r.id,attachmentIds:j,onAttachmentsChange:C}),r.contacts.length>0&&!S()&&s.jsxs("div",{className:`${v} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ii,{className:`w-6 h-6 ${g} mr-3`}),s.jsx("h3",{className:`text-xl font-semibold ${p}`,children:"Contactos Adicionales"})]}),s.jsxs("span",{className:`text-sm ${m}`,children:[r.contacts.length," contacto",r.contacts.length!==1?"s":""]})]}),s.jsx("div",{className:"space-y-4",children:r.contacts.map((A,R)=>s.jsxs("div",{className:`${y} rounded-lg p-4 border ${x}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:`font-medium ${p}`,children:A.name}),s.jsx("p",{className:`text-sm ${g}`,children:A.position})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[A.phone&&s.jsx("button",{onClick:()=>U(A.phone),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Llamar",children:s.jsx(ta,{className:"w-4 h-4"})}),A.email&&s.jsx("button",{onClick:()=>D(A.email),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Enviar email",children:s.jsx(qp,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[A.phone&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(ta,{className:"w-4 h-4 text-gray-500 mr-2"}),s.jsx("span",{className:`text-sm ${g}`,children:A.phone})]}),A.email&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(qp,{className:"w-4 h-4 text-gray-500 mr-2"}),s.jsx("span",{className:`text-sm ${g}`,children:A.email})]})]}),A.comments&&s.jsxs("p",{className:`text-sm ${m} mt-2`,children:[s.jsx("strong",{children:"Comentarios:"})," ",A.comments]})]},R))})]})]})})]})]})}):null},g2=({isOpen:o,onClose:n,onSave:r,isLoading:i=!1})=>{const{modalBg:c,text:u,textSecondary:f,textMuted:p,border:g,inputBg:m,inputBorder:x,inputText:v,inputPlaceholder:y,bgSurface:S}=we(),[j,C]=_.useState({name:"",type:"asistencias",callCenter:[],assistance:[],autoReplacement:[],website:[],contacts:[],sectionComments:{callCenter:"",assistance:"",autoReplacement:"",website:""}}),[$,O]=_.useState({}),D=(K,E)=>{C(T=>({...T,[K]:E})),$[K]&&O(T=>({...T,[K]:""}))},U=(K,E,T,H)=>{C(re=>({...re,[K]:re[K].map((N,q)=>q===E?{...N,[T]:H}:N)}))},A=K=>{C(E=>({...E,[K]:[...E[K],{number:"",instructions:"",description:""}]}))},R=(K,E)=>{C(T=>({...T,[K]:T[K].filter((H,re)=>re!==E)}))},P=(K,E,T)=>{C(H=>({...H,[K]:H[K].map((re,N)=>N===E?T:re)}))},I=K=>{C(E=>({...E,[K]:[...E[K],""]}))},ae=(K,E)=>{C(T=>({...T,[K]:T[K].filter((H,re)=>re!==E)}))},X=(K,E,T)=>{C(H=>({...H,contacts:H.contacts.map((re,N)=>N===K?{...re,[E]:T}:re)}))},F=()=>{C(K=>({...K,contacts:[...K.contacts,{name:"",position:"",phone:"",email:"",isPrimary:!1,comments:""}]}))},Q=K=>{C(E=>({...E,contacts:E.contacts.filter((T,H)=>H!==K)}))},Y=(K,E)=>{C(T=>({...T,sectionComments:{...T.sectionComments,[K]:E}}))},oe=()=>{const K={};return j.name.trim()||(K.name="El nombre de la compañía es requerido"),O(K),Object.keys(K).length===0},ee=async K=>{if(K.preventDefault(),!!oe())try{await r(j),n(),C({name:"",type:"asistencias",callCenter:[],assistance:[],autoReplacement:[],website:[],contacts:[],sectionComments:{callCenter:"",assistance:"",autoReplacement:"",website:""}}),O({})}catch(E){console.error("Error saving company:",E)}};return o?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n}),s.jsxs("div",{className:`relative ${c} rounded-2xl shadow-xl w-full max-w-4xl mx-4 transform transition-all max-h-[calc(100vh-2rem)] overflow-hidden`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${g}`,children:[s.jsx("h2",{className:`text-2xl font-bold ${u}`,children:"Agregar Nueva Compañía"}),s.jsx("button",{onClick:n,className:`p-2 ${p} hover:${f} transition-colors`,children:s.jsx(Je,{size:20})})]}),s.jsxs("form",{onSubmit:ee,className:"p-6 overflow-y-auto max-h-[calc(100vh-200px)]",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:`${S} rounded-xl p-6`,children:[s.jsx("h3",{className:`text-lg font-semibold ${u} mb-4`,children:"Información Básica"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Nombre de la Compañía *"}),s.jsx("input",{type:"text",value:j.name,onChange:K=>D("name",K.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] ${$.name?"border-red-500":x}`,placeholder:"Ej: BCI Seguros"}),$.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:$.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Tipo de Servicio"}),s.jsxs("select",{value:j.type,onChange:K=>D("type",K.target.value),className:`w-full px-3 py-2 ${m} ${v} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,children:[s.jsx("option",{value:"asistencias",children:"Asistencias"}),s.jsx("option",{value:"siniestros",children:"Siniestros"}),s.jsx("option",{value:"ambos",children:"Ambos"})]})]})]})]}),s.jsxs("div",{className:`${S} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${u}`,children:"Call Center"}),s.jsxs("button",{type:"button",onClick:()=>A("callCenter"),className:"flex items-center px-3 py-1 text-sm bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors",children:[s.jsx($t,{className:"w-4 h-4 mr-1"}),"Agregar Contacto"]})]}),j.callCenter.map((K,E)=>s.jsxs("div",{className:`border ${g} rounded-lg p-4 mb-4`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:`font-medium ${u}`,children:["Contacto ",E+1]}),s.jsx("button",{type:"button",onClick:()=>R("callCenter",E),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Número *"}),s.jsx("input",{type:"text",value:K.number,onChange:T=>U("callCenter",E,"number",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: 600 6000 292"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Instrucciones *"}),s.jsx("input",{type:"text",value:K.instructions,onChange:T=>U("callCenter",E,"instructions",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: op2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Descripción"}),s.jsx("input",{type:"text",value:K.description,onChange:T=>U("callCenter",E,"description",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: desde cel"})]})]})]},E)),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Comentarios de Sección (opcional)"}),s.jsx("textarea",{value:j.sectionComments?.callCenter||"",onChange:K=>Y("callCenter",K.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,rows:3,placeholder:"Ej: Horario de atención 24/7, llamar primero al número principal"})]})]}),s.jsxs("div",{className:`${S} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${u}`,children:"Servicios de Asistencia"}),s.jsxs("button",{type:"button",onClick:()=>A("assistance"),className:"flex items-center px-3 py-1 text-sm bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors",children:[s.jsx($t,{className:"w-4 h-4 mr-1"}),"Agregar Contacto"]})]}),j.assistance.map((K,E)=>s.jsxs("div",{className:`border ${g} rounded-lg p-4 mb-4`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:`font-medium ${u}`,children:["Contacto ",E+1]}),s.jsx("button",{type:"button",onClick:()=>R("assistance",E),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Número *"}),s.jsx("input",{type:"text",value:K.number,onChange:T=>U("assistance",E,"number",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: 600 600 9090"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Instrucciones *"}),s.jsx("input",{type:"text",value:K.instructions,onChange:T=>U("assistance",E,"instructions",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Op. 4, Luego Op.2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Descripción"}),s.jsx("input",{type:"text",value:K.description,onChange:T=>U("assistance",E,"description",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Asistencia livianos"})]})]})]},E)),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Comentarios de Sección (opcional)"}),s.jsx("textarea",{value:j.sectionComments?.assistance||"",onChange:K=>Y("assistance",K.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,rows:3,placeholder:"Ej: Servicios disponibles solo en RM, cobertura nacional"})]})]}),s.jsxs("div",{className:`${S} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${u}`,children:"Opciones de Auto Reemplazo"}),s.jsxs("button",{type:"button",onClick:()=>A("autoReplacement"),className:"flex items-center px-3 py-1 text-sm bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors",children:[s.jsx($t,{className:"w-4 h-4 mr-1"}),"Agregar Contacto"]})]}),j.autoReplacement.map((K,E)=>s.jsxs("div",{className:`border ${g} rounded-lg p-4 mb-4`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:`font-medium ${u}`,children:["Contacto ",E+1]}),s.jsx("button",{type:"button",onClick:()=>R("autoReplacement",E),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Número *"}),s.jsx("input",{type:"text",value:K.number,onChange:T=>U("autoReplacement",E,"number",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: 600 399 1000"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Instrucciones *"}),s.jsx("input",{type:"text",value:K.instructions,onChange:T=>U("autoReplacement",E,"instructions",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Opción 3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Descripción"}),s.jsx("input",{type:"text",value:K.description,onChange:T=>U("autoReplacement",E,"description",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Vehículo ejecutivo"})]})]})]},E)),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Comentarios de Sección (opcional)"}),s.jsx("textarea",{value:j.sectionComments?.autoReplacement||"",onChange:K=>Y("autoReplacement",K.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,rows:3,placeholder:"Ej: Vehículo solo horario comercial, máximo 5 días"})]})]}),s.jsxs("div",{className:`${S} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${u}`,children:"Sitios Web"}),s.jsxs("button",{type:"button",onClick:()=>I("website"),className:"flex items-center px-3 py-1 text-sm bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors",children:[s.jsx($t,{className:"w-4 h-4 mr-1"}),"Agregar"]})]}),j.website.map((K,E)=>s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("input",{type:"url",value:K,onChange:T=>P("website",E,T.target.value),className:`flex-1 px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: https://www.ejemplo.cl"}),s.jsx("button",{type:"button",onClick:()=>ae("website",E),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]},E)),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Comentarios (opcional)"}),s.jsx("textarea",{value:j.sectionComments?.website||"",onChange:K=>Y("website",K.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,rows:3,placeholder:"Ej: Portal principal, requiere registro previo"})]})]}),s.jsxs("div",{className:`${S} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${u}`,children:"Contactos de la Compañía"}),s.jsxs("button",{type:"button",onClick:F,className:"flex items-center px-3 py-1 text-sm bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors",children:[s.jsx($t,{className:"w-4 h-4 mr-1"}),"Agregar Contacto"]})]}),j.contacts.map((K,E)=>s.jsxs("div",{className:`border ${g} rounded-lg p-4 mb-4`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:`font-medium ${u}`,children:["Contacto ",E+1]}),s.jsx("button",{type:"button",onClick:()=>Q(E),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Nombre"}),s.jsx("input",{type:"text",value:K.name,onChange:T=>X(E,"name",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: María González"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Cargo"}),s.jsx("input",{type:"text",value:K.position,onChange:T=>X(E,"position",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Ejecutiva de Atención"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Teléfono"}),s.jsx("input",{type:"tel",value:K.phone,onChange:T=>X(E,"phone",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: +56 9 8765 4321"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Email"}),s.jsx("input",{type:"email",value:K.email,onChange:T=>X(E,"email",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: maria@ejemplo.cl"})]})]}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`primary_${E}`,checked:K.isPrimary,onChange:T=>X(E,"isPrimary",T.target.checked),className:"w-4 h-4 text-[#fd8412] border-gray-300 rounded focus:ring-[#fd8412]"}),s.jsx("label",{htmlFor:`primary_${E}`,className:`ml-2 text-sm ${f}`,children:"Contacto Principal"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Comentarios (opcional)"}),s.jsx("textarea",{value:K.comments,onChange:T=>X(E,"comments",T.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,rows:2,placeholder:"Ej: Contacto principal para emergencias"})]})]})]},E))]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6",children:[s.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Guardando..."]}):"Crear Compañía"})]})]})]})]})}):null},x2=({isOpen:o,onClose:n,onSave:r,company:i,isLoading:c=!1})=>{const[u,f]=_.useState({name:"",type:"asistencias",callCenter:[],assistance:[],autoReplacement:[],website:[],contacts:[],sectionComments:{callCenter:"",assistance:"",autoReplacement:"",website:""}}),[p,g]=_.useState({}),{modalBg:m,text:x,textSecondary:v,textMuted:y,border:S,bgSurface:j,inputBg:C,inputText:$,inputPlaceholder:O,inputBorder:D}=we();_.useEffect(()=>{i&&o&&(f({name:i.name,type:i.type,callCenter:i.callCenter||[],assistance:i.assistance||[],autoReplacement:i.autoReplacement||[],website:i.website||[],contacts:i.contacts||[],sectionComments:i.sectionComments||{callCenter:"",assistance:"",autoReplacement:"",website:""}}),g({}))},[i,o]);const U=(E,T)=>{f(H=>({...H,[E]:T})),p[E]&&g(H=>({...H,[E]:""}))},A=(E,T,H,re)=>{f(N=>({...N,[E]:N[E].map((q,se)=>se===T?{...q,[H]:re}:q)}))},R=E=>{f(T=>({...T,[E]:[...T[E],{number:"",instructions:"",description:""}]}))},P=(E,T)=>{f(H=>({...H,[E]:H[E].filter((re,N)=>N!==T)}))},I=(E,T,H)=>{f(re=>({...re,[E]:re[E].map((N,q)=>q===T?H:N)}))},ae=E=>{f(T=>({...T,[E]:[...T[E],""]}))},X=(E,T)=>{f(H=>({...H,[E]:H[E].filter((re,N)=>N!==T)}))},F=(E,T,H)=>{f(re=>({...re,contacts:(re.contacts||[]).map((N,q)=>q===E?{...N,[T]:H}:N)}))},Q=()=>{f(E=>({...E,contacts:[...E.contacts||[],{id:"",companyId:"",name:"",position:"",phone:"",email:"",isPrimary:!1,comments:"",createdAt:new Date().toISOString()}]}))},Y=E=>{f(T=>({...T,contacts:(T.contacts||[]).filter((H,re)=>re!==E)}))},oe=(E,T)=>{f(H=>({...H,sectionComments:{...H.sectionComments,[E]:T}}))},ee=()=>{const E={};return u.name?.trim()||(E.name="El nombre de la compañía es requerido"),g(E),Object.keys(E).length===0},K=async E=>{if(E.preventDefault(),!(!ee()||!i))try{await r(i.id,u),n()}catch(T){console.error("Error updating company:",T)}};return!o||!i?null:s.jsx(s.Fragment,{children:s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n}),s.jsxs("div",{className:`relative ${m} rounded-2xl shadow-xl w-full max-w-4xl mx-4 transform transition-all max-h-[calc(100vh-2rem)] overflow-hidden`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${S}`,children:[s.jsxs("h2",{className:`text-2xl font-bold ${x}`,children:["Editar Compañía: ",i.name]}),s.jsx("button",{onClick:n,className:`p-2 ${y} hover:${v} transition-colors`,title:"Cerrar",children:s.jsx(Je,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:K,className:"p-6 overflow-y-auto max-h-[calc(100vh-200px)]",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:`${j} rounded-xl p-6`,children:[s.jsx("h3",{className:`text-lg font-semibold ${x} mb-4`,children:"Información Básica"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Nombre de la Compañía *"}),s.jsx("input",{type:"text",value:u.name,onChange:E=>U("name",E.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412] ${p.name?"border-red-500":D}`,placeholder:"Ej: BCI Seguros"}),p.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Tipo de Servicio"}),s.jsxs("select",{value:u.type,onChange:E=>U("type",E.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,children:[s.jsx("option",{value:"asistencias",children:"Asistencias"}),s.jsx("option",{value:"siniestros",children:"Siniestros"}),s.jsx("option",{value:"ambos",children:"Ambos"})]})]})]})]}),s.jsxs("div",{className:`${j} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${x}`,children:"Call Center"}),s.jsxs("button",{type:"button",onClick:()=>R("callCenter"),className:"flex items-center px-3 py-1 text-sm bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors",children:[s.jsx($t,{className:"w-4 h-4 mr-1"}),"Agregar Contacto"]})]}),(u.callCenter||[]).map((E,T)=>s.jsxs("div",{className:`border ${S} rounded-lg p-4 mb-4`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:`font-medium ${x}`,children:["Contacto ",T+1]}),s.jsx("button",{type:"button",onClick:()=>P("callCenter",T),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Número *"}),s.jsx("input",{type:"text",value:E.number,onChange:H=>A("callCenter",T,"number",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: 600 6000 292"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Instrucciones *"}),s.jsx("input",{type:"text",value:E.instructions,onChange:H=>A("callCenter",T,"instructions",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: op2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Descripción"}),s.jsx("input",{type:"text",value:E.description,onChange:H=>A("callCenter",T,"description",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: desde cel"})]})]})]},T)),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Comentarios de Sección (opcional)"}),s.jsx("textarea",{value:u.sectionComments?.callCenter||"",onChange:E=>oe("callCenter",E.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,rows:3,placeholder:"Ej: Horario de atención 24/7, llamar primero al número principal"})]})]}),s.jsxs("div",{className:`${j} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${x}`,children:"Servicios de Asistencia"}),s.jsxs("button",{type:"button",onClick:()=>R("assistance"),className:"flex items-center px-3 py-1 text-sm bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors",children:[s.jsx($t,{className:"w-4 h-4 mr-1"}),"Agregar Contacto"]})]}),(u.assistance||[]).map((E,T)=>s.jsxs("div",{className:`border ${S} rounded-lg p-4 mb-4`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:`font-medium ${x}`,children:["Contacto ",T+1]}),s.jsx("button",{type:"button",onClick:()=>P("assistance",T),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Número *"}),s.jsx("input",{type:"text",value:E.number,onChange:H=>A("assistance",T,"number",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: 600 600 9090"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Instrucciones *"}),s.jsx("input",{type:"text",value:E.instructions,onChange:H=>A("assistance",T,"instructions",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Op. 4, Luego Op.2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Descripción"}),s.jsx("input",{type:"text",value:E.description,onChange:H=>A("assistance",T,"description",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Asistencia livianos"})]})]})]},T)),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Comentarios de Sección (opcional)"}),s.jsx("textarea",{value:u.sectionComments?.assistance||"",onChange:E=>oe("assistance",E.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,rows:3,placeholder:"Ej: Servicios disponibles solo en RM, cobertura nacional"})]})]}),s.jsxs("div",{className:`${j} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${x}`,children:"Opciones de Auto Reemplazo"}),s.jsxs("button",{type:"button",onClick:()=>R("autoReplacement"),className:"flex items-center px-3 py-1 text-sm bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors",children:[s.jsx($t,{className:"w-4 h-4 mr-1"}),"Agregar Contacto"]})]}),(u.autoReplacement||[]).map((E,T)=>s.jsxs("div",{className:`border ${S} rounded-lg p-4 mb-4`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:`font-medium ${x}`,children:["Contacto ",T+1]}),s.jsx("button",{type:"button",onClick:()=>P("autoReplacement",T),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Número *"}),s.jsx("input",{type:"text",value:E.number,onChange:H=>A("autoReplacement",T,"number",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: 600 399 1000"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Instrucciones *"}),s.jsx("input",{type:"text",value:E.instructions,onChange:H=>A("autoReplacement",T,"instructions",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Opción 3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Descripción"}),s.jsx("input",{type:"text",value:E.description,onChange:H=>A("autoReplacement",T,"description",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Vehículo ejecutivo"})]})]})]},T)),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Comentarios de Sección (opcional)"}),s.jsx("textarea",{value:u.sectionComments?.autoReplacement||"",onChange:E=>oe("autoReplacement",E.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,rows:3,placeholder:"Ej: Vehículo solo horario comercial, máximo 5 días"})]})]}),s.jsxs("div",{className:`${j} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${x}`,children:"Sitios Web"}),s.jsxs("button",{type:"button",onClick:()=>ae("website"),className:"flex items-center px-3 py-1 text-sm bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors",children:[s.jsx($t,{className:"w-4 h-4 mr-1"}),"Agregar"]})]}),(u.website||[]).map((E,T)=>s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("input",{type:"url",value:E,onChange:H=>I("website",T,H.target.value),className:`flex-1 px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: https://www.ejemplo.cl"}),s.jsx("button",{type:"button",onClick:()=>X("website",T),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]},T)),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Comentarios (opcional)"}),s.jsx("textarea",{value:u.sectionComments?.website||"",onChange:E=>oe("website",E.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,rows:3,placeholder:"Ej: Portal principal, requiere registro previo"})]})]}),s.jsxs("div",{className:`${j} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${x}`,children:"Contactos de la Compañía"}),s.jsxs("button",{type:"button",onClick:Q,className:"flex items-center px-3 py-1 text-sm bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors",children:[s.jsx($t,{className:"w-4 h-4 mr-1"}),"Agregar Contacto"]})]}),(u.contacts||[]).map((E,T)=>s.jsxs("div",{className:`border ${S} rounded-lg p-4 mb-4`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:`font-medium ${x}`,children:["Contacto ",T+1]}),s.jsx("button",{type:"button",onClick:()=>Y(T),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:s.jsx(tt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Nombre"}),s.jsx("input",{type:"text",value:E.name,onChange:H=>F(T,"name",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: María González"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Cargo"}),s.jsx("input",{type:"text",value:E.position,onChange:H=>F(T,"position",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Ejecutiva de Atención"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Teléfono"}),s.jsx("input",{type:"tel",value:E.phone,onChange:H=>F(T,"phone",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: +56 9 8765 4321"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Email"}),s.jsx("input",{type:"email",value:E.email,onChange:H=>F(T,"email",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: maria@ejemplo.cl"})]})]}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`primary_${T}`,checked:E.isPrimary,onChange:H=>F(T,"isPrimary",H.target.checked),className:"w-4 h-4 text-[#fd8412] border-gray-300 rounded focus:ring-[#fd8412]"}),s.jsx("label",{htmlFor:`primary_${T}`,className:`ml-2 text-sm ${v}`,children:"Contacto Principal"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${v} mb-2`,children:"Comentarios (opcional)"}),s.jsx("textarea",{value:E.comments,onChange:H=>F(T,"comments",H.target.value),className:`w-full px-3 py-2 ${C} ${$} ${O} border ${D} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,rows:2,placeholder:"Ej: Contacto principal para emergencias"})]})]})]},T))]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6",children:[s.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Guardando..."]}):"Actualizar Compañía"})]})]})]})]})})},v2=({isOpen:o,onClose:n,company:r,onConfirm:i,isLoading:c=!1})=>{const{modalBg:u,text:f,textSecondary:p,border:g,bgSurface:m}=we(),x=async()=>{try{await i(),n()}catch(v){console.error("Error deleting company:",v)}};return!o||!r?null:s.jsx(s.Fragment,{children:s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n}),s.jsxs("div",{className:`relative ${u} rounded-2xl shadow-xl w-full max-w-md mx-4 transform transition-all`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${g}`,children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-red-50 rounded-lg flex items-center justify-center mr-3",children:s.jsx(fs,{className:"w-6 h-6 text-red-600"})}),s.jsx("h2",{className:`text-xl font-bold ${f}`,children:"Eliminar Compañía"})]}),s.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Cerrar",children:s.jsx(Je,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("p",{className:`${f} mb-4`,children:["¿Estás seguro de que quieres eliminar la compañía"," ",s.jsx("span",{className:"font-semibold text-[#1D1F3C]",children:r.name}),"?"]}),s.jsx("p",{className:`text-sm ${p} mb-6`,children:"Esta acción no se puede deshacer. Se eliminarán todos los datos asociados a esta compañía, incluyendo contactos y comentarios."})]}),s.jsxs("div",{className:`flex items-center justify-end space-x-3 p-6 border-t ${g}`,children:[s.jsx("button",{type:"button",onClick:n,disabled:c,className:`px-4 py-2 ${f} ${m} rounded-lg hover:${m} transition-colors disabled:opacity-50`,children:"Cancelar"}),s.jsx("button",{onClick:x,disabled:c,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Eliminando..."]}):"Eliminar"})]})]})]})})},lx=({viewMode:o,onViewChange:n,className:r=""})=>{const{bgSurface:i,textSecondary:c,hoverText:u}=we();return s.jsxs("div",{className:`flex items-center ${i} rounded-lg p-1 ${r}`,children:[s.jsx("button",{onClick:()=>n("grid"),className:`flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 rounded-md transition-all duration-200 ${o==="grid"?"bg-white text-[#fd8412] shadow-sm":`${c} ${u} hover:bg-gray-200`}`,title:"Vista de cuadrícula",children:s.jsx(F1,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),s.jsx("button",{onClick:()=>n("list"),className:`flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 rounded-md transition-all duration-200 ${o==="list"?"bg-white text-[#fd8412] shadow-sm":`${c} ${u} hover:bg-gray-200`}`,title:"Vista de lista",children:s.jsx(Q1,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})},b2=()=>{const o=Bt(),{can:n}=Qt(),{bg:r,text:i,textSecondary:c}=we(),u=Ct("asistencias_siniestros"),[f,p]=_.useState(!0),[g,m]=_.useState(!1),[x,v]=_.useState([]),[y,S]=_.useState(!0),[j,C]=_.useState(null),[$,O]=_.useState(!1),[D,U]=_.useState(!1),[A,R]=_.useState(!1),[P,I]=_.useState(!1),[ae,X]=_.useState(null),[F,Q]=_.useState(null),[Y,oe]=_.useState(!1),[ee,K]=_.useState(!1),[E,T]=_.useState(!1),[H,re]=_.useState("grid"),{isProfileDrawerOpen:N,openProfileDrawer:q,closeProfileDrawer:se,handleOpenChangePasswordModal:le}=Qr();_.useEffect(()=>{const Le=()=>{m(window.innerWidth<=768),window.innerWidth<=768?p(!1):p(!0)};return Le(),window.addEventListener("resize",Le),()=>window.removeEventListener("resize",Le)},[]),_.useEffect(()=>{ne()},[]);const ne=async()=>{try{S(!0),C(null);const{companies:Le,error:ve}=await qr.getAllCompanies();ve?C(ve):Le&&v(Le)}catch{C("Error al cargar las compañías")}finally{S(!1)}},fe=()=>{o("/login")},ue=()=>{p(!f)},Ke=()=>{U(!0)},ke=async Le=>{try{oe(!0);const{company:ve,error:xe}=await qr.createCompany(Le);if(xe){console.error("Error creating company:",xe);return}ve&&await ne()}catch(ve){console.error("Error saving company:",ve)}finally{oe(!1)}},ce=async(Le,ve)=>{try{K(!0);const{company:xe,error:Be}=await qr.updateCompany(Le,ve);if(Be){console.error("Error updating company:",Be);return}xe&&(await ne(),R(!1))}catch(xe){console.error("Error updating company:",xe)}finally{K(!1)}},Ye=Le=>{X(Le),O(!0)},at=()=>{O(!1),X(null)},fa=Le=>{X(Le),R(!0)},za=Le=>{Q(Le),I(!0)},ms=async()=>{if(F)try{T(!0);const{error:Le}=await qr.deleteCompany(F.id);if(Le){console.error("Error deleting company:",Le);return}await ne(),ae?.id===F.id&&(O(!1),X(null))}catch(Le){console.error("Error deleting company:",Le)}finally{T(!1)}};return s.jsxs("div",{className:`h-screen overflow-hidden ${r}`,children:[s.jsx(Kr,{onLogout:fe,onMenuToggle:ue,showMenuButton:g,showUserIcon:!0,showLogout:!1,onUserIconClick:q}),s.jsxs("div",{className:"flex h-screen pt-16",children:[s.jsx(Ir,{isOpen:f,onClose:()=>p(!1)}),s.jsx("div",{className:"flex-1 overflow-auto main-content",children:s.jsx("main",{className:"p-6 pt-24",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:`text-2xl font-bold ${i} mb-2`,children:u.title}),s.jsx("p",{className:c,children:u.description})]}),s.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between sm:justify-start space-x-4",children:[s.jsx(lx,{viewMode:H,onViewChange:re}),s.jsx("div",{children:s.jsxs("p",{className:`${c} mt-1`,children:[x.length," compañía",x.length!==1?"s":""," disponible",x.length!==1?"s":""]})})]}),n("asistencias_siniestros","create")&&s.jsxs(he,{onClick:Ke,variant:"contained",color:"primary",size:"md",className:"flex items-center w-full sm:w-auto",children:[s.jsx($t,{className:"w-4 h-4 mr-2"}),"Agregar Compañía"]})]}),s.jsx("div",{className:"mt-8",children:s.jsx(h2,{companies:x,viewMode:H,onCompanyClick:Ye,onDeleteClick:n("asistencias_siniestros","edit")?za:void 0,canEdit:n("asistencias_siniestros","edit"),loading:y,error:j})})]})})})]}),ae&&s.jsx(p2,{isOpen:$,onClose:at,company:ae,canEdit:n("asistencias_siniestros","edit"),onEdit:()=>fa(ae),onDelete:()=>za(ae)}),s.jsx(g2,{isOpen:D,onClose:()=>U(!1),onSave:ke,isLoading:Y}),s.jsx(x2,{isOpen:A,onClose:()=>{R(!1),X(null)},onSave:ce,company:ae,isLoading:ee}),s.jsx(v2,{isOpen:P,onClose:()=>{I(!1),Q(null)},company:F,onConfirm:ms,isLoading:E}),s.jsx(Xr,{isOpen:N,onClose:se,onOpenChangePasswordModal:le})]})},y2=({paymentMethods:o,viewMode:n,onView:r,onEdit:i,onDelete:c,canEdit:u=!1,loading:f=!1,error:p=null})=>{const{bgCard:g,text:m,textSecondary:x,textMuted:v}=we(),y=j=>!j.payment_links||j.payment_links.length===0?"Sin enlaces configurados":`${j.payment_links.length} enlace${j.payment_links.length!==1?"s":""} configurado${j.payment_links.length!==1?"s":""}`,S=Hr.lazy(()=>qs(()=>import("./PaymentMethodListView-CyKQg-5n.js"),[]));return f?s.jsx("div",{className:`${g} rounded-2xl shadow-sm overflow-hidden`,children:s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fd8412] mr-3"}),s.jsx("span",{className:x,children:"Cargando métodos de pago..."})]})}):p?s.jsx("div",{className:`${g} rounded-2xl shadow-sm overflow-hidden`,children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 font-medium",children:p}),s.jsx("p",{className:`${v} text-sm mt-1`,children:"Error al cargar los métodos de pago"})]})})}):o.length===0?s.jsx("div",{className:`${g} rounded-2xl shadow-sm overflow-hidden`,children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:`${x} font-medium`,children:"No hay métodos de pago disponibles"}),s.jsx("p",{className:`${v} text-sm mt-1`,children:"Los métodos de pago aparecerán aquí cuando se agreguen"})]})})}):n==="list"?s.jsx(Hr.Suspense,{fallback:s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fd8412]"})}),children:s.jsx(S,{paymentMethods:o,onView:r,onEdit:i,onDelete:c,canEdit:u})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(j=>s.jsxs("div",{onClick:()=>r(j),className:`${g} rounded-2xl shadow-sm hover:shadow-md transition-all duration-300 p-6 cursor-pointer group`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:`text-lg font-semibold ${m} truncate`,children:j.company_name}),s.jsxs("p",{className:`text-sm ${x} truncate`,children:["RUT: ",j.company_rut]})]}),u&&c&&s.jsx("button",{onClick:C=>{C.stopPropagation(),c(j)},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Eliminar método de pago",children:s.jsx(tt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ki,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`font-medium ${m} truncate`,children:j.bank_name}),s.jsxs("p",{className:`text-sm ${x} capitalize`,children:["Cuenta ",j.account_type]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ls,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:`text-sm ${x} truncate`,children:y(j)})]}),j.usd_account_number&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lg,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:`text-sm ${m}`,children:"Cuenta USD disponible"})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`text-xs ${v}`,children:j.contact_email?"Con contacto":"Sin contacto"}),s.jsx("span",{className:"text-xs text-[#fd8412] font-medium",children:"Ver detalles →"})]})})]},j.id))})},j2=({isOpen:o,onClose:n,paymentMethod:r})=>{const{modalBg:i,text:c,textSecondary:u,textMuted:f,border:p,bgSurface:g,bgCard:m}=we(),[x,v]=_.useState(!1);if(!o||!r)return null;const y=async(j,C)=>{try{await navigator.clipboard.writeText(j),console.log(`${C} copiado al portapapeles`)}catch($){console.error("Error al copiar al portapapeles:",$)}},S=j=>{window.open(j,"_blank","noopener,noreferrer")};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n}),s.jsxs("div",{className:`relative ${i} rounded-2xl shadow-xl w-full max-w-4xl mx-4 transform transition-all max-h-[calc(100vh-2rem)] overflow-hidden modal-content`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${p}`,children:[s.jsx("div",{children:s.jsx("h2",{className:`text-2xl font-bold ${c}`,children:r.company_name})}),s.jsx("button",{onClick:n,className:`p-2 ${f} hover:${u} transition-colors`,title:"Cerrar",children:s.jsx(Je,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(100vh-200px)]",children:s.jsxs("div",{className:"space-y-8",children:[r.payment_links&&r.payment_links.length>0&&s.jsxs("div",{className:`${g} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ls,{className:`w-6 h-6 ${u} mr-3`}),s.jsx("h3",{className:`text-xl font-semibold ${c}`,children:"Enlaces de Pago"})]}),s.jsxs("span",{className:`text-sm ${f}`,children:[r.payment_links.length," enlace",r.payment_links.length!==1?"s":""]})]}),s.jsx("div",{className:"space-y-4",children:r.payment_links.map((j,C)=>s.jsxs("div",{className:`${m} rounded-lg p-4 border ${p}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ls,{className:"w-4 h-4 text-gray-500 mr-2"}),s.jsx("span",{className:`font-medium ${c}`,children:j.name})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>S(j.url),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Abrir enlace",children:s.jsx(Ls,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>y(j.url,"URL"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Copiar URL",children:s.jsx(Lt,{className:"w-4 h-4"})})]})]}),s.jsx("p",{className:`text-sm ${u} break-all`,children:j.url})]},`${j.id||C}`))})]}),s.jsxs("div",{className:`${g} rounded-xl p-6`,children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ki,{className:`w-6 h-6 ${u} mr-3`}),s.jsx("h3",{className:`text-xl font-semibold ${c}`,children:"Datos Bancarios"})]})}),s.jsxs("div",{className:`${m} rounded-lg p-4 border ${p}`,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`text-sm font-medium ${u} block mb-1`,children:"RUT"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:`font-medium ${c}`,children:r.company_rut}),s.jsx("button",{onClick:()=>y(r.company_rut,"RUT"),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"Copiar RUT",children:s.jsx(Lt,{className:"w-3 h-3"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:`text-sm font-medium ${u} block mb-1`,children:"Banco"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:`font-medium ${c}`,children:r.bank_name}),s.jsx("button",{onClick:()=>y(r.bank_name||"","nombre del banco"),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"Copiar nombre del banco",children:s.jsx(Lt,{className:"w-3 h-3"})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`text-sm font-medium ${u} block mb-1`,children:"Tipo de Cuenta"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:`font-medium ${c} capitalize`,children:["Cuenta ",r.account_type]}),s.jsx("button",{onClick:()=>y(`Cuenta ${r.account_type}`,"tipo de cuenta"),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"Copiar tipo de cuenta",children:s.jsx(Lt,{className:"w-3 h-3"})})]})]}),r.contact_email&&s.jsxs("div",{children:[s.jsx("label",{className:`text-sm font-medium ${u} block mb-1`,children:"Email de Contacto"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:`font-medium ${c}`,children:r.contact_email}),s.jsx("button",{onClick:()=>y(r.contact_email||"","email de contacto"),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"Copiar email",children:s.jsx(Lt,{className:"w-3 h-3"})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:`text-sm font-medium ${u} block mb-1`,children:"Número de Cuenta"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:`font-mono text-lg font-bold ${c}`,children:r.account_number}),s.jsx("button",{onClick:()=>y(r.account_number,"número de cuenta"),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"Copiar número de cuenta",children:s.jsx(Lt,{className:"w-3 h-3"})})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:s.jsx("button",{onClick:async()=>{const j=`RUT: ${r.company_rut}
Banco: ${r.bank_name}
Tipo de Cuenta: ${r.account_type}
Número de Cuenta: ${r.account_number}${r.contact_email?`
Email: ${r.contact_email}`:""}`;await y(j,"datos bancarios"),v(!0),setTimeout(()=>v(!1),2e3)},className:`w-full px-4 py-2 rounded-lg font-medium transition-colors ${x?"bg-green-100 text-green-700 border border-green-200":"bg-[#fd8412] text-white hover:bg-[#e6760f]"}`,children:x?"Datos copiados":"Copiar todos los datos bancarios"})})]})]}),(r.usd_account_number||r.usd_bank_name)&&s.jsxs("div",{className:`${g} rounded-xl p-6`,children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Lg,{className:`w-6 h-6 ${u} mr-3`}),s.jsx("h3",{className:`text-xl font-semibold ${c}`,children:"Cuenta en Dólares"})]})}),s.jsxs("div",{className:`${m} rounded-lg p-4 border ${p} space-y-3`,children:[r.usd_bank_name&&s.jsxs("div",{children:[s.jsx("label",{className:`text-sm font-medium ${u} block mb-1`,children:"Banco USD"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:`font-medium ${c}`,children:r.usd_bank_name}),s.jsx("button",{onClick:()=>y(r.usd_bank_name||"","banco USD"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Copiar banco USD",children:s.jsx(Lt,{className:"w-4 h-4"})})]})]}),r.usd_account_number&&s.jsxs("div",{children:[s.jsx("label",{className:`text-sm font-medium ${u} block mb-1`,children:"Número de Cuenta USD"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:`font-mono text-lg font-bold ${c}`,children:r.usd_account_number}),s.jsx("button",{onClick:()=>y(r.usd_account_number||"","número de cuenta USD"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Copiar número de cuenta USD",children:s.jsx(Lt,{className:"w-4 h-4"})})]})]})]})]})]})})]})]})})},w2=({isOpen:o,onClose:n,onSubmit:r,paymentMethod:i=null})=>{const{modalBg:c,text:u,textSecondary:f,textMuted:p,border:g,inputBg:m,inputBorder:x,inputText:v,inputPlaceholder:y,bgSurface:S}=we(),j=!!i,[C,$]=_.useState({company_name:"",company_rut:"",payment_links:[],bank_name:"",account_type:"corriente",account_number:"",contact_email:"",usd_account_number:"",usd_bank_name:""}),[O,D]=_.useState(!1),[U,A]=_.useState(null);_.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]),_.useEffect(()=>{o&&($(i?{company_name:i.company_name,company_rut:i.company_rut,payment_links:i.payment_links||[],bank_name:i.bank_name,account_type:i.account_type,account_number:i.account_number,contact_email:i.contact_email||"",usd_account_number:i.usd_account_number||"",usd_bank_name:i.usd_bank_name||""}:{company_name:"",company_rut:"",payment_links:[],bank_name:"",account_type:"corriente",account_number:"",contact_email:"",usd_account_number:"",usd_bank_name:""}),A(null))},[o,i]);const R=(Q,Y)=>{$(oe=>({...oe,[Q]:Y}))},P=()=>{const Q={id:`temp_${Date.now()}`,name:"",url:""};$(Y=>({...Y,payment_links:[...Y.payment_links,Q]}))},I=(Q,Y,oe)=>{$(ee=>({...ee,payment_links:ee.payment_links.map((K,E)=>E===Q?{...K,[Y]:oe}:K)}))},ae=Q=>{$(Y=>({...Y,payment_links:Y.payment_links.filter((oe,ee)=>ee!==Q)}))},X=async Q=>{if(Q.preventDefault(),!C.company_name.trim()){A("El nombre de la empresa es obligatorio");return}if(!C.company_rut.trim()){A("El RUT es obligatorio");return}if(!C.bank_name.trim()){A("El nombre del banco es obligatorio");return}if(!C.account_number.trim()){A("El número de cuenta es obligatorio");return}for(const Y of C.payment_links){if(!Y.name.trim()){A("Todos los enlaces de pago deben tener un nombre");return}if(!Y.url.trim()){A("Todos los enlaces de pago deben tener una URL");return}}try{D(!0),A(null),await r(C),n()}catch(Y){A(Y?.message||"Error inesperado al guardar el método de pago")}finally{D(!1)}},F=()=>{O||n()};return o?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:F}),s.jsxs("div",{className:`relative ${c} rounded-2xl shadow-xl w-full max-w-4xl mx-4 transform transition-all max-h-[calc(100vh-2rem)] overflow-hidden`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${g}`,children:[s.jsx("h2",{className:`text-2xl font-bold ${u}`,children:j?"Editar Método de Pago":"Crear Nuevo Método de Pago"}),s.jsx("button",{onClick:F,disabled:O,className:`p-2 ${p} hover:${f} transition-colors`,children:s.jsx(Je,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:X,className:"p-6 overflow-y-auto max-h-[calc(100vh-200px)]",children:[s.jsxs("div",{className:"space-y-6",children:[U&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("p",{className:"text-red-600 text-sm",children:U})}),s.jsxs("div",{className:`${S} rounded-xl p-6`,children:[s.jsx("h3",{className:`text-lg font-semibold ${u} mb-4`,children:"Información de la Empresa"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Nombre de la Empresa *"}),s.jsx("input",{type:"text",value:C.company_name,onChange:Q=>R("company_name",Q.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Empresa ABC S.A.",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"RUT *"}),s.jsx("input",{type:"text",value:C.company_rut,onChange:Q=>R("company_rut",Q.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"12.345.678-9",required:!0})]})]})]}),s.jsxs("div",{className:`${S} rounded-xl p-6`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${u}`,children:"Enlaces de Pago"}),s.jsxs("button",{type:"button",onClick:P,className:"flex items-center px-3 py-1 text-sm bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors",children:[s.jsx($t,{className:"w-4 h-4 mr-1"}),"Agregar Enlace"]})]}),C.payment_links.length===0?s.jsxs("div",{className:`text-center py-8 ${S} rounded-lg border ${g}`,children:[s.jsx("p",{className:`${f} mb-2`,children:"No hay enlaces de pago configurados"}),s.jsx("button",{type:"button",onClick:P,className:"text-[#fd8412] hover:text-[#fd8412]/80 text-sm font-medium",children:"+ Agregar primer enlace"})]}):s.jsx("div",{className:"space-y-3",children:C.payment_links.map((Q,Y)=>s.jsxs("div",{className:`border ${g} rounded-lg p-4 ${S}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:`font-medium ${u}`,children:["Enlace ",Y+1]}),s.jsx("button",{type:"button",onClick:()=>ae(Y),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Eliminar enlace",children:s.jsx(tt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-1`,children:"Nombre del Enlace"}),s.jsx("input",{type:"text",value:Q.name,onChange:oe=>I(Y,"name",oe.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Pago en línea"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-1`,children:"URL"}),s.jsx("input",{type:"url",value:Q.url,onChange:oe=>I(Y,"url",oe.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"https://..."})]})]})]},Q.id))})]}),s.jsxs("div",{className:`${S} rounded-xl p-6`,children:[s.jsx("h3",{className:`text-lg font-semibold ${u} mb-4`,children:"Datos Bancarios"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Banco *"}),s.jsx("input",{type:"text",value:C.bank_name,onChange:Q=>R("bank_name",Q.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Banco Estado",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Tipo de Cuenta *"}),s.jsxs("select",{value:C.account_type,onChange:Q=>R("account_type",Q.target.value),className:`w-full px-3 py-2 ${m} ${v} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,children:[s.jsx("option",{value:"corriente",children:"Cuenta Corriente"}),s.jsx("option",{value:"vista",children:"Cuenta Vista"}),s.jsx("option",{value:"ahorro",children:"Cuenta de Ahorro"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Número de Cuenta *"}),s.jsx("input",{type:"text",value:C.account_number,onChange:Q=>R("account_number",Q.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"123456789",required:!0})]})]})]}),s.jsxs("div",{className:`${S} rounded-xl p-6`,children:[s.jsx("h3",{className:`text-lg font-semibold ${u} mb-4`,children:"Información Adicional"}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Email de Contacto"}),s.jsx("input",{type:"email",value:C.contact_email,onChange:Q=>R("contact_email",Q.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"contacto@empresa.com"})]})})]}),s.jsxs("div",{className:`${S} rounded-xl p-6`,children:[s.jsx("h3",{className:`text-lg font-semibold ${u} mb-4`,children:"Cuenta en Dólares (Opcional)"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Banco USD"}),s.jsx("input",{type:"text",value:C.usd_bank_name,onChange:Q=>R("usd_bank_name",Q.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"Ej: Banco Internacional"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${f} mb-2`,children:"Número de Cuenta USD"}),s.jsx("input",{type:"text",value:C.usd_account_number,onChange:Q=>R("usd_account_number",Q.target.value),className:`w-full px-3 py-2 ${m} ${v} ${y} border ${x} rounded-lg focus:ring-2 focus:ring-[#fd8412] focus:border-[#fd8412]`,placeholder:"USD123456789"})]})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6",children:[s.jsx("button",{type:"button",onClick:F,disabled:O,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:O,className:"px-6 py-2 bg-[#fd8412] text-white rounded-lg hover:bg-[#fd8412]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:O?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Guardando..."]}):j?"Actualizar Método de Pago":"Crear Método de Pago"})]})]})]})]})}):null},_2=({isOpen:o,onClose:n,onConfirm:r,paymentMethod:i,isLoading:c=!1})=>{const{modalBg:u,text:f,textSecondary:p}=we();if(_.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]),!o||!i)return null;const g=async()=>{try{await r()}catch(x){console.error("Error deleting payment method:",x)}},m=()=>{c||n()};return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 transition-opacity",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:m}),s.jsxs("div",{className:`relative ${u} rounded-2xl shadow-2xl w-full max-w-md mx-4 transform transition-all`,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:s.jsx(fs,{size:24,className:"text-red-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:`text-xl font-bold ${f}`,children:"Confirmar Eliminación"}),s.jsx("p",{className:`text-sm ${p}`,children:"Esta acción no se puede deshacer"})]})]}),s.jsx("button",{onClick:m,disabled:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:s.jsx(Je,{size:20,className:p})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("p",{className:`${f} mb-4`,children:["¿Estás seguro de que quieres eliminar el método de pago de"," ",s.jsx("span",{className:"font-semibold text-[#1D1F3C]",children:i.company_name}),"?"]}),s.jsx("p",{className:`text-sm ${p} mb-6`,children:"Esta acción no se puede deshacer. Se eliminará toda la información bancaria, enlaces de pago y datos asociados a este método de pago."})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:m,disabled:c,className:`px-4 py-2 ${f} bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors disabled:opacity-50`,children:"Cancelar"}),s.jsx("button",{onClick:g,disabled:c,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Eliminando..."]}):"Eliminar"})]})]})]})};class Di{static async getAll(){try{const{data:n,error:r}=await W.from("payment_methods").select("*").eq("is_active",!0).order("company_name",{ascending:!0});return r?(console.error("Error fetching payment methods:",r),{paymentMethods:[],error:r.message}):{paymentMethods:n||[]}}catch(n){return console.error("Error in getAll:",n),{paymentMethods:[],error:n.message}}}static async getById(n){try{const{data:r,error:i}=await W.from("payment_methods").select("*").eq("id",n).single();return i?(console.error("Error fetching payment method:",i),{error:i.message}):{paymentMethod:r}}catch(r){return console.error("Error in getById:",r),{error:r.message}}}static async create(n){try{const{data:r}=await W.auth.getUser(),{data:i,error:c}=await W.from("payment_methods").insert([{...n,is_active:!0,created_by:r?.user?.id,updated_by:r?.user?.id}]).select().single();return c?(console.error("Error creating payment method:",c),{error:c.message}):{paymentMethod:i}}catch(r){return console.error("Error in create:",r),{error:r.message}}}static async update(n,r){try{const{data:i}=await W.auth.getUser(),{error:c}=await W.from("payment_methods").update({...r,updated_by:i?.user?.id,updated_at:new Date().toISOString()}).eq("id",n);return c?(console.error("Error updating payment method:",c),{success:!1,error:c.message}):{success:!0}}catch(i){return console.error("Error in update:",i),{success:!1,error:i.message}}}static async delete(n){try{const{error:r}=await W.from("payment_methods").update({is_active:!1}).eq("id",n);return r?(console.error("Error deleting payment method:",r),{success:!1,error:r.message}):{success:!0}}catch(r){return console.error("Error in delete:",r),{success:!1,error:r.message}}}static async toggleActive(n){try{const{data:r,error:i}=await W.from("payment_methods").select("is_active").eq("id",n).single();if(i)return{success:!1,error:i.message};const{error:c}=await W.from("payment_methods").update({is_active:!r.is_active}).eq("id",n);return c?(console.error("Error toggling payment method status:",c),{success:!1,error:c.message}):{success:!0}}catch(r){return console.error("Error in toggleActive:",r),{success:!1,error:r.message}}}static async getAllWithInactive(){try{const{data:n,error:r}=await W.from("payment_methods").select("*").order("company_name",{ascending:!0});return r?(console.error("Error fetching all payment methods:",r),{paymentMethods:[],error:r.message}):{paymentMethods:n||[]}}catch(n){return console.error("Error in getAllWithInactive:",n),{paymentMethods:[],error:n.message}}}}const N2=()=>{const o=Bt(),{can:n}=Qt(),{bg:r,text:i,textSecondary:c}=we(),u=Ct("metodos_pago"),[f,p]=_.useState(!0),[g,m]=_.useState(!1),[x,v]=_.useState([]),[y,S]=_.useState(!0),[j,C]=_.useState(null),[$,O]=_.useState("grid"),{isProfileDrawerOpen:D,openProfileDrawer:U,closeProfileDrawer:A,handleOpenChangePasswordModal:R}=Qr(),[P,I]=_.useState({isOpen:!1,paymentMethod:null}),[ae,X]=_.useState({isOpen:!1,paymentMethod:null}),[F,Q]=_.useState({isOpen:!1,paymentMethod:null});_.useEffect(()=>{const q=()=>{m(window.innerWidth<=768),window.innerWidth<=768?p(!1):p(!0)};return q(),window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[]),_.useEffect(()=>{Y()},[]);const Y=async()=>{try{S(!0),C(null);const{paymentMethods:q,error:se}=await Di.getAll();se?C(se):v(q)}catch{C("Error al cargar los métodos de pago")}finally{S(!1)}},oe=()=>{o("/login")},ee=()=>{p(!f)},K=q=>{I({isOpen:!0,paymentMethod:q})},E=q=>{X({isOpen:!0,paymentMethod:q})},T=q=>{Q({isOpen:!0,paymentMethod:q})},H=()=>{X({isOpen:!0,paymentMethod:null})},re=async q=>{try{if(!!ae.paymentMethod){const{success:le,error:ne}=await Di.update(ae.paymentMethod.id,q);if(!le){alert(`Error al actualizar: ${ne}`);return}}else{const{paymentMethod:le,error:ne}=await Di.create(q);if(!le){alert(`Error al crear: ${ne}`);return}}X({isOpen:!1,paymentMethod:null}),await Y()}catch(se){alert(`Error: ${se.message}`)}},N=async()=>{if(F.paymentMethod)try{const{success:q,error:se}=await Di.delete(F.paymentMethod.id);if(!q){alert(`Error al eliminar: ${se}`);return}Q({isOpen:!1,paymentMethod:null}),await Y()}catch(q){alert(`Error: ${q.message}`)}};return s.jsxs("div",{className:`h-screen overflow-hidden ${r}`,children:[s.jsx(Kr,{onLogout:oe,onMenuToggle:ee,showMenuButton:g,showUserIcon:!0,showLogout:!1,onUserIconClick:U}),s.jsxs("div",{className:"flex h-screen pt-16",children:[s.jsx(Ir,{isOpen:f,onClose:()=>p(!1)}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"p-6 pt-24 pb-0",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:`text-2xl font-bold ${i} mb-2`,children:u.title}),s.jsx("p",{className:c,children:u.description})]}),s.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between sm:justify-start space-x-4",children:[s.jsx(lx,{viewMode:$,onViewChange:O}),s.jsx("div",{children:s.jsxs("p",{className:`${c} mt-1`,children:[x.length," método",x.length!==1?"s":""," disponible",x.length!==1?"s":""]})})]}),n("metodos_pago","create")&&s.jsxs(he,{onClick:H,variant:"contained",color:"primary",size:"md",className:"flex items-center w-full sm:w-auto",children:[s.jsx($t,{className:"w-4 h-4 mr-2"}),"Agregar Método"]})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto px-6 pb-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx(y2,{paymentMethods:x,viewMode:$,onView:K,onEdit:n("metodos_pago","edit")?E:void 0,onDelete:n("metodos_pago","edit")?T:void 0,canEdit:n("metodos_pago","edit"),loading:y,error:j})})})]})]}),s.jsx(Xr,{isOpen:D,onClose:A,onOpenChangePasswordModal:R}),s.jsx(j2,{isOpen:P.isOpen,onClose:()=>I({isOpen:!1,paymentMethod:null}),paymentMethod:P.paymentMethod}),s.jsx(w2,{isOpen:ae.isOpen,onClose:()=>X({isOpen:!1,paymentMethod:null}),onSubmit:re,paymentMethod:ae.paymentMethod}),s.jsx(_2,{isOpen:F.isOpen,onClose:()=>Q({isOpen:!1,paymentMethod:null}),onConfirm:N,paymentMethod:F.paymentMethod})]})},tl=({children:o,module:n,fallbackPath:r="/dashboard"})=>{const{canAccess:i}=Qt();return i(n)?s.jsx(s.Fragment,{children:o}):s.jsx(Sb,{to:r,replace:!0})};function S2(){return s.jsx(f1,{children:s.jsx(d1,{children:s.jsx(m1,{children:s.jsxs(h1,{children:[s.jsx(Zb,{children:s.jsx("div",{className:"App",children:s.jsxs(Cb,{children:[s.jsx($a,{path:"/",element:s.jsx(Pp,{})}),s.jsx($a,{path:"/login",element:s.jsx(Pp,{})}),s.jsx($a,{path:"/dashboard",element:s.jsx(Bw,{})}),s.jsx($a,{path:"/usuarios",element:s.jsx(tl,{module:"usuarios",children:s.jsx(Jw,{})})}),s.jsx($a,{path:"/archivos",element:s.jsx(tl,{module:"archivos",children:s.jsx(i2,{})})}),s.jsx($a,{path:"/anuncios",element:s.jsx(tl,{module:"anuncios",children:s.jsx(f2,{})})}),s.jsx($a,{path:"/asistencias-siniestros",element:s.jsx(tl,{module:"asistencias_siniestros",children:s.jsx(b2,{})})}),s.jsx($a,{path:"/metodos-pago",element:s.jsx(tl,{module:"metodos_pago",children:s.jsx(N2,{})})})]})})}),s.jsx(bw,{})]})})})})}Dv.createRoot(document.getElementById("root")).render(s.jsx(_.StrictMode,{children:s.jsx(S2,{})}));export{ca as E,qp as M,ta as P,cl as S,tt as T,Ii as U,s as j,we as u};
